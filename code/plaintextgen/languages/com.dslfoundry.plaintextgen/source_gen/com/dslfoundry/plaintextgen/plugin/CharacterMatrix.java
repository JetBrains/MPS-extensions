package com.dslfoundry.plaintextgen.plugin;

/*Generated by MPS */

import java.util.List;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import java.util.ArrayList;
import java.awt.Point;

public class CharacterMatrix {
  private List<StringBuilder> Matrix;
  private List<Integer> LastColumn;

  public CharacterMatrix() {
    Matrix = ListSequence.fromList(new ArrayList<StringBuilder>());
    LastColumn = ListSequence.fromList(new ArrayList<Integer>());
  }

  public void Write(int row, int column, String word) {
    while (ListSequence.fromList(Matrix).count() <= row) {
      ListSequence.fromList(Matrix).addElement(new StringBuilder());
      ListSequence.fromList(LastColumn).addElement(0);
    }
    if (column < ListSequence.fromList(LastColumn).getElement(row)) {
      throw new RuntimeException("Cannot write a position twice");
    } else {
      StringBuilder b = ListSequence.fromList(Matrix).getElement(row);
      for (int i = ListSequence.fromList(LastColumn).getElement(row); i < column; ++i) {
        b.append(" ");
      }
      b.append(word);
      ListSequence.fromList(LastColumn).setElement(row, column + word.length());
    }
  }

  public int LineCount() {
    return ListSequence.fromList(Matrix).count();
  }

  public String ToString(int row) {
    return ListSequence.fromList(Matrix).getElement(row).toString();
  }

  public Point MaxPos(Point a, Point b) {
    return new Point(Integer.max(a.x, b.x), Integer.max(a.y, b.y));
  }
}

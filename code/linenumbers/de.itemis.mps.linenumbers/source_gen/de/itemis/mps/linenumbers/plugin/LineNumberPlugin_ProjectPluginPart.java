package de.itemis.mps.linenumbers.plugin;

/*Generated by MPS */

import jetbrains.mps.plugins.part.ProjectPluginPart;
import jetbrains.mps.editor.EditorComponentLifecycleListener;
import org.jetbrains.annotations.NotNull;
import org.jetbrains.mps.openapi.project.Project;
import jetbrains.mps.openapi.editor.EditorComponent;
import de.slisson.mps.reflection.runtime.ReflectionUtil;
import jetbrains.mps.project.MPSProject;
import jetbrains.mps.ide.MPSCoreComponents;
import jetbrains.mps.editor.EditorComponentTrackService;
import jetbrains.mps.core.platform.Platform;

public class LineNumberPlugin_ProjectPluginPart extends ProjectPluginPart {
  private EditorComponentLifecycleListener lineNumberListener = new EditorComponentLifecycleListener() {

    @Override
    public void editorComponentCreated(@NotNull Project project, @NotNull EditorComponent editorComponent) {
      if (!(isApplicable(editorComponent))) {
        return;
      }
      LineNumberComponent.getOrCreateInstance(((jetbrains.mps.nodeEditor.EditorComponent) editorComponent)).install();
    }
    @Override
    public void editorComponentDisposed(@NotNull Project project, @NotNull EditorComponent editorComponent) {
      if (!(isApplicable(editorComponent))) {
        return;
      }
      check_8dvrpk_a1a2a0a0(LineNumberComponent.getOrCreateInstance(((jetbrains.mps.nodeEditor.EditorComponent) editorComponent)));
    }

    public boolean isApplicable(@NotNull EditorComponent component) {
      jetbrains.mps.nodeEditor.EditorComponent comp = as_nsdifs_a0a0a4a0a0(component, jetbrains.mps.nodeEditor.EditorComponent.class);
      return (comp != null ? ((Boolean) ReflectionUtil.callMethod(jetbrains.mps.nodeEditor.EditorComponent.class, comp, "hasUI", new Class[]{}, new Object[]{})) : false);
    }
  };
  public LineNumberPlugin_ProjectPluginPart() {
  }
  @Override
  public void init(MPSProject project) {
    EditorComponentLifecycleListener extension = LineNumberPlugin_ProjectPluginPart.this.lineNumberListener;
    check_8dvrpk_a1a0(check_8dvrpk_a0b0a(check_8dvrpk_a0a1a0(MPSCoreComponents.getInstance())), extension);
  }
  @Override
  public void dispose(MPSProject project) {
    EditorComponentLifecycleListener extension = LineNumberPlugin_ProjectPluginPart.this.lineNumberListener;
    check_8dvrpk_a1a0_0(check_8dvrpk_a0b0a_0(check_8dvrpk_a0a1a0_0(MPSCoreComponents.getInstance())), extension);
  }
  private static void check_8dvrpk_a1a2a0a0(LineNumberComponent checkedDotOperand) {
    if (null != checkedDotOperand) {
      checkedDotOperand.uninstall();
    }

  }
  private static void check_8dvrpk_a1a0(EditorComponentTrackService checkedDotOperand, EditorComponentLifecycleListener extension) {
    if (null != checkedDotOperand) {
      checkedDotOperand.addListener(extension);
    }

  }
  private static EditorComponentTrackService check_8dvrpk_a0b0a(Platform checkedDotOperand) {
    if (null != checkedDotOperand) {
      return checkedDotOperand.findComponent(EditorComponentTrackService.class);
    }
    return null;
  }
  private static Platform check_8dvrpk_a0a1a0(MPSCoreComponents checkedDotOperand) {
    if (null != checkedDotOperand) {
      return checkedDotOperand.getPlatform();
    }
    return null;
  }
  private static void check_8dvrpk_a1a0_0(EditorComponentTrackService checkedDotOperand, EditorComponentLifecycleListener extension) {
    if (null != checkedDotOperand) {
      checkedDotOperand.removeListener(extension);
    }

  }
  private static EditorComponentTrackService check_8dvrpk_a0b0a_0(Platform checkedDotOperand) {
    if (null != checkedDotOperand) {
      return checkedDotOperand.findComponent(EditorComponentTrackService.class);
    }
    return null;
  }
  private static Platform check_8dvrpk_a0a1a0_0(MPSCoreComponents checkedDotOperand) {
    if (null != checkedDotOperand) {
      return checkedDotOperand.getPlatform();
    }
    return null;
  }
  private static <T> T as_nsdifs_a0a0a4a0a0(Object o, Class<T> type) {
    return (type.isInstance(o) ? (T) o : null);
  }
}

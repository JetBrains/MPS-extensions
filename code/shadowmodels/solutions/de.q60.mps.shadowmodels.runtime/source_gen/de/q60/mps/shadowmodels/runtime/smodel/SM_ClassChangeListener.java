package de.q60.mps.shadowmodels.runtime.smodel;

/*Generated by MPS */

import jetbrains.mps.classloading.DeployListener;
import java.util.Set;
import jetbrains.mps.module.ReloadableModule;
import jetbrains.mps.classloading.ClassLoaderManager;
import com.intellij.openapi.application.ApplicationManager;
import jetbrains.mps.ide.MPSCoreComponents;
import org.jetbrains.annotations.NotNull;
import org.jetbrains.mps.openapi.util.ProgressMonitor;

public abstract class SM_ClassChangeListener implements DeployListener {

  public SM_ClassChangeListener() {
  }

  public abstract void classesChanged(Set<ReloadableModule> modules);

  public void start() {
    ClassLoaderManager classLoaderManager = ApplicationManager.getApplication().getComponent(MPSCoreComponents.class).getClassLoaderManager();
    classLoaderManager.addListener(this);
  }

  public void stop() {
    ClassLoaderManager classLoaderManager = ApplicationManager.getApplication().getComponent(MPSCoreComponents.class).getClassLoaderManager();
    classLoaderManager.removeListener(this);
  }

  @Override
  public void onLoaded(Set<ReloadableModule> modules, @NotNull ProgressMonitor monitor) {
    classesChanged(modules);
  }

  @Override
  public void onUnloaded(Set<ReloadableModule> modules, @NotNull ProgressMonitor monitor) {
    classesChanged(modules);
  }
}

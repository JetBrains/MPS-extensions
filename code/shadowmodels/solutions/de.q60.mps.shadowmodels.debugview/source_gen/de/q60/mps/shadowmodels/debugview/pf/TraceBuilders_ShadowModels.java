package de.q60.mps.shadowmodels.debugview.pf;

/*Generated by MPS */

import de.q60.mps.polymorphicfunctions.runtime.PFModule;
import jetbrains.mps.logging.Logger;
import jetbrains.mps.baseLanguage.closures.runtime._FunctionTypes;
import de.q60.mps.polymorphicfunctions.runtime.IFunctionImplementation;
import java.util.List;
import de.q60.mps.polymorphicfunctions.runtime.IParameterType;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import java.util.ArrayList;
import de.q60.mps.polymorphicfunctions.runtime.ParameterType_Classifier;
import de.q60.mps.polymorphicfunctions.runtime.IPFContext;
import de.q60.mps.polymorphicfunctions.runtime.ParameterList;
import de.q60.mps.explorer.pf.ExplorerElement;
import de.q60.mps.polymorphicfunctions.runtime.ContextPFContext;
import org.jetbrains.mps.openapi.model.SNode;
import de.q60.mps.shadowmodels.runtime.concurrentrepo.RepositoryMirror;
import org.modelix.model.mpsadapters.mps.SNodeToNodeAdapter;
import de.q60.mps.explorer.pf.IExplorerContext;
import jetbrains.mps.ide.icons.GlobalIconManager;
import de.q60.mps.shadowmodels.runtime.smodel.SM_SNodeAPI;
import de.q60.mps.shadowmodels.runtime.engine.IStageReference;
import de.q60.mps.shadowmodels.runtime.smodel.SM_TransformationTrace;
import de.q60.mps.shadowmodels.runtime.engine.IScope;
import jetbrains.mps.internal.collections.runtime.Sequence;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import jetbrains.mps.internal.collections.runtime.CollectionSequence;
import java.util.Objects;
import de.q60.mps.polymorphicfunctions.runtime.GroupPFContext;
import org.jetbrains.mps.openapi.language.SProperty;
import org.jetbrains.mps.openapi.language.SReferenceLink;
import org.jetbrains.mps.openapi.model.SReference;
import de.q60.mps.shadowmodels.runtime.engine.IOutputNodeReference;
import de.q60.mps.shadowmodels.runtime.engine.IResultElement;
import org.modelix.model.api.INode;
import org.modelix.model.mpsadapters.mps.NodeToSNodeAdapter;
import de.q60.mps.shadowmodels.runtime.engine.TransformationResult;
import de.q60.mps.shadowmodels.runtime.engine.MappingLabelCall;
import de.q60.mps.shadowmodels.runtime.concurrentrepo.MissingSNode;
import de.q60.mps.incremental.runtime.DependencyKey;
import de.q60.mps.shadowmodels.runtime.smodel.SM_GeneratedTransformationRule;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import de.q60.mps.shadowmodels.transformation.behavior.ITransformationsNamespaceContent__BehaviorDescriptor;
import de.q60.mps.shadowmodels.runtime.engine.ISubgraphRef;
import de.q60.mps.shadowmodels.runtime.engine.ITransformationEngine;
import de.q60.mps.shadowmodels.runtime.engine.ISubgraphStage;
import de.q60.mps.shadowmodels.runtime.engine.FinalStageReference;
import de.q60.mps.shadowmodels.runtime.engine.SubgraphStage;
import de.q60.mps.shadowmodels.runtime.engine.SubstepStageReference;
import de.q60.mps.shadowmodels.runtime.engine.StageRootNodes;
import de.q60.mps.shadowmodels.runtime.engine.OutputNodeReferenceAsNode;
import de.q60.mps.shadowmodels.runtime.engine.MappingLabels;
import jetbrains.mps.baseLanguage.tuples.runtime.Tuples;
import de.q60.mps.shadowmodels.runtime.engine.IOutputNodesReference;
import de.q60.mps.shadowmodels.runtime.engine.ScopeImport;
import de.q60.mps.shadowmodels.runtime.engine.IUniqueContainmentTarget;
import jetbrains.mps.baseLanguage.tuples.runtime.MultiTuple;
import de.q60.mps.shadowmodels.runtime.engine.ReferenceTargetInParentSubgraph;
import de.q60.mps.shadowmodels.runtime.engine.ContainmentInSubgraphRefTarget;
import de.q60.mps.shadowmodels.runtime.engine.RewriteCall;
import de.q60.mps.shadowmodels.runtime.engine.ForkCall;
import de.q60.mps.shadowmodels.runtime.engine.DependencyTrackingNode;
import jetbrains.mps.baseLanguage.closures.runtime.Wrappers;
import org.modelix.model.mpsadapters.mps.SNodeAPI;
import jetbrains.mps.internal.collections.runtime.IterableUtils;
import de.q60.mps.polymorphicfunctions.runtime.GroupPriorityRule;
import de.q60.mps.polymorphicfunctions.runtime.SingleImplementationPriorityGroup;
import de.q60.mps.shadowmodels.runtime.engine.ILazyStageRef;
import de.q60.mps.shadowmodels.runtime.engine.ChildSubgraphRef;
import de.q60.mps.shadowmodels.runtime.engine.GoalCall;
import de.q60.mps.shadowmodels.runtime.engine.TransformationCall;
import de.q60.mps.shadowmodels.runtime.engine.ContainmentTargetRootNodes;
import de.q60.mps.shadowmodels.runtime.engine.ResultElementOutputNodeReference_Id;
import de.q60.mps.shadowmodels.runtime.engine.NamedScope;
import org.jetbrains.mps.openapi.language.SConcept;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;

public class TraceBuilders_ShadowModels extends PFModule {
  private static final Logger LOG = Logger.getLogger(TraceBuilders_ShadowModels.class);
  public static final TraceBuilders_ShadowModels INSTANCE = ((_FunctionTypes._return_P0_E0<TraceBuilders_ShadowModels>) () -> {
    try {
      return new TraceBuilders_ShadowModels();
    } catch (RuntimeException ex) {
      if (LOG.isErrorLevel()) {
        LOG.error("Failed to load " + TraceBuilders_ShadowModels.class.getName(), ex);
      }
      throw ex;
    }
  }).invoke();
  private TraceBuilders_ShadowModels() {
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(ForkExplorerRoot.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/buildTrace_1";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof ForkExplorerRoot)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return new Object() {
          public ExplorerElement contextCall(final IPFContext _PFcontext) {
            return IPFContext.CURRENT.computeWith(_PFcontext, () -> ((ExplorerElement) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new ParameterList(new Object[]{((ForkExplorerRoot) _PFparameters.get(0)).rootNode}))));
          }
        }.contextCall(new ContextPFContext(_PFcontext, "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext", new ParameterList(new Object[]{((ForkExplorerRoot) _PFparameters.get(0)).context})));
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(SNode.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext", "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/buildTrace_0";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof SNode)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        ExplorerElement result = new ExplorerElement();

        SNode originalNode = RepositoryMirror.getOriginalNode(SNodeToNodeAdapter.wrap(((SNode) _PFparameters.get(0))), ((IExplorerContext) _PFcontext.getContextParameters("de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup").get(0)).getRepository());
        final SNode snode = (originalNode != null ? originalNode : ((SNode) _PFparameters.get(0)));
        result.text = ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{((SNode) _PFparameters.get(0))})));
        result.icon = (TraceBuilderUtil.isShadowNode(snode) ? TraceIcons.SHADOW_NODE_ICON : GlobalIconManager.getInstance().getIconFor(((SNode) _PFparameters.get(0))));
        result.navigationTarget = () -> SM_SNodeAPI.tryGetUnwrappedNode(snode);

        IStageReference ownStage = SM_TransformationTrace.getSubgraphStage(((SNode) _PFparameters.get(0)));
        IScope parentScope = SM_TransformationTrace.getScope(((SNode) _PFparameters.get(0)));
        IStageReference ownInputStage = Sequence.fromIterable(SM_TransformationTrace.tryGetInputNodes(((SNode) _PFparameters.get(0)))).select((it) -> SM_TransformationTrace.getSubgraphStage(it)).first();
        for (SContainmentLink link : CollectionSequence.fromCollection(((SNode) _PFparameters.get(0)).getConcept().getContainmentLinks())) {
          try {
            IStageReference prevChildStage = null;
            IScope prevScope = null;
            ExplorerElement teChildScope = null;
            for (SNode child : Sequence.fromIterable(((SNode) _PFparameters.get(0)).getChildren(link))) {
              IStageReference childStage = SM_TransformationTrace.getSubgraphStage(child);
              if (childStage == null || Objects.equals(childStage, ownStage)) {
                IScope childScope = SM_TransformationTrace.getScope(child);
                if (!(Objects.equals(childScope, parentScope))) {
                  if (!(Objects.equals(childScope, prevScope))) {
                    teChildScope = new ExplorerElement();
                    teChildScope.owner = childScope;
                    result.addChild(link.getName() + ": ", teChildScope);
                    teChildScope.text = new Object() {
                      public String groupCall(final IPFContext _PFcontext) {
                        return ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{childScope})));
                      }
                    }.groupCall(new GroupPFContext(_PFcontext, "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shortToString"));
                    teChildScope.icon = ScopeIcon.INSTANCE;
                    teChildScope.detailViewRoot = childScope;
                  }
                  teChildScope.addChild(child);
                  prevScope = childScope;
                } else {
                  result.addChild(link.getName() + ": ", child);
                  prevScope = null;
                }
              } else {
                if (!(Objects.equals(childStage, prevChildStage))) {
                  result.addChild(link.getName() + ": ", childStage.getSubgraphRef());
                }
              }

              prevChildStage = childStage;

              // Handle TransformationCallExpression
              for (SNode childInput : Sequence.fromIterable(SM_TransformationTrace.tryGetInputNodes(child))) {
                IStageReference childInputStage = SM_TransformationTrace.getSubgraphStage(childInput);
                if (childInputStage != null && !(Objects.equals(ownInputStage, childInputStage))) {
                  result.addChild("   ↑ input node : ", childInput);
                  result.addChild("   ↑ input stage: ", childInputStage);
                }
              }
            }
          } catch (Exception ex) {
            if (LOG.isErrorLevel()) {
              LOG.error("", ex);
            }
            result.addChild("!!! " + link.getName() + ": ", ex.getMessage());
          }
        }

        ExplorerElement teDetails = new ExplorerElement();
        result.detailViewRoot = teDetails;
        teDetails.text = result.text;
        teDetails.icon = result.icon;
        teDetails.expandByDefault = true;

        for (SProperty property : CollectionSequence.fromCollection(((SNode) _PFparameters.get(0)).getConcept().getProperties())) {
          String value = ((SNode) _PFparameters.get(0)).getProperty(property);
          if (value != null) {
            teDetails.addChild(property.getName() + " = " + value);
          }
        }
        for (SReferenceLink link : CollectionSequence.fromCollection(((SNode) _PFparameters.get(0)).getConcept().getReferenceLinks())) {
          SReference ref = ((SNode) _PFparameters.get(0)).getReference(link);
          if (ref != null) {
            teDetails.addChild(link.getName() + " = ", ref);
          }
        }

        teDetails.addChild("Concept: ", ((SNode) _PFparameters.get(0)).getConcept());

        final IOutputNodeReference outputNodeReference = SM_TransformationTrace.getOutputNodeReference(((SNode) _PFparameters.get(0)));
        teDetails.addLazyChild("Traceback: ", () -> {
          return new Object() {
            public ExplorerElement groupCall(final IPFContext _PFcontext) {
              return ((ExplorerElement) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new ParameterList(new Object[]{outputNodeReference})));
            }
          }.groupCall(new GroupPFContext(_PFcontext, "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_traceback.traceBack"));
        });

        return result;
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(SReference.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext", "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/buildTrace_1";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof SReference)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        ExplorerElement te = new ExplorerElement();
        te.text = ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{((SReference) _PFparameters.get(0))})));
        IResultElement resultElement = SM_TransformationTrace.getResultElement(((SReference) _PFparameters.get(0)).getSourceNode());
        if (resultElement != null) {
          te.addChild("target: ", resultElement.getReferenceTarget(((SReference) _PFparameters.get(0)).getLink().getName()));
        }
        te.addChild("resolved target: ", ((SReference) _PFparameters.get(0)).getTargetNode());
        return te;
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(INode.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext", "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/buildTrace_3";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof INode)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        SNode originalNode = RepositoryMirror.getOriginalNode(((INode) _PFparameters.get(0)), ((IExplorerContext) _PFcontext.getContextParameters("de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup").get(0)).getRepository());
        return ((ExplorerElement) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new ParameterList(new Object[]{(originalNode != null ? originalNode : NodeToSNodeAdapter.wrap(((INode) _PFparameters.get(0))))})));
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(TransformationResult.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext", "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/buildTrace_5";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof TransformationResult)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        ExplorerElement result = new ExplorerElement();
        result.text = ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{((TransformationResult) _PFparameters.get(0))})));
        result.navigationTarget = () -> ((ITraceBuilderContext) _PFcontext.getContextParameters("de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext").get(0)).resolveTraceInfo(((TransformationResult) _PFparameters.get(0)).getTraceInfo());
        result.addChild("Call: ", ((TransformationResult) _PFparameters.get(0)).getResultReference());
        return result;
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(MappingLabelCall.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext", "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/buildTrace_7";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof MappingLabelCall)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        ExplorerElement result = new ExplorerElement();
        result.text = ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{((MappingLabelCall) _PFparameters.get(0))})));
        result.addChild("Label ID: ", ((MappingLabelCall) _PFparameters.get(0)).getLabelId());
        result.addChild(((MappingLabelCall) _PFparameters.get(0)).getInput());
        return result;
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(MissingSNode.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext", "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/buildTrace_9";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof MissingSNode)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        ExplorerElement result = new ExplorerElement();
        result.text = ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{((MissingSNode) _PFparameters.get(0)).getRef()})));
        result.navigationTarget = () -> ((MissingSNode) _PFparameters.get(0)).getRef().resolve(((IExplorerContext) _PFcontext.getContextParameters("de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup").get(0)).getRepository());
        return result;
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(DependencyKey.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext", "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/buildTrace_10";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof DependencyKey)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        ExplorerElement result = new ExplorerElement();
        result.text = ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{((DependencyKey) _PFparameters.get(0))})));
        for (Object key : ((DependencyKey) _PFparameters.get(0)).getKeys()) {
          result.addChild(key);
        }
        return result;
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(SM_GeneratedTransformationRule.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext", "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/buildTrace_12";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof SM_GeneratedTransformationRule)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        ExplorerElement result = new ExplorerElement();
        final SNode decl = SNodeOperations.cast(((SM_GeneratedTransformationRule) _PFparameters.get(0)).declaration.resolve(((IExplorerContext) _PFcontext.getContextParameters("de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup").get(0)).getRepository()), CONCEPTS.Transformation$Gz);
        if ((decl != null)) {
          result.text = ITransformationsNamespaceContent__BehaviorDescriptor.getFullQualifiedName_id2$QnGbu$Y3I.invoke(decl);
          result.navigationTarget = () -> decl;
        } else {
          result.text = ((SM_GeneratedTransformationRule) _PFparameters.get(0)).getClass().getName();
        }
        return result;
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(ISubgraphRef.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext", "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/buildTrace_14";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof ISubgraphRef)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        ExplorerElement te = new ExplorerElement();
        te.text = new Object() {
          public String groupCall(final IPFContext _PFcontext) {
            return ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{((ISubgraphRef) _PFparameters.get(0))})));
          }
        }.groupCall(new GroupPFContext(_PFcontext, "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shortToString"));
        te.icon = TraceIcons.SUBGRAPH_ICON;

        ExplorerElement teDetails = new ExplorerElement();
        te.detailViewRoot = teDetails;
        teDetails.icon = TraceIcons.SUBGRAPH_ICON;
        teDetails.text = "Graph Details";
        teDetails.expandByDefault = true;
        teDetails.addLazyChild("Transformation: ", () -> {
          return new Object() {
            public ExplorerElement groupCall(final IPFContext _PFcontext) {
              return ((ExplorerElement) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new ParameterList(new Object[]{((ISubgraphRef) _PFparameters.get(0))})));
            }
          }.groupCall(new GroupPFContext(_PFcontext, "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_traceback.traceBack"));
        });

        ITransformationEngine engine = ((ITraceBuilderContext) _PFcontext.getContextParameters("de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext").get(0)).getTransformationEngine();
        ISubgraphStage finalStage = engine.resolveStage(new FinalStageReference(((ISubgraphRef) _PFparameters.get(0))));
        List<ISubgraphStage> stages = ListSequence.fromList(new ArrayList<ISubgraphStage>());
        for (ISubgraphStage s = finalStage; s != null; s = (s.getPreviousStageRef() == null ? null : engine.resolveStage(s.getPreviousStageRef()))) {
          ListSequence.fromList(stages).addElement(s);
        }

        for (ISubgraphStage stage : ListSequence.fromList(stages).reversedList()) {
          te.addChild(stage);
        }

        return te;
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(SubgraphStage.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext", "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/buildTrace_16";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof SubgraphStage)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        ExplorerElement te = new ExplorerElement();
        ExplorerElement teDetails = new ExplorerElement();
        te.detailViewRoot = teDetails;
        teDetails.text = "Graph Stage Details";
        teDetails.icon = TraceIcons.STAGE_ICON;
        teDetails.expandByDefault = true;

        final SubstepStageReference stageRef = ((SubgraphStage) _PFparameters.get(0)).getStageReference();
        te.text = new Object() {
          public String groupCall(final IPFContext _PFcontext) {
            return ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{stageRef})));
          }
        }.groupCall(new GroupPFContext(_PFcontext, "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shortToString"));
        te.icon = TraceIcons.STAGE_ICON;
        te.navigationTarget = () -> ((ITraceBuilderContext) _PFcontext.getContextParameters("de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext").get(0)).resolveTraceInfo(((String) _PFcontext.callFunction("de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_traceInfo.getTraceInfo", new ParameterList(new Object[]{stageRef.getSubgraphRef()}))));

        Iterable<IOutputNodeReference> rootNodes = new StageRootNodes(((SubgraphStage) _PFparameters.get(0)).getStageReference()).getNodes(((SubgraphStage) _PFparameters.get(0)).getEngine());
        for (IOutputNodeReference rootNode : Sequence.fromIterable(rootNodes)) {
          te.addChild(OutputNodeReferenceAsNode.create(((SubgraphStage) _PFparameters.get(0)).getEngine(), rootNode));
        }

        ExplorerElement mappingLabelsTE = new ExplorerElement();
        teDetails.addChild(mappingLabelsTE);
        mappingLabelsTE.text = "Mapping Labels";
        mappingLabelsTE.icon = TraceIcons.LABELS;
        List<MappingLabels> allMappingLabels = Sequence.fromIterable(((SubgraphStage) _PFparameters.get(0)).getMappingLabels()).toList();
        if (ListSequence.fromList(allMappingLabels).isNotEmpty()) {
          for (MappingLabels mappingLabels : ListSequence.fromList(allMappingLabels)) {
            for (final Tuples._2<MappingLabelCall, IOutputNodesReference> entry : Sequence.fromIterable(mappingLabels.getEntries())) {
              ExplorerElement labelTE = new ExplorerElement();
              labelTE.text = new Object() {
                public String groupCall(final IPFContext _PFcontext) {
                  return ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{entry._0()})));
                }
              }.groupCall(new GroupPFContext(_PFcontext, "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shortToString")) + " -> " + new Object() {
                public String groupCall(final IPFContext _PFcontext) {
                  return ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{entry._1()})));
                }
              }.groupCall(new GroupPFContext(_PFcontext, "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shortToString"));
              labelTE.icon = TraceIcons.LABEL;
              labelTE.addChild("Label ID: " + entry._0().getLabelId());
              labelTE.addLazyChild("Input ", () -> {
                List<ExplorerElement> list = ListSequence.fromList(entry._0().getInput()).select((it) -> {
                  return new Object() {
                    public ExplorerElement groupCall(final IPFContext _PFcontext) {
                      return ((ExplorerElement) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new ParameterList(new Object[]{it})));
                    }
                  }.groupCall(new GroupPFContext(_PFcontext, "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_traceback.traceBack"));
                }).toList();
                return list;
              });
              ExplorerElement outputTE = new ExplorerElement();
              outputTE.text = "Output: " + new Object() {
                public String groupCall(final IPFContext _PFcontext) {
                  return ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{entry._1()})));
                }
              }.groupCall(new GroupPFContext(_PFcontext, "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shortToString"));
              outputTE.addChild(entry._1());
              labelTE.addChild(outputTE);
              mappingLabelsTE.addChild(labelTE);
            }
          }
        }

        ExplorerElement dependenciesTE = new ExplorerElement();
        teDetails.addChild(dependenciesTE);
        dependenciesTE.text = "Dependencies";
        Iterable<ScopeImport> imports = ((SubgraphStage) _PFparameters.get(0)).getDeclaredImports();
        if (Sequence.fromIterable(imports).isNotEmpty()) {
          for (ScopeImport imp : Sequence.fromIterable(imports)) {
            String flags = "";
            if (imp.isReexport()) {
              flags += "[reexport]";
            }
            if (imp.isIncludeTransitive()) {
              flags += "[transitive]";
            }
            dependenciesTE.addChild("Import: " + flags, imp.getScopeReference());
          }
        }

        ExplorerElement contentListTE = new ExplorerElement();
        teDetails.addChild(contentListTE);
        contentListTE.text = "Transformations";
        contentListTE.forceChildrenLazyLoading = true;
        contentListTE.addLazyChild(null, () -> {
          return Sequence.fromIterable(((SubgraphStage) _PFparameters.get(0)).getAllContent()).select(new _FunctionTypes._return_P1_E0<Tuples._2<IUniqueContainmentTarget, String>, IUniqueContainmentTarget>() {
            public Tuples._2<IUniqueContainmentTarget, String> invoke(IUniqueContainmentTarget it) {
              return MultiTuple.<IUniqueContainmentTarget,String>from(it, ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{it}))));
            }
          }).sort(new _FunctionTypes._return_P1_E0<String, Tuples._2<IUniqueContainmentTarget, String>>() {
            public String invoke(Tuples._2<IUniqueContainmentTarget, String> it) {
              return it._1();
            }
          }, true).select(new _FunctionTypes._return_P1_E0<IUniqueContainmentTarget, Tuples._2<IUniqueContainmentTarget, String>>() {
            public IUniqueContainmentTarget invoke(Tuples._2<IUniqueContainmentTarget, String> it) {
              return it._0();
            }
          }).select(new _FunctionTypes._return_P1_E0<ExplorerElement, IUniqueContainmentTarget>() {
            public ExplorerElement invoke(IUniqueContainmentTarget it) {
              return new Object() {
                public ExplorerElement groupCall(final IPFContext _PFcontext) {
                  return ((ExplorerElement) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new ParameterList(new Object[]{it})));
                }
              }.groupCall(new GroupPFContext(_PFcontext, "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_traceback.traceBack"));
            }
          });
        });

        return te;
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(ReferenceTargetInParentSubgraph.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext", "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/buildTrace_18";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof ReferenceTargetInParentSubgraph)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        ExplorerElement te = new ExplorerElement();
        te.text = "../";
        te.addChild(((ReferenceTargetInParentSubgraph) _PFparameters.get(0)).getRefTarget());
        return te;
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(ContainmentInSubgraphRefTarget.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext", "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/buildTrace_19";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof ContainmentInSubgraphRefTarget)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        ExplorerElement te = new ExplorerElement();
        te.text = ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{((ContainmentInSubgraphRefTarget) _PFparameters.get(0))})));
        te.addChild(((ContainmentInSubgraphRefTarget) _PFparameters.get(0)).getSubgraphCall());
        te.addChild(((ContainmentInSubgraphRefTarget) _PFparameters.get(0)).getContainmentTarget());
        return te;
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(RewriteCall.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext", "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/buildTrace_20";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof RewriteCall)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        ExplorerElement te = new ExplorerElement();
        te.text = ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{((RewriteCall) _PFparameters.get(0))})));
        te.addChild(((RewriteCall) _PFparameters.get(0)).getInput());
        return te;
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(ForkCall.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext", "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/buildTrace_21";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof ForkCall)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        ExplorerElement te = new ExplorerElement();
        te.text = new Object() {
          public String groupCall(final IPFContext _PFcontext) {
            return ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{((ForkCall) _PFparameters.get(0))})));
          }
        }.groupCall(new GroupPFContext(_PFcontext, "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shortToString"));
        te.addChild(((ForkCall) _PFparameters.get(0)).getParameters());
        return te;
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(ParameterList.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext", "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/buildTrace_22";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof ParameterList)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        ExplorerElement te = new ExplorerElement();
        te.transparent = true;
        for (int i = 0; i < ((ParameterList) _PFparameters.get(0)).size(); i++) {
          te.addChild(i + ": ", ((ParameterList) _PFparameters.get(0)).get(i));
        }
        return te;
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(DependencyTrackingNode.class));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/toString_11";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof DependencyTrackingNode)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{DependencyTrackingNode.unwrap(((DependencyTrackingNode) _PFparameters.get(0)))})));
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(INode.class));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/toString_13";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof INode)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{NodeToSNodeAdapter.wrap(((INode) _PFparameters.get(0)))})));
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(SNode.class));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/toString_15";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof SNode)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        final Wrappers._T<String> result = new Wrappers._T<String>(null);
        SNodeAPI.runRead(((SNode) _PFparameters.get(0)), () -> {
          try {
            result.value = ((SNode) _PFparameters.get(0)).getPresentation();
          } catch (Exception ex) {
            result.value = "Err: " + ex.getMessage();
          }
          try {
            result.value = "\"" + result.value + "\" [" + ((SNode) _PFparameters.get(0)).getConcept().getName() + "]";
          } catch (Exception ex) {
            result.value = "Err: " + ex.getMessage();
          }
        });
        return result.value;
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(MappingLabelCall.class));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/toString_17";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof MappingLabelCall)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return ((String) _PFcontext.callFunction("de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shorterName", new ParameterList(new Object[]{((MappingLabelCall) _PFparameters.get(0)).getLabelId()}))) + "(" + IterableUtils.join(ListSequence.fromList(((MappingLabelCall) _PFparameters.get(0)).getInput()).select((it) -> ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{it})))), ", ") + ")";
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(SReference.class));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/toString_19";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof SReference)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{((SReference) _PFparameters.get(0)).getLink()}))) + " -> " + ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{((SReference) _PFparameters.get(0)).getTargetNode()})));
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(SReferenceLink.class));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/toString_21";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof SReferenceLink)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return ((SReferenceLink) _PFparameters.get(0)).getOwner().getName() + "." + ((SReferenceLink) _PFparameters.get(0)).getName();
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(RewriteCall.class));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/toString_23";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof RewriteCall)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return "rewrite(" + ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{((RewriteCall) _PFparameters.get(0)).getInput()}))) + ")";
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shorterName", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(String.class));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/shorterName_27";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof String)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return ((String) _PFparameters.get(0));
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shorterName", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(String.class));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/shorterName_28";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof String)) {
          return false;
        }
        if (!(((String) _PFparameters.get(0)).contains(".transformations."))) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        String separator = ".transformations.";
        int index = ((String) _PFparameters.get(0)).indexOf(separator);
        if (index == -1) {
          return ((String) _PFparameters.get(0));
        }
        return ((String) _PFparameters.get(0)).substring(index + separator.length());
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addPriorityRule(new GroupPriorityRule(new SingleImplementationPriorityGroup("de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/shorterName_28"), new SingleImplementationPriorityGroup("de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/shorterName_27")));
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(String.class));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shortToString");
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/toString_0";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof String)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return ((String) _PFcontext.callFunction("de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shorterName", new ParameterList(new Object[]{((String) _PFparameters.get(0))})));
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(ISubgraphStage.class));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shortToString");
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/toString_1";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof ISubgraphStage)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{((ISubgraphStage) _PFparameters.get(0)).getStageReference()})));
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(SubstepStageReference.class));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shortToString");
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/toString_2";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof SubstepStageReference)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{((SubstepStageReference) _PFparameters.get(0)).getSubgraphRef()}))) + "@" + ((SubstepStageReference) _PFparameters.get(0)).getStepNumber() + "_" + ((SubstepStageReference) _PFparameters.get(0)).getSubstepNumber();
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(ILazyStageRef.class));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shortToString");
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/toString_3";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof ILazyStageRef)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{((ILazyStageRef) _PFparameters.get(0)).getSubgraphRef()})));
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(ChildSubgraphRef.class));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shortToString");
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/toString_4";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof ChildSubgraphRef)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{((ChildSubgraphRef) _PFparameters.get(0)).getCall()})));
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(IUniqueContainmentTarget.class));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shortToString");
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/toString_5";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof IUniqueContainmentTarget)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{((IUniqueContainmentTarget) _PFparameters.get(0)).getTarget()})));
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(ForkCall.class));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shortToString");
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/toString_6";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof ForkCall)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return ((String) _PFcontext.callFunction("de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shorterName", new ParameterList(new Object[]{((ForkCall) _PFparameters.get(0)).getId()}))) + "(" + ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{((ForkCall) _PFparameters.get(0)).getParameters()}))) + ")";
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(GoalCall.class));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shortToString");
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/toString_7";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof GoalCall)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return ((String) _PFcontext.callFunction("de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shorterName", new ParameterList(new Object[]{((GoalCall) _PFparameters.get(0)).getGoalId()}))) + "(" + ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{((GoalCall) _PFparameters.get(0)).getInput()}))) + ")";
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(ParameterList.class));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shortToString");
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/toString_8";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof ParameterList)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return IterableUtils.join(Sequence.fromIterable(((ParameterList) _PFparameters.get(0)).asSequence()).select((it) -> ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{it})))), ", ");
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(INode.class));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shortToString");
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/toString_9";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof INode)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        String name = ((INode) _PFparameters.get(0)).getPropertyValue("name");
        return ((name != null && name.length() > 0) ? name + " [" + ((INode) _PFparameters.get(0)).getConcept() + "]" : "[" + ((INode) _PFparameters.get(0)).getConcept() + "]");
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(TransformationCall.class));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shortToString");
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/toString_10";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof TransformationCall)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return ((String) _PFcontext.callFunction("de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shorterName", new ParameterList(new Object[]{((TransformationCall) _PFparameters.get(0)).getId()}))) + "(" + ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{((TransformationCall) _PFparameters.get(0)).getParameters()}))) + ")";
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(DependencyTrackingNode.class));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shortToString");
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/toString_11";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof DependencyTrackingNode)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{DependencyTrackingNode.unwrap(((DependencyTrackingNode) _PFparameters.get(0)))})));
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(ContainmentTargetRootNodes.class));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shortToString");
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/toString_12";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof ContainmentTargetRootNodes)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{((ContainmentTargetRootNodes) _PFparameters.get(0)).getContainmentTarget()})));
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(ResultElementOutputNodeReference_Id.class));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shortToString");
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/toString_13";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof ResultElementOutputNodeReference_Id)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{((ResultElementOutputNodeReference_Id) _PFparameters.get(0)).getResultRef()}))) + "#" + ((ResultElementOutputNodeReference_Id) _PFparameters.get(0)).getId();
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(NamedScope.class));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shortToString");
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/toString_14";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof NamedScope)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return ((String) _PFcontext.callFunction("de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shorterName", new ParameterList(new Object[]{((NamedScope) _PFparameters.get(0)).getName()}))) + "(" + ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{((NamedScope) _PFparameters.get(0)).getParameters()}))) + ")";
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(SubstepStageReference.class));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.explorer.pf.TraceBuilders_base.mainView");
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/toString_0";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof SubstepStageReference)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return "@" + ((SubstepStageReference) _PFparameters.get(0)).getStepNumber() + "_" + ((SubstepStageReference) _PFparameters.get(0)).getSubstepNumber();
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addPriorityRule(new GroupPriorityRule(new SingleImplementationPriorityGroup("de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/toString_0"), new SingleImplementationPriorityGroup("de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_ShadowModels/toString_2")));
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept Transformation$Gz = MetaAdapterFactory.getConcept(0x94b64715a2634c36L, 0xa1388da14705ffa7L, 0x65cd987c65c46e26L, "de.q60.mps.shadowmodels.transformation.structure.Transformation");
  }
}

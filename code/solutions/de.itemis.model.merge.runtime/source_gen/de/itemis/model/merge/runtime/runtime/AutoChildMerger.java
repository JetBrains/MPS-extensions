package de.itemis.model.merge.runtime.runtime;

/*Generated by MPS */

import org.jetbrains.mps.openapi.language.SContainmentLink;
import java.util.List;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.baseLanguage.closures.runtime._FunctionTypes;
import java.util.Collection;
import jetbrains.mps.internal.collections.runtime.CollectionSequence;
import java.util.Collections;

public class AutoChildMerger extends BuiltInChildMerger implements ConceptChildMerger {
  public AutoChildMerger(SContainmentLink link) {
    super(link);
  }
  @Override
  public List<SNode> merge(SNode left, SNode right, _FunctionTypes._return_P2_E0<? extends SNode, ? super SNode, ? super SNode> auto) {
    throw new UnsupportedOperationException("Auto Operation must be handled outside!");
  }


  @Override
  public List<SNode> merge(SNode leftParent, SNode rightParent, Collection<SNode> leftChildren, Collection<SNode> rightChildren, _FunctionTypes._return_P2_E0<? extends SNode, ? super SNode, ? super SNode> autoMergeOperation) {
    assert CollectionSequence.fromCollection(leftChildren).count() == 1;
    assert CollectionSequence.fromCollection(rightChildren).count() == 1;
    return Collections.singletonList(autoMergeOperation.invoke(CollectionSequence.fromCollection(leftChildren).iterator().next(), CollectionSequence.fromCollection(rightChildren).iterator().next()));
  }
}

package de.slisson.mps.tables.runtime.plugin;

/*Generated by MPS */

import jetbrains.mps.references.Reference;

public class TableDataParser {
  private TableDataSeparator mySeparator;
  public TableDataSeparator getSeparator() {
    return this.mySeparator;
  }
  private void _setSeparator(TableDataSeparator value) {
    this.mySeparator = value;
  }
  private TableDataSeparator setSeparator(TableDataSeparator value) {
    _setSeparator(value);
    return value;
  }
  private Reference<TableDataSeparator> refToSeparator() {
    return new Reference<TableDataSeparator>() {
      public TableDataSeparator get() {
        return getSeparator();
      }
      public void set(TableDataSeparator value) {
        _setSeparator(value);
      }
    };
  }

  public TableDataParser(TableDataSeparator separator) {
    this.setSeparator(separator);
  }

  public TableData<String> fromString(String rawString) {
    TableData<String> table = new TableData<String>();

    String[] lines = rawString.split(getSeparator().getLine());
    for (String line : lines) {
      table.addRow();
      String[] elements = line.split(getSeparator().getElement());
      for (String element : elements) {
        table.addData(((element == null ? null : element.trim())));
      }
    }

    return table;
  }
}

package com.dslfoundry.plaintextgen.intentions;

/*Generated by MPS */

import de.itemis.mps.selection.runtime.intentions.AbstractSelectionIntentionFactory;
import java.util.List;
import de.itemis.mps.selection.runtime.intentions.ISelectionIntentionExecutable;
import jetbrains.mps.nodeEditor.selection.NodeRangeSelection;
import de.itemis.mps.selection.runtime.intentions.AbstractSelectionIntentionExecutable;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import java.util.Collections;
import org.jetbrains.mps.openapi.language.SConcept;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SInterfaceConcept;
import org.jetbrains.mps.openapi.language.SContainmentLink;

public class SurroundListWithVertical extends AbstractSelectionIntentionFactory {
  public SurroundListWithVertical() {
  }

  @Override
  public List<ISelectionIntentionExecutable> getInstances(Object selection) {
    if (selection instanceof NodeRangeSelection) {
      ISelectionIntentionExecutable intention = new AbstractSelectionIntentionExecutable<NodeRangeSelection>() {
        @Override
        public void execute(NodeRangeSelection selection) {
          List<SNode> nodes = (List<SNode>) selection.getSelectedNodes();
          SNode ile = ListSequence.fromList(nodes).first();
          final SNode parent = SNodeOperations.replaceWithNewChild(ile, CONCEPTS.VerticalLines$qc);
          ListSequence.fromList(nodes).visitAll((it) -> ListSequence.fromList(SLinkOperations.getChildren(parent, LINKS.lines$u7C)).addElement(it));
        }
        @Override
        public String getDescription(NodeRangeSelection selection) {
          return "Surround with Vertical Collection";
        }
        @Override
        public boolean isApplicable(NodeRangeSelection selection) {
          return selection.getFirstNode().isInstanceOfConcept(CONCEPTS.IText$2X);
        }
      };
      return Collections.singletonList(intention);
    } else {
      return Collections.<ISelectionIntentionExecutable>emptyList();
    }
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept VerticalLines$qc = MetaAdapterFactory.getConcept(0x990507d335274c54L, 0xbfe90ca3c9c6247aL, 0xfe48d5fcaff41e5L, "com.dslfoundry.plaintextgen.structure.VerticalLines");
    /*package*/ static final SInterfaceConcept IText$2X = MetaAdapterFactory.getInterfaceConcept(0x990507d335274c54L, 0xbfe90ca3c9c6247aL, 0xfe48d5fcafd47eaL, "com.dslfoundry.plaintextgen.structure.IText");
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink lines$u7C = MetaAdapterFactory.getContainmentLink(0x990507d335274c54L, 0xbfe90ca3c9c6247aL, 0x64208511ac2f6788L, 0x64208511ac2f6798L, "lines");
  }
}

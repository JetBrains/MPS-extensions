package de.itemis.mps.selection.runtime.mouse;

/*Generated by MPS */

import jetbrains.mps.openapi.editor.cells.EditorCell;
import org.jetbrains.mps.util.Condition;
import java.util.Set;
import jetbrains.mps.internal.collections.runtime.SetSequence;
import java.util.HashSet;
import jetbrains.mps.openapi.editor.selection.Selection;
import jetbrains.mps.openapi.editor.EditorComponent;

public abstract class AbstractDragSelectionHandler implements IDragSelectionHandler {

  protected EditorCell findCommonParent(EditorCell cell1, EditorCell cell2) {
    return findCommonParent(cell1, cell2, Condition.TRUE_CONDITION);
  }

  protected EditorCell findCommonParent(EditorCell cell1, EditorCell cell2, Condition<EditorCell> condition) {
    Set<EditorCell> parents1 = SetSequence.fromSet(new HashSet<EditorCell>());
    for (EditorCell parent1 = cell1; parent1 != null; parent1 = parent1.getParent()) {
      SetSequence.fromSet(parents1).addElement(parent1);
    }
    for (EditorCell parent2 = cell2; parent2 != null; parent2 = parent2.getParent()) {
      if (SetSequence.fromSet(parents1).contains(parent2)) {
        if (condition.met(parent2)) {
          return parent2;
        }
      }
    }
    return null;
  }

  public Selection createAlternativeSelection(EditorCell fromCell, EditorCell toCell, int fromX, int fromY, int toX, int toY, EditorComponent editorComponent) {
    return null;
  }

  public int getPriority() {
    return 0;
  }
}

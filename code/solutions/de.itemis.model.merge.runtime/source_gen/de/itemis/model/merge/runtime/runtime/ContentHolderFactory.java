package de.itemis.model.merge.runtime.runtime;

/*Generated by MPS */

import org.jetbrains.mps.openapi.model.SNode;
import org.jetbrains.mps.openapi.language.SAbstractConcept;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import com.google.common.collect.Sets;
import jetbrains.mps.lang.core.behavior.BaseConcept__BehaviorDescriptor;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SConcept;
import org.jetbrains.mps.openapi.language.SInterfaceConcept;

public interface ContentHolderFactory {

  ContentHolder<ConceptChildMerger> childMerger(SNode itemPolicy, SAbstractConcept inheritedFrom);
  ContentHolder<PropertyMerger> propertyMerger(SNode itemPolicy, SAbstractConcept inheritedFrom);
  ContentHolder<ConceptRefMerger> refMerger(SNode itemPolicy, SAbstractConcept inheritedFrom);
  Identity idOf(SNode idFunction, SAbstractConcept n);

  class Impl implements ContentHolderFactory {
    @Override
    public ContentHolder<ConceptChildMerger> childMerger(SNode itemPolicy, SAbstractConcept inheritedFrom) {
      return ContentHolderFactory.<ConceptChildMerger>makeContentHolder(null, itemPolicy, inheritedFrom);
    }
    @Override
    public Identity idOf(SNode idFunction, SAbstractConcept n) {
      if ((idFunction != null)) {
        return new Identity() {
          @Override
          public String get(SNode node) {
            return "Not Yet defined";
          }
        };
      }
      return null;
    }
    @Override
    public ContentHolder<PropertyMerger> propertyMerger(SNode itemPolicy, SAbstractConcept inheritedFrom) {
      return new SimpleActionContentHolder<PropertyMerger>(null, SLinkOperations.getTarget(itemPolicy, LINKS.action$i__H), inheritedFrom);
    }
    @Override
    public ContentHolder<ConceptRefMerger> refMerger(SNode itemPolicy, SAbstractConcept inheritedFrom) {
      return ContentHolderFactory.<ConceptRefMerger>makeContentHolder(null, itemPolicy, inheritedFrom);
    }
  }
  /*package*/ static <C> ContentHolder<C> makeContentHolder(C content, SNode ip, SAbstractConcept inheritedFrom) {
    {
      final SNode mcp = ip;
      if (SNodeOperations.isInstanceOf(mcp, CONCEPTS.MultiChildPolicy$zA)) {
        return new SubPolicyContainerContentHolder<C>(content, Sets.newHashSet(SLinkOperations.getChildren(mcp, LINKS.subPolicy$$EhP)), inheritedFrom);
      }
    }
    {
      final SNode op = ip;
      if (SNodeOperations.isInstanceOf(op, CONCEPTS.OptionalPolicy$hY)) {
        return new SimpleActionContentHolder<C>(content, SLinkOperations.getTarget(op, LINKS.action$dRHb), inheritedFrom);
      }
    }
    {
      final SNode sp = ip;
      if (SNodeOperations.isInstanceOf(sp, CONCEPTS.SingletonPolicy$5$)) {
        return new SimpleActionContentHolder<C>(content, SLinkOperations.getTarget(sp, LINKS.action$brwL), inheritedFrom);
      }
    }
    {
      final SNode childPolicy = ip;
      if (SNodeOperations.isInstanceOf(childPolicy, CONCEPTS.ChildPolicy$6g)) {
        return null;
      }
    }
    throw new IllegalArgumentException("ItemPolicy unknown:" + BaseConcept__BehaviorDescriptor.getPresentation_idhEwIMiw.invoke(ip));
  }

  final class LINKS {
    /*package*/ static final SContainmentLink action$i__H = MetaAdapterFactory.getContainmentLink(0x539e893908ef497cL, 0xa5fd25dd10137a55L, 0x1a8b8d3e42e44628L, 0x1a8b8d3e42e44bcdL, "action");
    /*package*/ static final SContainmentLink subPolicy$$EhP = MetaAdapterFactory.getContainmentLink(0x539e893908ef497cL, 0xa5fd25dd10137a55L, 0x74e2e0579b2f965fL, 0x74e2e0579b2f9660L, "subPolicy");
    /*package*/ static final SContainmentLink action$dRHb = MetaAdapterFactory.getContainmentLink(0x539e893908ef497cL, 0xa5fd25dd10137a55L, 0x74e2e0579b2eb40bL, 0x74e2e0579b2eb5e6L, "action");
    /*package*/ static final SContainmentLink action$brwL = MetaAdapterFactory.getContainmentLink(0x539e893908ef497cL, 0xa5fd25dd10137a55L, 0x74e2e0579b2f964bL, 0x74e2e0579b2eb5e6L, "action");
  }

  final class CONCEPTS {
    /*package*/ static final SConcept MultiChildPolicy$zA = MetaAdapterFactory.getConcept(0x539e893908ef497cL, 0xa5fd25dd10137a55L, 0x74e2e0579b2f965fL, "de.itemis.model.merge.structure.MultiChildPolicy");
    /*package*/ static final SConcept OptionalPolicy$hY = MetaAdapterFactory.getConcept(0x539e893908ef497cL, 0xa5fd25dd10137a55L, 0x74e2e0579b2eb40bL, "de.itemis.model.merge.structure.OptionalPolicy");
    /*package*/ static final SConcept SingletonPolicy$5$ = MetaAdapterFactory.getConcept(0x539e893908ef497cL, 0xa5fd25dd10137a55L, 0x74e2e0579b2f964bL, "de.itemis.model.merge.structure.SingletonPolicy");
    /*package*/ static final SInterfaceConcept ChildPolicy$6g = MetaAdapterFactory.getInterfaceConcept(0x539e893908ef497cL, 0xa5fd25dd10137a55L, 0x3d71e5f153dd81bdL, "de.itemis.model.merge.structure.ChildPolicy");
  }
}

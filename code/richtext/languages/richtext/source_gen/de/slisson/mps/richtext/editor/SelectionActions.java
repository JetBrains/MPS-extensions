package de.slisson.mps.richtext.editor;

/*Generated by MPS */

import org.jetbrains.mps.util.Condition;
import jetbrains.mps.openapi.editor.cells.EditorCell;
import de.slisson.mps.editor.multiline.cells.EditorCell_Word;
import jetbrains.mps.openapi.editor.EditorContext;
import de.slisson.mps.richtext.runtime.selection.RichtextSelection;

public class SelectionActions {
  public static Condition<EditorCell> trueCondition = new Condition<EditorCell>() {
    public boolean met(EditorCell cell) {
      return true;
    }
  };

  public static Condition<EditorCell> isWordCell = new Condition<EditorCell>() {
    public boolean met(EditorCell cell) {
      return cell instanceof EditorCell_Word;
    }
  };


  public static class SelectionHomeAction extends TextCellModifier.RichtextAction {

    public SelectionHomeAction(EditorCell cell) {
      super(cell);
    }

    @Override
    public String getDescriptionText() {
      return "Select to Start of Line";
    }

    @Override
    public boolean canExecute(EditorContext context) {
      return true;
    }

    @Override
    public void execute(EditorContext context) {
      EditorCell_Word homeCell = as_n5wk54_a0a0a7f(TextCellModifier.getHomeCell(this.myCell, isWordCell), EditorCell_Word.class);
      homeCell.ensureCaretVisible();
      RichtextSelection selection;
      if (homeCell == this.myCell) {
        selection = RichtextSelection.create(homeCell, 0, homeCell, homeCell.getCaretPosition());
      } else {
        homeCell.setCaretPosition(0);
        selection = RichtextSelection.create(this.myCell, homeCell);
      }
      selection.selectLeftRight(false);
      context.getSelectionManager().pushSelection(selection);
    }
    private static <T> T as_n5wk54_a0a0a7f(Object o, Class<T> type) {
      return (type.isInstance(o) ? (T) o : null);
    }
  }

  public static class SelectionEndAction extends TextCellModifier.RichtextAction {

    public SelectionEndAction(EditorCell cell) {
      super(cell);
    }

    @Override
    public String getDescriptionText() {
      return "Select to End of Line";
    }

    @Override
    public boolean canExecute(EditorContext context) {
      return true;
    }

    @Override
    public void execute(EditorContext context) {
      EditorCell_Word endCell = as_n5wk54_a0a0a7h(TextCellModifier.getEndCell(this.myCell, isWordCell), EditorCell_Word.class);
      RichtextSelection selection;
      if (endCell == this.myCell) {
        selection = RichtextSelection.create(endCell, endCell.getCaretPosition(), endCell, endCell.getText().length());
      } else {
        endCell.setCaretPosition(endCell.getText().length());
        selection = RichtextSelection.create(this.myCell, endCell);
      }
      selection.selectLeftRight(false);
      context.getSelectionManager().pushSelection(selection);
    }

    private static <T> T as_n5wk54_a0a0a7h(Object o, Class<T> type) {
      return (type.isInstance(o) ? (T) o : null);
    }
  }

}

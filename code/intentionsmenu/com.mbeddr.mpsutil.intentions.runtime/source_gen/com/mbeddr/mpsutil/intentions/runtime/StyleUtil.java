package com.mbeddr.mpsutil.intentions.runtime;

/*Generated by MPS */

import jetbrains.mps.openapi.editor.style.StyleAttribute;
import jetbrains.mps.editor.runtime.style.StyleAttributes;
import jetbrains.mps.openapi.editor.EditorComponent;
import jetbrains.mps.openapi.editor.selection.Selection;
import jetbrains.mps.openapi.editor.cells.EditorCell;
import org.jetbrains.annotations.NotNull;

public class StyleUtil {
  public static final StyleAttribute<Boolean> INTENTIONS_IN_READONLY_CELL = StyleAttributes.getInstance().<Boolean>getAttribute("com.mbeddr.mpsutil.intentions", "intentions-in-read-only-cell");


  public static boolean allowIntentionsInReadOnlySelection(EditorComponent editorComponent) {
    Selection selection = editorComponent.getSelectionManager().getSelection();
    return selection == null || allowIntentionsInReadOnlyCells(editorComponent, selection.getSelectedCells());
  }

  public static boolean allowIntentionsInReadOnlyCells(EditorComponent editorComponent, Iterable<EditorCell> cells) {
    for (EditorCell cell : cells) {
      if (cell == null || isAllowIntentionsInReadOnlyCell(cell)) {
        return true;
      }
    }
    return false;
  }

  public static boolean isAllowIntentionsInReadOnlyCell(@NotNull EditorCell cell) {
    return cell.getStyle().get(INTENTIONS_IN_READONLY_CELL);
  }
}

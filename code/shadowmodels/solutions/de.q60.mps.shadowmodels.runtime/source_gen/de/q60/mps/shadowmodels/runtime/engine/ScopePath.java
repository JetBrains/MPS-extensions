package de.q60.mps.shadowmodels.runtime.engine;

/*Generated by MPS */

import jetbrains.mps.internal.collections.runtime.Sequence;
import org.jetbrains.annotations.Nullable;
import java.util.Objects;

public class ScopePath {

  public static ScopePath fromSequence(Iterable<IScope> path) {
    return (Sequence.fromIterable(path).isEmpty() ? null : new ScopePath(Sequence.fromIterable(path).first(), fromSequence(Sequence.fromIterable(path).skip(1))));
  }

  private IScope head;
  @Nullable
  private ScopePath tail;

  public ScopePath(IScope head) {
    this(head, null);
  }

  public ScopePath(IScope head, ScopePath tail) {
    this.head = head;
    this.tail = tail;
  }

  public Iterable<IScope> asSequence() {
    Iterable<IScope> seq = Sequence.<IScope>singleton(head);
    if (tail != null) {
      seq = Sequence.fromIterable(seq).concat(Sequence.fromIterable(tail.asSequence()));
    }
    return seq;
  }

  public boolean endsWithOrEqual(ScopePath subPath) {
    if (subPath == null) {
      return true;
    }
    return equals(subPath) || tail != null && tail.endsWithOrEqual(subPath);
  }

  public boolean startsWithOrEqual(ScopePath subPath) {
    if (subPath == null) {
      return true;
    }
    if (Objects.equals(head, subPath.head)) {
      if (tail == null) {
        return subPath.tail == null;
      } else {
        return tail.startsWithOrEqual(subPath.tail);
      }
    } else {
      return false;
    }
  }

  @Override
  public boolean equals(Object o) {
    if (this == o) {
      return true;
    }
    if (o == null || this.getClass() != o.getClass()) {
      return false;
    }

    ScopePath that = (ScopePath) o;
    if ((head != null ? !(head.equals(that.head)) : that.head != null)) {
      return false;
    }
    if ((tail != null ? !(tail.equals(that.tail)) : that.tail != null)) {
      return false;
    }

    return true;
  }

  @Override
  public int hashCode() {
    int result = 0;
    result = 31 * result + ((head != null ? ((Object) head).hashCode() : 0));
    result = 31 * result + ((tail != null ? ((Object) tail).hashCode() : 0));
    return result;
  }
}

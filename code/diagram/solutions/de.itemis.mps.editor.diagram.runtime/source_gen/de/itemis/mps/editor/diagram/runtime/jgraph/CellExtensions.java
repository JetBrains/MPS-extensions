package de.itemis.mps.editor.diagram.runtime.jgraph;

/*Generated by MPS */

import com.mxgraph.model.mxICell;
import de.itemis.mps.editor.diagram.runtime.model.Bounds;
import com.mxgraph.model.mxGeometry;
import org.apache.commons.math3.geometry.euclidean.twod.Vector2D;
import java.util.List;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import java.util.ArrayList;

public class CellExtensions {
  public CellExtensions() {
  }
  public static MyGraph getGraph(final mxICell _this) {
    return ((BaseDCell) _this)._getGraph();
  }
  public static Bounds getBounds(final mxICell _this) {
    mxGeometry geo = _this.getGeometry();
    if (geo != null) {
      return new Bounds(geo.getX(), geo.getY(), geo.getWidth(), geo.getHeight());
    }
    return new Bounds();
  }
  public static Bounds getAbsoluteBounds(final mxICell _this) {
    if (_this == null) {
      return new Bounds();
    }
    Bounds parentBounds = CellExtensions.getAbsoluteBounds(_this.getParent());
    Bounds bounds = CellExtensions.getBounds(_this);
    if (CellExtensions.isRelativePosition(_this)) {
      bounds.setX(parentBounds.getX() + parentBounds.getWidth() * bounds.getX());
      bounds.setY(parentBounds.getY() + parentBounds.getHeight() * bounds.getY());
    } else {
      bounds.move(parentBounds.getX(), parentBounds.getY());
    }

    return bounds;
  }
  public static void setAbsoluteBounds(final mxICell _this, Bounds absoluteBounds) {
    Bounds parentBounds = CellExtensions.getAbsoluteBounds(_this.getParent());
    Bounds bounds = absoluteBounds.clone();
    if (CellExtensions.isRelativePosition(_this)) {
      bounds.setX((absoluteBounds.getX() - parentBounds.getX()) / parentBounds.getWidth());
      bounds.setY((absoluteBounds.getY() - parentBounds.getY()) / parentBounds.getHeight());
    } else {
      bounds.move(-parentBounds.getX(), -parentBounds.getY());
    }
    CellExtensions.setBounds(_this, bounds);
  }
  public static boolean isRelativePosition(final mxICell _this) {
    return check_b97zq3_a0a4(_this.getGeometry());
  }
  public static void setBounds(final mxICell _this, double x, double y, double width, double height) {
    mxGeometry existing = _this.getGeometry();
    mxGeometry newGeometry = (existing == null ? new mxGeometry() : (mxGeometry) existing.clone());
    newGeometry.setX(x);
    newGeometry.setY(y);
    newGeometry.setWidth(width);
    newGeometry.setHeight(height);
    CellExtensions.getGraph(_this).getModel().setGeometry(_this, newGeometry);
  }
  public static void setBounds(final mxICell _this, Bounds bounds) {
    CellExtensions.setBounds(_this, bounds.getX(), bounds.getY(), bounds.getWidth(), bounds.getHeight());
  }
  public static void setPosition(final mxICell _this, double x, double y) {
    mxGeometry g = _this.getGeometry();
    CellExtensions.setBounds(_this, x, y, g.getWidth(), g.getHeight());
  }
  public static void setPosition(final mxICell _this, Vector2D newPos) {
    mxGeometry g = _this.getGeometry();
    CellExtensions.setBounds(_this, newPos.getX(), newPos.getY(), g.getWidth(), g.getHeight());
  }
  public static Vector2D getPosition(final mxICell _this) {
    mxGeometry g = _this.getGeometry();
    return new Vector2D(g.getX(), g.getY());
  }
  public static Vector2D getSize(final mxICell _this) {
    mxGeometry g = _this.getGeometry();
    return new Vector2D(g.getWidth(), g.getHeight());
  }
  public static void move(final mxICell _this, Vector2D delta) {
    CellExtensions.setPosition(_this, CellExtensions.getPosition(_this).add(delta));
  }
  public static void setSize(final mxICell _this, double width, double height) {
    mxGeometry g = _this.getGeometry();
    CellExtensions.setBounds(_this, g.getX(), g.getY(), width, height);
  }
  public static void setSize(final mxICell _this, Vector2D size) {
    CellExtensions.setSize(_this, size.getX(), size.getY());
  }
  public static List<mxICell> getChildren(final mxICell _this) {
    List<mxICell> children = ListSequence.fromList(new ArrayList<mxICell>());
    for (int i = 0; i < _this.getChildCount(); i++) {
      ListSequence.fromList(children).addElement(_this.getChildAt(i));
    }
    return children;
  }
  private static boolean check_b97zq3_a0a4(mxGeometry checkedDotOperand) {
    if (null != checkedDotOperand) {
      return checkedDotOperand.isRelative();
    }
    return false;
  }
}

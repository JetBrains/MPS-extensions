package de.slisson.mps.tables.runtime.gridmodel;

/*Generated by MPS */

import org.jetbrains.mps.openapi.model.SNode;
import java.util.UUID;
import org.jetbrains.annotations.NotNull;

public class StringHeaderReference extends HeaderReference {
  public static StringHeaderReference fromSNode(SNode node) {
    StringHeaderReference ref = new StringHeaderReference(node.getNodeId().toString());
    ref.myFallbackText = node.toString();
    return ref;
  }

  public static StringHeaderReference fromObject(Object obj) {
    if (obj == null) {
      return new StringHeaderReference("<null>");
    } else if (obj instanceof SNode) {
      return fromSNode(((SNode) obj));
    } else if (obj instanceof String) {
      return new StringHeaderReference(((String) obj));
    } else {
      return new StringHeaderReference(obj.getClass().getSimpleName() + "@" + System.identityHashCode(obj));
    }
  }

  public static StringHeaderReference createUnique() {
    return new StringHeaderReference(UUID.randomUUID().toString());
  }

  private String myValue;
  private String myFallbackText;

  public StringHeaderReference(@NotNull String value) {
    myValue = value;
  }

  @Override
  public boolean equals(Object other) {
    if (!(other instanceof StringHeaderReference)) {
      return false;
    }
    return myValue.equals(((StringHeaderReference) other).myValue);
  }

  @Override
  public int hashCode() {
    return myValue.hashCode();
  }

  @Override
  public String toString() {
    return getClass().getSimpleName() + "[" + myValue + "]";
  }

  @Override
  public StringHeaderReference clone() {
    StringHeaderReference clone = (StringHeaderReference) super.clone();
    return clone;
  }

  public String getFallbackText() {
    return (myFallbackText == null ? myValue : myFallbackText);
  }

  @Override
  public String getValue() {
    return myValue;
  }
}

package de.itemis.mps.editor.htmlcell.runtime.runtime;

/*Generated by MPS */

import jetbrains.mps.nodeEditor.cells.EditorCell_Component;
import de.itemis.mps.editor.celllayout.runtime.ISupportsTopDownLayout;
import jetbrains.mps.openapi.editor.style.StyleAttribute;
import jetbrains.mps.editor.runtime.style.StyleAttributes;
import jetbrains.mps.openapi.editor.EditorContext;
import org.jetbrains.mps.openapi.model.SNode;
import de.itemis.mps.editor.celllayout.runtime.IEditorCellBasedLayoutable;
import de.itemis.mps.editor.celllayout.runtime.LayoutableAdapter;
import org.jetbrains.annotations.NotNull;
import de.itemis.mps.editor.celllayout.boxmodel.Size;
import java.awt.Dimension;

public class EditorCell_HTML extends EditorCell_Component implements ISupportsTopDownLayout {
  private static final StyleAttribute<Boolean> GROW_X = StyleAttributes.getInstance().<Boolean>getAttribute("de.itemis.mps.editor.celllayout.styles", "_grow-x");
  private static final StyleAttribute<Boolean> PUSH_X = StyleAttributes.getInstance().<Boolean>getAttribute("de.itemis.mps.editor.celllayout.styles", "_push-x");

  public EditorCell_HTML(EditorContext editorContext, SNode node, String content) {
    super(editorContext, node, new HTMLCellEditorPane(content));
    getStyle().set(PUSH_X, true);
    getStyle().set(GROW_X, true);
  }

  @Override
  public void relayoutImpl() {
    setWidth(1);
    setHeight(getComponent().getPreferredSize().height);
  }

  @Override
  public void layoutComponent() {
    getComponent().setSize(getWidth(), getComponent().getPreferredSize().height);
    requestRelayout();
  }

  @Override
  public IEditorCellBasedLayoutable getTopDownLayoutable() {
    return new LayoutableAdapter(this) {
      @NotNull
      @Override
      public Size getMaxSize(@NotNull Size sizeConstraint) {
        Dimension size = getComponent().getMaximumSize();
        return new Size(size.width, size.height);
      }
      @NotNull
      @Override
      public Size getMinSize(@NotNull Size sizeConstraint) {
        Dimension size = getComponent().getMinimumSize();
        return new Size(size.width, size.height);
      }
      @NotNull
      @Override
      public Size getPreferredSize(@NotNull Size sizeConstraint) {
        Dimension size = getComponent().getPreferredSize();
        return new Size(size.width, size.height);
      }
    };
  }
}

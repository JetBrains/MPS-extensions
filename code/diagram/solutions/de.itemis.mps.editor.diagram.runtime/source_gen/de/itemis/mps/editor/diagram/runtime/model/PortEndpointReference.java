package de.itemis.mps.editor.diagram.runtime.model;

/*Generated by MPS */

import java.util.List;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import java.util.Objects;

public class PortEndpointReference implements IConnectionEndpointReference {

  private IConnectionEndpointReference myBoxReference;
  private String myPortName;

  public PortEndpointReference(IConnectionEndpointReference boxReference, String portName) {
    myBoxReference = boxReference;
    myPortName = portName;
  }

  @Override
  public IConnectionEndpoint_Internal resolve(DiagramModel model, boolean isConnectionEnd) {
    Box box = (Box) model.resolveEndpointLocal(myBoxReference, isConnectionEnd);
    if (box == null) {
      return null;
    }
    List<Port> ports = box.getPorts();
    for (Port port : ListSequence.fromList(ports)) {
      if (Objects.equals(port.getName(), myPortName)) {
        return port;
      }
    }
    return null;
  }

  @Override
  public boolean equals(Object o) {
    if (this == o) {
      return true;
    }
    if (o == null || this.getClass() != o.getClass()) {
      return false;
    }

    PortEndpointReference that = (PortEndpointReference) o;
    if ((myBoxReference != null ? !(myBoxReference.equals(that.myBoxReference)) : that.myBoxReference != null)) {
      return false;
    }
    if ((myPortName != null ? !(((Object) myPortName).equals(that.myPortName)) : that.myPortName != null)) {
      return false;
    }

    return true;
  }

  @Override
  public int hashCode() {
    int result = 0;
    result = 31 * result + ((myBoxReference != null ? ((Object) myBoxReference).hashCode() : 0));
    result = 31 * result + ((myPortName != null ? String.valueOf(myPortName).hashCode() : 0));
    return result;
  }

  @Override
  public String toString() {
    return myBoxReference + "." + myPortName;
  }
}

package com.mbeddr.mpsutil.treenotation.runtime;

/*Generated by MPS */

import jetbrains.mps.nodeEditor.cellLayout.AbstractCellLayout;
import jetbrains.mps.openapi.editor.cells.EditorCell_Collection;
import jetbrains.mps.openapi.editor.TextBuilder;
import jetbrains.mps.openapi.editor.cells.EditorCell;
import jetbrains.mps.editor.runtime.TextBuilderImpl;
import jetbrains.mps.nodeEditor.cellLayout.PunctuationUtil;

public class TreeCellLayout extends AbstractCellLayout {

  @Override
  public void doLayout(EditorCell_Collection collection) {
    TreeCell tree = ((TreeCell) collection);
    if (tree.isTreeCollapsed()) {
      tree.getTreeLayouter().layoutCollapsed();
      return;
    }

    collection.setWidth(0);
    collection.setHeight(0);

    tree.getTreeLayouter().layout();
  }

  @Override
  public TextBuilder doLayoutText(Iterable<EditorCell> editorCells) {
    TextBuilder result = new TextBuilderImpl();
    for (EditorCell editorCell : editorCells) {
      result = result.appendToTheRight(editorCell.renderText(), PunctuationUtil.hasLeftGap(editorCell));
    }
    return result;
  }

  @Override
  public boolean canBeFolded() {
    return true;
  }

  @Override
  public String toString() {
    return "Tree";
  }
}

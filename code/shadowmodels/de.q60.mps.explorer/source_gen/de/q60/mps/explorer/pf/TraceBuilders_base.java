package de.q60.mps.explorer.pf;

/*Generated by MPS */

import de.q60.mps.polymorphicfunctions.runtime.PFModule;
import jetbrains.mps.logging.Logger;
import jetbrains.mps.baseLanguage.closures.runtime._FunctionTypes;
import de.q60.mps.polymorphicfunctions.runtime.IFunctionImplementation;
import java.util.List;
import de.q60.mps.polymorphicfunctions.runtime.IParameterType;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import java.util.ArrayList;
import de.q60.mps.polymorphicfunctions.runtime.ParameterType_Classifier;
import javax.swing.tree.MutableTreeNode;
import de.q60.mps.polymorphicfunctions.runtime.IPFContext;
import de.q60.mps.polymorphicfunctions.runtime.ParameterList;
import jetbrains.mps.internal.collections.runtime.Sequence;
import de.q60.mps.explorer.TNode;
import javax.swing.tree.DefaultTreeModel;
import de.q60.mps.polymorphicfunctions.runtime.ParameterType_Null;

public class TraceBuilders_base extends PFModule {
  private static final Logger LOG = Logger.getLogger(TraceBuilders_base.class);
  public static final TraceBuilders_base INSTANCE = ((_FunctionTypes._return_P0_E0<TraceBuilders_base>) () -> {
    try {
      return new TraceBuilders_base();
    } catch (RuntimeException ex) {
      if (LOG.isErrorLevel()) {
        LOG.error("Failed to load " + TraceBuilders_base.class.getName(), ex);
      }
      throw ex;
    }
  }).invoke();
  private TraceBuilders_base() {
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.buildTree", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(Object.class), new ParameterType_Classifier(MutableTreeNode.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.explorer.pf/TraceBuilders_base/buildTree_7";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof Object)) {
          return false;
        }
        if (!(_PFparameters.get(1) == null || _PFparameters.get(1) instanceof MutableTreeNode)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        ExplorerElement traceElement_;
        try {
          traceElement_ = ((ExplorerElement) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new ParameterList(new Object[]{((Object) _PFparameters.get(0))})));
        } catch (Exception ex) {
          if (LOG.isErrorLevel()) {
            LOG.error("", ex);
          }
          traceElement_ = new ExplorerElement();
          traceElement_.text = ex.getMessage();
        }
        final ExplorerElement traceElement = traceElement_;
        if (traceElement.owner == null) {
          traceElement.owner = ((Object) _PFparameters.get(0));
        }
        if (traceElement.transparent) {
          MutableTreeNode result = null;
          for (Object child : Sequence.fromIterable(((Iterable<? extends Iterable<Object>>) ((Object) _PFcontext.callFunctions("de.q60.mps.explorer.pf.TraceBuilders_base.getChildren", new ParameterList(new Object[]{traceElement}))))).translate((it) -> it)) {
            MutableTreeNode childTNode = ((MutableTreeNode) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.buildTree", new ParameterList(new Object[]{child, ((MutableTreeNode) _PFparameters.get(1))})));
            if (result == null) {
              result = childTNode;
            }
          }
          return result;
        } else {
          TNode treeNode = new TNode(traceElement) {
            @Override
            protected void initialize(DefaultTreeModel model) {
              for (Object child : Sequence.fromIterable(((Iterable<? extends Iterable<Object>>) ((Object) _PFcontext.callFunctions("de.q60.mps.explorer.pf.TraceBuilders_base.getChildren", new ParameterList(new Object[]{traceElement}))))).translate((it) -> it)) {
                MutableTreeNode childTNode = ((MutableTreeNode) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.buildTree", new ParameterList(new Object[]{child, this})));
              }
            }
          };
          treeNode.setIcon(traceElement.icon);
          treeNode.setNavigationTarget(traceElement.navigationTarget);
          treeNode.expandByDefault(traceElement.expandByDefault);
          treeNode.forceChildrenLazyLoading(traceElement.forceChildrenLazyLoading);
          treeNode.setDetailViewRoot(traceElement.detailViewRoot);
          ((IExplorerContext) _PFcontext.getContextParameters("de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup").get(0)).getTreeModel().insertNodeInto(treeNode, ((MutableTreeNode) _PFparameters.get(1)), ((MutableTreeNode) _PFparameters.get(1)).getChildCount());

          ((IExplorerContext) _PFcontext.getContextParameters("de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup").get(0)).getTreeModel().insertNodeInto(new TNode("Loading ..."), treeNode, treeNode.getChildCount());


          return treeNode;
        }
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(ExplorerElement.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.explorer.pf/TraceBuilders_base/buildTrace_9";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof ExplorerElement)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return ((ExplorerElement) _PFparameters.get(0));
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.getChildren", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(ExplorerElement.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.explorer.pf/TraceBuilders_base/getChildren_11";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof ExplorerElement)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return ((ExplorerElement) _PFparameters.get(0)).children;
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(ExplorerElement.Child.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.explorer.pf/TraceBuilders_base/buildTrace_13";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof ExplorerElement.Child)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        ExplorerElement result = (((ExplorerElement.Child) _PFparameters.get(0)).context == null ? ((ExplorerElement) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new ParameterList(new Object[]{((ExplorerElement.Child) _PFparameters.get(0)).child}))) : ((ExplorerElement) (((ExplorerElement.Child) _PFparameters.get(0)).context).callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new ParameterList(new Object[]{((ExplorerElement.Child) _PFparameters.get(0)).child}))));
        if (result.owner == null) {
          result.owner = ((ExplorerElement.Child) _PFparameters.get(0)).child;
        }
        if (isNotEmptyString(((ExplorerElement.Child) _PFparameters.get(0)).prefix)) {
          result.text = ((ExplorerElement.Child) _PFparameters.get(0)).prefix + result.text;
        }
        return result;
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Null());
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.explorer.pf/TraceBuilders_base/toString_16";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (_PFparameters.get(0) != null) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return "null";
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(Object.class));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.explorer.pf/TraceBuilders_base/toString_17";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof Object)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return "" + ((Object) _PFparameters.get(0)) + " [" + ((Object) _PFparameters.get(0)).getClass().getSimpleName() + "]";
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
  }
  private static boolean isNotEmptyString(String str) {
    return str != null && str.length() > 0;
  }
}

package de.slisson.mps.tables.runtime.simplegrid;

/*Generated by MPS */

import org.jetbrains.mps.annotations.Immutable;

@Immutable
public class GridPosition {

  private int myX;
  private int myY;

  public GridPosition(int x, int y) {
    myX = x;
    myY = y;
  }

  public GridPosition deriveY(int y) {
    return new GridPosition(myX, y);
  }

  public GridPosition deriveX(int x) {
    return new GridPosition(x, myY);
  }

  public GridPosition next(SimpleGrid grid) {
    int x = myX;
    int y = myY;
    x++;
    if (x >= grid.getSizeX()) {
      x = 0;
      y++;
    }
    if (y >= grid.getSizeY()) {
      return null;
    }
    return new GridPosition(x, y);
  }

  public GridPosition previous(SimpleGrid grid) {
    int x = myX;
    int y = myY;
    x--;
    if (x < 0) {
      x = grid.getSizeX() - 1;
      y--;
    }
    if (y < 0) {
      return null;
    }
    return new GridPosition(x, y);
  }

  public int getX() {
    return myX;
  }

  public int getY() {
    return myY;
  }

  public GridPosition transpose() {
    return new GridPosition(myY, myX);
  }

  public boolean equals(int x, int y) {
    return x == myX && y == myY;
  }

  @Override
  public boolean equals(Object o) {
    if (!(o instanceof GridPosition)) {
      return false;
    }
    GridPosition otherPos = ((GridPosition) o);
    return otherPos.getX() == getX() && otherPos.getY() == getY();
  }

  @Override
  public int hashCode() {
    return myX << 16 | myY;
  }

  @Override
  public String toString() {
    return "GridPosition[" + myX + "," + myY + "]";
  }
}

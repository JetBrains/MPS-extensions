package de.q60.mps.shadowmodels.runtime.plugin;

/*Generated by MPS */

import de.q60.mps.shadowmodels.runtime.util.OptionalPlugin;
import de.q60.mps.shadowmodels.runtime.smodel.SM_RepositoryModulesManager;
import de.q60.mps.logging.runtime.ShadowLogging;
import org.modelix.model.mpsadapters.mps.NodeToSNodeAdapter;

public class OptionalPlugin_ShadowRepository extends OptionalPlugin {
  public static final OptionalPlugin_ShadowRepository INSTANCE = new OptionalPlugin_ShadowRepository();

  @Override
  public void init() {
    SM_RepositoryModulesManager instance = new SM_RepositoryModulesManager();
    SM_RepositoryModulesManager.setInstance(instance);
    instance.init();
  }

  @Override
  public void dispose() {
    SM_RepositoryModulesManager instance = SM_RepositoryModulesManager.getInstance();
    instance.dispose();
    SM_RepositoryModulesManager.setInstance(null);

    // prevent memory leak
    ShadowLogging.clear();
    NodeToSNodeAdapter.clearInstancesCache();
  }
}

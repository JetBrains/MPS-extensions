package de.q60.mps.shadowmodels.examples.statemachine.transformations;

/*Generated by MPS */

import de.q60.mps.polymorphicfunctions.runtime.PFModule;
import jetbrains.mps.logging.Logger;
import jetbrains.mps.baseLanguage.closures.runtime._FunctionTypes;
import de.q60.mps.polymorphicfunctions.runtime.IFunctionImplementation;
import java.util.List;
import de.q60.mps.polymorphicfunctions.runtime.IParameterType;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import java.util.ArrayList;
import de.q60.mps.polymorphicfunctions.runtime.IPFContext;
import de.q60.mps.polymorphicfunctions.runtime.ParameterList;
import org.jetbrains.mps.openapi.language.SLanguage;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import de.q60.mps.shadowmodels.runtime.engine.ParameterType_INode;
import org.modelix.model.mpsadapters.mps.SConceptAdapter;
import org.modelix.model.api.INode;
import de.q60.mps.shadowmodels.runtime.smodel.SM_GeneratedTransformationRule;
import jetbrains.mps.smodel.SNodePointer;
import de.q60.mps.shadowmodels.runtime.engine.ContainmentTargetRootNodes;
import de.q60.mps.shadowmodels.runtime.engine.TransformationCall;
import de.q60.mps.shadowmodels.runtime.engine.TransformationResult;
import de.q60.mps.shadowmodels.runtime.engine.RootBuilderContext;
import de.q60.mps.shadowmodels.runtime.engine.IBuilderContext;
import de.q60.mps.shadowmodels.runtime.smodel.SM_ParameterConversion;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import org.jetbrains.mps.openapi.model.SNode;
import de.q60.mps.shadowmodels.runtime.engine.TransformationEngine;
import jetbrains.mps.internal.collections.runtime.Sequence;
import de.q60.mps.shadowmodels.runtime.engine.ForkCall;
import de.q60.mps.shadowmodels.runtime.engine.RewriteCall;
import de.q60.mps.shadowmodels.runtime.engine.SimpleRewriter;
import de.q60.mps.shadowmodels.runtime.engine.BuilderContextParameter;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import de.q60.mps.shadowmodels.runtime.engine.OutputNodeAsReferenceTarget;
import de.q60.mps.shadowmodels.runtime.engine.NodeAsOutputNodeReference;
import jetbrains.mps.openapi.editor.cells.CellActionType;
import de.q60.mps.shadowmodels.runtime.engine.IOperation;
import de.q60.mps.shadowmodels.runtime.smodel.SM_TransformationTrace;
import de.q60.mps.shadowmodels.runtime.smodel.SM_SNodeAPI;
import jetbrains.mps.smodel.action.SNodeFactoryOperations;
import java.util.Objects;
import org.jetbrains.mps.openapi.language.SConcept;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import org.jetbrains.mps.openapi.language.SReferenceLink;

public class StatemachineAsTable extends PFModule {
  private static final Logger LOG = Logger.getLogger(StatemachineAsTable.class);
  public static final StatemachineAsTable INSTANCE = ((_FunctionTypes._return_P0_E0<StatemachineAsTable>) () -> {
    try {
      return new StatemachineAsTable();
    } catch (RuntimeException ex) {
      if (LOG.isErrorLevel()) {
        LOG.error("Failed to load " + StatemachineAsTable.class.getName(), ex);
      }
      throw ex;
    }
  }).invoke();
  private StatemachineAsTable() {
    myImplementations.put("de.q60.mps.shadowmodels.transformation.polyfun.TransformationModuleMetaFunctions.getOutputLanguages", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromList(new ArrayList<IParameterType>());
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.examples.statemachine.transformations/StatemachineAsTable/getOutputLanguages_0";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return ListSequence.fromListAndArray(new ArrayList<SLanguage>(), MetaAdapterFactory.getLanguage(0xebb56408a28744caL, 0xab2d1b6ee6850446L, "de.q60.mps.shadowmodels.examples.statemachine"), MetaAdapterFactory.getLanguage(0x9826ee01d0ba4048L, 0xa62261eda9424397L, "de.q60.mps.shadowmodels.target.editor"));
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    myImplementations.put("de.q60.mps.shadowmodels.examples.statemachine.transformations.StatemachineAsTable.tableOnCopy", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_INode(SConceptAdapter.wrap(CONCEPTS.Statemachine$ba)));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.examples.statemachine.transformations/StatemachineAsTable/tableOnCopy_3";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof INode && ((INode) _PFparameters.get(0)).getConcept().isSubConceptOf(SConceptAdapter.wrap(CONCEPTS.Statemachine$ba)))) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return new SM_GeneratedTransformationRule(new SNodePointer("r:417cb7e3-4a56-4fae-9bed-5ffd476cd098(de.q60.mps.shadowmodels.examples.statemachine.transformations)", "3087343341365767828")) {
          @Override
          public void apply(ContainmentTargetRootNodes<TransformationCall> call, final TransformationResult result) {
            new RootBuilderContext(call, result).run((final IBuilderContext context) -> {
              result.setTraceInfo("r:417cb7e3-4a56-4fae-9bed-5ffd476cd098(de.q60.mps.shadowmodels.examples.statemachine.transformations)/3087343341365767828");
              context.forChildRole("0").run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                public void invoke(final IBuilderContext context) {
                  context.createNode(new TransformationCall("de.q60.mps.shadowmodels.examples.statemachine.transformations.StatemachineAsTable.table", new ParameterList(ListSequence.fromListAndArray(new ArrayList<Object>(), SM_ParameterConversion.fromMPS(SNodeOperations.cast(((_FunctionTypes._return_P0_E0<SNode>) () -> {
                    Iterable<? extends Iterable<INode>> outputNodes = TransformationEngine.getInstance().executeCallExpression(new TransformationCall("de.q60.mps.shadowmodels.examples.statemachine.transformations.StatemachineAsTable.copyStatemachine", new ParameterList(ListSequence.fromListAndArray(new ArrayList<Object>(), SM_ParameterConversion.fromMPS(SM_ParameterConversion.toMPS(((INode) context.getInput(0)))))), "r:417cb7e3-4a56-4fae-9bed-5ffd476cd098(de.q60.mps.shadowmodels.examples.statemachine.transformations)/3087343341365796529"));
                    return SM_ParameterConversion.toMPS(Sequence.fromIterable(Sequence.fromIterable(outputNodes).first()).first());
                  }).invoke(), CONCEPTS.Statemachine$ba)))), "r:417cb7e3-4a56-4fae-9bed-5ffd476cd098(de.q60.mps.shadowmodels.examples.statemachine.transformations)/3087343341365768861"));
                }
              });
            });
          }
        };
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    myImplementations.put("de.q60.mps.shadowmodels.examples.statemachine.transformations.StatemachineAsTable.copyStatemachine", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_INode(SConceptAdapter.wrap(CONCEPTS.Statemachine$ba)));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.examples.statemachine.transformations/StatemachineAsTable/copyStatemachine_6";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof INode && ((INode) _PFparameters.get(0)).getConcept().isSubConceptOf(SConceptAdapter.wrap(CONCEPTS.Statemachine$ba)))) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return new SM_GeneratedTransformationRule(new SNodePointer("r:417cb7e3-4a56-4fae-9bed-5ffd476cd098(de.q60.mps.shadowmodels.examples.statemachine.transformations)", "3087343341365790919")) {
          @Override
          public void apply(ContainmentTargetRootNodes<TransformationCall> call, final TransformationResult result) {
            new RootBuilderContext(call, result).run((final IBuilderContext context) -> {
              result.setTraceInfo("r:417cb7e3-4a56-4fae-9bed-5ffd476cd098(de.q60.mps.shadowmodels.examples.statemachine.transformations)/3087343341365790919");
              context.forChildRole("0").run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                public void invoke(final IBuilderContext context) {
                  context.createNode(((ForkCall) _PFcontext.callFunction("de.q60.mps.shadowmodels.examples.statemachine.transformations.StatemachineAsTable.fork_copyStatemachine", new ParameterList(new Object[]{SM_ParameterConversion.fromMPS(SM_ParameterConversion.toMPS(((INode) context.getInput(0))))}))).setTraceInfo("r:417cb7e3-4a56-4fae-9bed-5ffd476cd098(de.q60.mps.shadowmodels.examples.statemachine.transformations)/3087343341365794837"));
                }
              });
            });
          }
        };
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    myImplementations.put("de.q60.mps.shadowmodels.examples.statemachine.transformations.StatemachineAsTable.fork_copyStatemachine", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_INode(SConceptAdapter.wrap(CONCEPTS.Statemachine$ba)));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.examples.statemachine.transformations/StatemachineAsTable/fork_copyStatemachine_8";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof INode && ((INode) _PFparameters.get(0)).getConcept().isSubConceptOf(SConceptAdapter.wrap(CONCEPTS.Statemachine$ba)))) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return new ForkCall("de.q60.mps.shadowmodels.examples.statemachine.transformations.StatemachineAsTable.fork_copyStatemachine", new ParameterList(ListSequence.fromListAndArray(new ArrayList<Object>(), ((INode) _PFparameters.get(0)))), new RewriteCall(SM_ParameterConversion.fromMPS(SM_ParameterConversion.toMPS(((INode) _PFparameters.get(0)))), "3087343341365785716"), false, "de.q60.mps.shadowmodels.examples.statemachine.transformations.StatemachineAsTable.fork_copyStatemachine/rewriter", "r:417cb7e3-4a56-4fae-9bed-5ffd476cd098(de.q60.mps.shadowmodels.examples.statemachine.transformations)/3087343341365784656");
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    myImplementations.put("de.q60.mps.shadowmodels.examples.statemachine.transformations.StatemachineAsTable.fork_copyStatemachine/rewriter", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromList(new ArrayList<IParameterType>());
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.examples.statemachine.transformations/StatemachineAsTable/fork_copyStatemachine/rewriter_10";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        SimpleRewriter rewriter = new SimpleRewriter();
        return rewriter;
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    myImplementations.put("de.q60.mps.shadowmodels.examples.statemachine.transformations.StatemachineAsTable.table", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_INode(SConceptAdapter.wrap(CONCEPTS.Statemachine$ba)));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.examples.statemachine.transformations/StatemachineAsTable/table_13";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof INode && ((INode) _PFparameters.get(0)).getConcept().isSubConceptOf(SConceptAdapter.wrap(CONCEPTS.Statemachine$ba)))) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return new SM_GeneratedTransformationRule(new SNodePointer("r:417cb7e3-4a56-4fae-9bed-5ffd476cd098(de.q60.mps.shadowmodels.examples.statemachine.transformations)", "3384942920130181135")) {
          @Override
          public void apply(ContainmentTargetRootNodes<TransformationCall> call, final TransformationResult result) {
            new RootBuilderContext(call, result).run((final IBuilderContext context) -> {
              result.setTraceInfo("r:417cb7e3-4a56-4fae-9bed-5ffd476cd098(de.q60.mps.shadowmodels.examples.statemachine.transformations)/3384942920130181135");
              context.forChildRole("0").run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                public void invoke(final IBuilderContext context) {
                  context.withParameter(BuilderContextParameter.ID, "0").createNode(new SConceptAdapter(CONCEPTS.CollectionCell$b5)).run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                    public void invoke(final IBuilderContext context) {
                      context.getResultElement().setTraceInfo("r:417cb7e3-4a56-4fae-9bed-5ffd476cd098(de.q60.mps.shadowmodels.examples.statemachine.transformations)/3384942920130549504");
                      final IBuilderContext savedContext_36hbpv_a0a7 = context;
                      context.getResultElement().setProperty("verticalGrid", () -> {
                        return savedContext_36hbpv_a0a7.compute(new _FunctionTypes._return_P1_E0<String, IBuilderContext>() {
                          public String invoke(final IBuilderContext context) {
                            return SM_ParameterConversion.asString(true);
                          }
                        });
                      });
                      if (true) {
                        context.forChildRole("childCells").run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                          public void invoke(final IBuilderContext context) {
                            context.withParameter(BuilderContextParameter.ID, "1").createNode(new SConceptAdapter(CONCEPTS.CollectionCell$b5)).run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                              public void invoke(final IBuilderContext context) {
                                context.getResultElement().setTraceInfo("r:417cb7e3-4a56-4fae-9bed-5ffd476cd098(de.q60.mps.shadowmodels.examples.statemachine.transformations)/3384942920130556691");
                                final IBuilderContext savedContext_36hbpv_a0b0a7 = context;
                                context.getResultElement().setProperty("drawBorder", () -> {
                                  return savedContext_36hbpv_a0b0a7.compute(new _FunctionTypes._return_P1_E0<String, IBuilderContext>() {
                                    public String invoke(final IBuilderContext context) {
                                      return SM_ParameterConversion.asString(true);
                                    }
                                  });
                                });
                                if (true) {
                                  context.forChildRole("childCells").run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                                    public void invoke(final IBuilderContext context) {
                                      context.withParameter(BuilderContextParameter.ID, "2").createNode(new SConceptAdapter(CONCEPTS.ConstantCell$b$)).run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                                        public void invoke(final IBuilderContext context) {
                                          context.getResultElement().setTraceInfo("r:417cb7e3-4a56-4fae-9bed-5ffd476cd098(de.q60.mps.shadowmodels.examples.statemachine.transformations)/3384942920130556714");
                                          final IBuilderContext savedContext_36hbpv_a0b0b0a7 = context;
                                          context.getResultElement().setProperty("drawBorder", () -> {
                                            return savedContext_36hbpv_a0b0b0a7.compute(new _FunctionTypes._return_P1_E0<String, IBuilderContext>() {
                                              public String invoke(final IBuilderContext context) {
                                                return SM_ParameterConversion.asString(true);
                                              }
                                            });
                                          });
                                        }
                                      });
                                    }
                                  });
                                }
                                if (true) {
                                  context.forChildRole("childCells").run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                                    public void invoke(final IBuilderContext context) {
                                      int i_a2a1a0h = 0;
                                      for (SNode e_a2a1a0h : ListSequence.fromList(SLinkOperations.getChildren(SM_ParameterConversion.toMPS(((INode) context.getInput(0))), LINKS.events$gXF$))) {
                                        context.forContextValue(SM_ParameterConversion.fromMPS(e_a2a1a0h)).withAdditionalIdPrefix("3" + "#" + i_a2a1a0h).run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                                          public void invoke(final IBuilderContext context) {
                                            context.withParameter(BuilderContextParameter.ID, "4").createNode(new SConceptAdapter(CONCEPTS.NodeCell$X5)).run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                                              public void invoke(final IBuilderContext context) {
                                                context.getResultElement().setTraceInfo("r:417cb7e3-4a56-4fae-9bed-5ffd476cd098(de.q60.mps.shadowmodels.examples.statemachine.transformations)/3384942920130939468");
                                                final IBuilderContext savedContext_36hbpv_a0a2a1a0h = context;
                                                context.getResultElement().setProperty("drawBorder", () -> {
                                                  return savedContext_36hbpv_a0a2a1a0h.compute(new _FunctionTypes._return_P1_E0<String, IBuilderContext>() {
                                                    public String invoke(final IBuilderContext context) {
                                                      return SM_ParameterConversion.asString(true);
                                                    }
                                                  });
                                                });
                                                context.getResultElement().setReferenceTarget("asReference", new OutputNodeAsReferenceTarget(NodeAsOutputNodeReference.create(SM_ParameterConversion.fromMPS(SM_ParameterConversion.toMPS(((INode) context.getContextValue()))))));
                                              }
                                            });
                                          }
                                        });
                                        i_a2a1a0h++;
                                      }
                                    }
                                  });
                                }
                              }
                            });
                          }
                        });
                      }
                      if (true) {
                        context.forChildRole("childCells").run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                          public void invoke(final IBuilderContext context) {
                            int i_a2a0h = 0;
                            for (SNode e_a2a0h : ListSequence.fromList(SLinkOperations.getChildren(SM_ParameterConversion.toMPS(((INode) context.getInput(0))), LINKS.states$HuiR))) {
                              context.forContextValue(SM_ParameterConversion.fromMPS(e_a2a0h)).withAdditionalIdPrefix("5" + "#" + i_a2a0h).run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                                public void invoke(final IBuilderContext context) {
                                  context.createNode(new TransformationCall("de.q60.mps.shadowmodels.examples.statemachine.transformations.StatemachineAsTable.row", new ParameterList(ListSequence.fromListAndArray(new ArrayList<Object>(), SM_ParameterConversion.fromMPS(SM_ParameterConversion.toMPS(((INode) context.getInput(0)))), SM_ParameterConversion.fromMPS(SM_ParameterConversion.toMPS(((INode) context.getContextValue()))))), "r:417cb7e3-4a56-4fae-9bed-5ffd476cd098(de.q60.mps.shadowmodels.examples.statemachine.transformations)/3384942920130551262"));
                                }
                              });
                              i_a2a0h++;
                            }
                          }
                        });
                      }
                    }
                  });
                }
              });
            });
          }
        };
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    myImplementations.put("de.q60.mps.shadowmodels.examples.statemachine.transformations.StatemachineAsTable.row", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_INode(SConceptAdapter.wrap(CONCEPTS.Statemachine$ba)), new ParameterType_INode(SConceptAdapter.wrap(CONCEPTS.State$cB)));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.examples.statemachine.transformations/StatemachineAsTable/row_16";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof INode && ((INode) _PFparameters.get(0)).getConcept().isSubConceptOf(SConceptAdapter.wrap(CONCEPTS.Statemachine$ba)))) {
          return false;
        }
        if (!(_PFparameters.get(1) == null || _PFparameters.get(1) instanceof INode && ((INode) _PFparameters.get(1)).getConcept().isSubConceptOf(SConceptAdapter.wrap(CONCEPTS.State$cB)))) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return new SM_GeneratedTransformationRule(new SNodePointer("r:417cb7e3-4a56-4fae-9bed-5ffd476cd098(de.q60.mps.shadowmodels.examples.statemachine.transformations)", "3384942920130245473")) {
          @Override
          public void apply(ContainmentTargetRootNodes<TransformationCall> call, final TransformationResult result) {
            new RootBuilderContext(call, result).run((final IBuilderContext context) -> {
              result.setTraceInfo("r:417cb7e3-4a56-4fae-9bed-5ffd476cd098(de.q60.mps.shadowmodels.examples.statemachine.transformations)/3384942920130245473");
              context.forChildRole("0").run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                public void invoke(final IBuilderContext context) {
                  context.withParameter(BuilderContextParameter.ID, "6").createNode(new SConceptAdapter(CONCEPTS.CollectionCell$b5)).run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                    public void invoke(final IBuilderContext context) {
                      context.getResultElement().setTraceInfo("r:417cb7e3-4a56-4fae-9bed-5ffd476cd098(de.q60.mps.shadowmodels.examples.statemachine.transformations)/3384942920130245716");
                      final IBuilderContext savedContext_36hbpv_a0a9 = context;
                      context.getResultElement().setProperty("drawBorder", () -> {
                        return savedContext_36hbpv_a0a9.compute(new _FunctionTypes._return_P1_E0<String, IBuilderContext>() {
                          public String invoke(final IBuilderContext context) {
                            return SM_ParameterConversion.asString(true);
                          }
                        });
                      });
                      if (true) {
                        context.forChildRole("childCells").run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                          public void invoke(final IBuilderContext context) {
                            context.withParameter(BuilderContextParameter.ID, "7").createNode(new SConceptAdapter(CONCEPTS.NodeCell$X5)).run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                              public void invoke(final IBuilderContext context) {
                                context.getResultElement().setTraceInfo("r:417cb7e3-4a56-4fae-9bed-5ffd476cd098(de.q60.mps.shadowmodels.examples.statemachine.transformations)/3384942920130943618");
                                context.getResultElement().setReferenceTarget("asReference", new OutputNodeAsReferenceTarget(NodeAsOutputNodeReference.create(SM_ParameterConversion.fromMPS(SM_ParameterConversion.toMPS(((INode) context.getInput(1)))))));
                              }
                            });
                          }
                        });
                      }
                      if (true) {
                        context.forChildRole("childCells").run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                          public void invoke(final IBuilderContext context) {
                            int i_a2a0j_0 = 0;
                            for (SNode e_a2a0j_0 : ListSequence.fromList(SLinkOperations.getChildren(SM_ParameterConversion.toMPS(((INode) context.getInput(0))), LINKS.events$gXF$))) {
                              context.forContextValue(SM_ParameterConversion.fromMPS(e_a2a0j_0)).withAdditionalIdPrefix("8" + "#" + i_a2a0j_0).run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                                public void invoke(final IBuilderContext context) {
                                  context.createNode(new TransformationCall("de.q60.mps.shadowmodels.examples.statemachine.transformations.StatemachineAsTable.cell", new ParameterList(ListSequence.fromListAndArray(new ArrayList<Object>(), SM_ParameterConversion.fromMPS(SM_ParameterConversion.toMPS(((INode) context.getInput(0)))), SM_ParameterConversion.fromMPS(SM_ParameterConversion.toMPS(((INode) context.getInput(1)))), SM_ParameterConversion.fromMPS(SM_ParameterConversion.toMPS(((INode) context.getContextValue()))))), "r:417cb7e3-4a56-4fae-9bed-5ffd476cd098(de.q60.mps.shadowmodels.examples.statemachine.transformations)/3384942920130544722"));
                                }
                              });
                              i_a2a0j_0++;
                            }
                          }
                        });
                      }
                      if (true) {
                        context.forChildRole("childCells").run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                          public void invoke(final IBuilderContext context) {
                            context.withParameter(BuilderContextParameter.ID, "9").createNode(new SConceptAdapter(CONCEPTS.ConstantCell$b$)).run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                              public void invoke(final IBuilderContext context) {
                                context.getResultElement().setTraceInfo("r:417cb7e3-4a56-4fae-9bed-5ffd476cd098(de.q60.mps.shadowmodels.examples.statemachine.transformations)/5810976794849322534");
                                if (true) {
                                  context.forChildRole("actions").run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                                    public void invoke(final IBuilderContext context) {
                                      context.withParameter(BuilderContextParameter.ID, "10").createNode(new SConceptAdapter(CONCEPTS.Action$Pb)).run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                                        public void invoke(final IBuilderContext context) {
                                          context.getResultElement().setTraceInfo("r:417cb7e3-4a56-4fae-9bed-5ffd476cd098(de.q60.mps.shadowmodels.examples.statemachine.transformations)/5810976794849318265");
                                          final IBuilderContext savedContext_36hbpv_a0a0d0a9 = context;
                                          context.getResultElement().setProperty("key", () -> {
                                            return savedContext_36hbpv_a0a0d0a9.compute(new _FunctionTypes._return_P1_E0<String, IBuilderContext>() {
                                              public String invoke(final IBuilderContext context) {
                                                return SM_ParameterConversion.asString(CellActionType.INSERT);
                                              }
                                            });
                                          });
                                          final IBuilderContext savedContext_36hbpv_b0a0d0a9 = context;
                                          context.getResultElement().setOperation("de.q60.mps.shadowmodels.target.editor.transformations.Actions.execute", new IOperation() {
                                            public Object invoke(final ParameterList _parameters) {
                                              return savedContext_36hbpv_b0a0d0a9.compute(new _FunctionTypes._return_P1_E0<Object, IBuilderContext>() {
                                                public Object invoke(final IBuilderContext context) {
                                                  SNode originalSM = Sequence.fromIterable(SNodeOperations.ofConcept(Sequence.fromIterable(SM_TransformationTrace.tryGetOriginalInputNodes(SM_ParameterConversion.toMPS(((INode) context.getInput(0))))).ofType(SNode.class), CONCEPTS.Statemachine$ba)).first();
                                                  originalSM = SNodeOperations.cast(SM_SNodeAPI.tryGetUnwrappedNode(originalSM), CONCEPTS.Statemachine$ba);
                                                  SNodeFactoryOperations.addNewChild(originalSM, LINKS.states$HuiR, null);
                                                  return null;
                                                }
                                              });
                                            }
                                          });
                                        }
                                      });
                                    }
                                  });
                                }
                                if (true) {
                                  context.forChildRole("actions").run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                                    public void invoke(final IBuilderContext context) {
                                      context.withParameter(BuilderContextParameter.ID, "11").createNode(new SConceptAdapter(CONCEPTS.Action$Pb)).run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                                        public void invoke(final IBuilderContext context) {
                                          context.getResultElement().setTraceInfo("r:417cb7e3-4a56-4fae-9bed-5ffd476cd098(de.q60.mps.shadowmodels.examples.statemachine.transformations)/5810976794850490683");
                                          final IBuilderContext savedContext_36hbpv_a0b0d0a9 = context;
                                          context.getResultElement().setProperty("key", () -> {
                                            return savedContext_36hbpv_a0b0d0a9.compute(new _FunctionTypes._return_P1_E0<String, IBuilderContext>() {
                                              public String invoke(final IBuilderContext context) {
                                                return SM_ParameterConversion.asString(CellActionType.INSERT_BEFORE);
                                              }
                                            });
                                          });
                                          final IBuilderContext savedContext_36hbpv_b0b0d0a9 = context;
                                          context.getResultElement().setOperation("de.q60.mps.shadowmodels.target.editor.transformations.Actions.execute", new IOperation() {
                                            public Object invoke(final ParameterList _parameters) {
                                              return savedContext_36hbpv_b0b0d0a9.compute(new _FunctionTypes._return_P1_E0<Object, IBuilderContext>() {
                                                public Object invoke(final IBuilderContext context) {
                                                  SNode originalSM = Sequence.fromIterable(SNodeOperations.ofConcept(Sequence.fromIterable(SM_TransformationTrace.tryGetOriginalInputNodes(SM_ParameterConversion.toMPS(((INode) context.getInput(0))))).ofType(SNode.class), CONCEPTS.Statemachine$ba)).first();
                                                  originalSM = SNodeOperations.cast(SM_SNodeAPI.tryGetUnwrappedNode(originalSM), CONCEPTS.Statemachine$ba);
                                                  SNodeFactoryOperations.addNewChild(originalSM, LINKS.states$HuiR, null);
                                                  return null;
                                                }
                                              });
                                            }
                                          });
                                        }
                                      });
                                    }
                                  });
                                }
                              }
                            });
                          }
                        });
                      }
                    }
                  });
                }
              });
            });
          }
        };
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    myImplementations.put("de.q60.mps.shadowmodels.examples.statemachine.transformations.StatemachineAsTable.cell", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_INode(SConceptAdapter.wrap(CONCEPTS.Statemachine$ba)), new ParameterType_INode(SConceptAdapter.wrap(CONCEPTS.State$cB)), new ParameterType_INode(SConceptAdapter.wrap(CONCEPTS.Event$nK)));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.examples.statemachine.transformations/StatemachineAsTable/cell_19";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof INode && ((INode) _PFparameters.get(0)).getConcept().isSubConceptOf(SConceptAdapter.wrap(CONCEPTS.Statemachine$ba)))) {
          return false;
        }
        if (!(_PFparameters.get(1) == null || _PFparameters.get(1) instanceof INode && ((INode) _PFparameters.get(1)).getConcept().isSubConceptOf(SConceptAdapter.wrap(CONCEPTS.State$cB)))) {
          return false;
        }
        if (!(_PFparameters.get(2) == null || _PFparameters.get(2) instanceof INode && ((INode) _PFparameters.get(2)).getConcept().isSubConceptOf(SConceptAdapter.wrap(CONCEPTS.Event$nK)))) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return new SM_GeneratedTransformationRule(new SNodePointer("r:417cb7e3-4a56-4fae-9bed-5ffd476cd098(de.q60.mps.shadowmodels.examples.statemachine.transformations)", "3384942920130481318")) {
          @Override
          public void apply(ContainmentTargetRootNodes<TransformationCall> call, final TransformationResult result) {
            new RootBuilderContext(call, result).run((final IBuilderContext context) -> {
              result.setTraceInfo("r:417cb7e3-4a56-4fae-9bed-5ffd476cd098(de.q60.mps.shadowmodels.examples.statemachine.transformations)/3384942920130481318");
              context.forChildRole("0").run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                public void invoke(final IBuilderContext context) {
                  boolean condition_36hbpv_a0l = ListSequence.fromList(SLinkOperations.getChildren(SM_ParameterConversion.toMPS(((INode) context.getInput(1))), LINKS.transitions$gYb3)).where((it) -> Objects.equals(SLinkOperations.getTarget(it, LINKS.event$WZ7A), SM_ParameterConversion.toMPS(((INode) context.getInput(2))))).isNotEmpty();
                  if (condition_36hbpv_a0l) {
                    context.withParameter(BuilderContextParameter.ID, "12").createNode(new SConceptAdapter(CONCEPTS.CollectionCell$b5)).run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                      public void invoke(final IBuilderContext context) {
                        context.getResultElement().setTraceInfo("r:417cb7e3-4a56-4fae-9bed-5ffd476cd098(de.q60.mps.shadowmodels.examples.statemachine.transformations)/8127200012857951672");
                        final IBuilderContext savedContext_36hbpv_a0a0l = context;
                        context.getResultElement().setProperty("drawBorder", () -> {
                          return savedContext_36hbpv_a0a0l.compute(new _FunctionTypes._return_P1_E0<String, IBuilderContext>() {
                            public String invoke(final IBuilderContext context) {
                              return SM_ParameterConversion.asString(true);
                            }
                          });
                        });
                        final IBuilderContext savedContext_36hbpv_b0a0l = context;
                        context.getResultElement().setProperty("vertical", () -> {
                          return savedContext_36hbpv_b0a0l.compute(new _FunctionTypes._return_P1_E0<String, IBuilderContext>() {
                            public String invoke(final IBuilderContext context) {
                              return SM_ParameterConversion.asString(true);
                            }
                          });
                        });
                        if (true) {
                          context.forChildRole("childCells").run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                            public void invoke(final IBuilderContext context) {
                              int i_a2a0a11 = 0;
                              for (SNode e_a2a0a11 : ListSequence.fromList(SLinkOperations.getChildren(SM_ParameterConversion.toMPS(((INode) context.getInput(1))), LINKS.transitions$gYb3)).where((it) -> Objects.equals(SLinkOperations.getTarget(it, LINKS.event$WZ7A), SM_ParameterConversion.toMPS(((INode) context.getInput(2)))))) {
                                context.forContextValue(SM_ParameterConversion.fromMPS(e_a2a0a11)).withAdditionalIdPrefix("13" + "#" + i_a2a0a11).run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                                  public void invoke(final IBuilderContext context) {
                                    context.withParameter(BuilderContextParameter.ID, "14").createNode(new SConceptAdapter(CONCEPTS.NodeCell$X5)).run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                                      public void invoke(final IBuilderContext context) {
                                        context.getResultElement().setTraceInfo("r:417cb7e3-4a56-4fae-9bed-5ffd476cd098(de.q60.mps.shadowmodels.examples.statemachine.transformations)/8127200012857614824");
                                        context.getResultElement().setReferenceTarget("asReference", new OutputNodeAsReferenceTarget(NodeAsOutputNodeReference.create(SM_ParameterConversion.fromMPS(SM_ParameterConversion.toMPS(((INode) context.getContextValue()))))));
                                      }
                                    });
                                  }
                                });
                                i_a2a0a11++;
                              }
                            }
                          });
                        }
                      }
                    });
                  } else {
                    context.withParameter(BuilderContextParameter.ID, "15").createNode(new SConceptAdapter(CONCEPTS.ConstantCell$b$)).run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                      public void invoke(final IBuilderContext context) {
                        context.getResultElement().setTraceInfo("r:417cb7e3-4a56-4fae-9bed-5ffd476cd098(de.q60.mps.shadowmodels.examples.statemachine.transformations)/8127200012857617347");
                        final IBuilderContext savedContext_36hbpv_a0a0l_0 = context;
                        context.getResultElement().setProperty("drawBorder", () -> {
                          return savedContext_36hbpv_a0a0l_0.compute(new _FunctionTypes._return_P1_E0<String, IBuilderContext>() {
                            public String invoke(final IBuilderContext context) {
                              return SM_ParameterConversion.asString(true);
                            }
                          });
                        });
                      }
                    });
                  }
                }
              });
            });
          }
        };
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept Statemachine$ba = MetaAdapterFactory.getConcept(0xebb56408a28744caL, 0xab2d1b6ee6850446L, 0x65cd987c65c407aaL, "de.q60.mps.shadowmodels.examples.statemachine.structure.Statemachine");
    /*package*/ static final SConcept CollectionCell$b5 = MetaAdapterFactory.getConcept(0x9826ee01d0ba4048L, 0xa62261eda9424397L, 0x3a3e5701a242b7f8L, "de.q60.mps.shadowmodels.target.editor.structure.CollectionCell");
    /*package*/ static final SConcept ConstantCell$b$ = MetaAdapterFactory.getConcept(0x9826ee01d0ba4048L, 0xa62261eda9424397L, 0x3a3e5701a242b7f9L, "de.q60.mps.shadowmodels.target.editor.structure.ConstantCell");
    /*package*/ static final SConcept NodeCell$X5 = MetaAdapterFactory.getConcept(0x9826ee01d0ba4048L, 0xa62261eda9424397L, 0x2ef9bba6d35658f8L, "de.q60.mps.shadowmodels.target.editor.structure.NodeCell");
    /*package*/ static final SConcept State$cB = MetaAdapterFactory.getConcept(0xebb56408a28744caL, 0xab2d1b6ee6850446L, 0x65cd987c65c407adL, "de.q60.mps.shadowmodels.examples.statemachine.structure.State");
    /*package*/ static final SConcept Action$Pb = MetaAdapterFactory.getConcept(0x9826ee01d0ba4048L, 0xa62261eda9424397L, 0x50a4bc9b67077b04L, "de.q60.mps.shadowmodels.target.editor.structure.Action");
    /*package*/ static final SConcept Event$nK = MetaAdapterFactory.getConcept(0xebb56408a28744caL, 0xab2d1b6ee6850446L, 0x65cd987c65c407afL, "de.q60.mps.shadowmodels.examples.statemachine.structure.Event");
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink events$gXF$ = MetaAdapterFactory.getContainmentLink(0xebb56408a28744caL, 0xab2d1b6ee6850446L, 0x65cd987c65c407aaL, 0x65cd987c65c407b5L, "events");
    /*package*/ static final SContainmentLink states$HuiR = MetaAdapterFactory.getContainmentLink(0xebb56408a28744caL, 0xab2d1b6ee6850446L, 0x65cd987c65c407aaL, 0x65cd987c65c409faL, "states");
    /*package*/ static final SContainmentLink transitions$gYb3 = MetaAdapterFactory.getContainmentLink(0xebb56408a28744caL, 0xab2d1b6ee6850446L, 0x65cd987c65c407adL, 0x65cd987c65c407b7L, "transitions");
    /*package*/ static final SReferenceLink event$WZ7A = MetaAdapterFactory.getReferenceLink(0xebb56408a28744caL, 0xab2d1b6ee6850446L, 0x65cd987c65c407aeL, 0x65cd987c65c411a8L, "event");
  }
}

package de.slisson.mps.tables.runtime.style;

/*Generated by MPS */

import jetbrains.mps.openapi.editor.style.Style;
import java.lang.reflect.Method;
import java.lang.reflect.InvocationTargetException;
import jetbrains.mps.editor.runtime.style.StyleImpl;
import jetbrains.mps.openapi.editor.style.StyleAttribute;
import jetbrains.mps.internal.collections.runtime.Sequence;

public class TableStyleUtils {
  public static Style getParentStyle(Style style) {
    try {
      Method m = style.getClass().getDeclaredMethod("getParentStyle");
      m.setAccessible(true);
      return (Style) m.invoke(style);
    } catch (InvocationTargetException ex) {
      throw new RuntimeException(ex);
    } catch (IllegalAccessException ex) {
      throw new RuntimeException(ex);
    } catch (NoSuchMethodException ex) {
      throw new RuntimeException(ex);
    }
  }
  public static Style copy(Style style) {
    Style copy = new StyleImpl();
    copy.putAll(style);
    return copy;
  }
  public static Style combine(Style style1, Style style2) {
    if (style2 == null && style1 != null) {
      return copy(style1);
    }
    if (style2 != null && style1 == null) {
      return copy(style2);
    }
    if (style1 == null && style2 == null) {
      return new StyleImpl();
    }
    Style combined = copy(style1);
    for (StyleAttribute attribute : Sequence.fromIterable(style2.getSpecifiedAttributes())) {
      if (attribute == null) {
        continue;
      }
      combined.set(attribute, attribute.combine(combined.get(attribute), style2.get(attribute)));
    }
    return combined;
  }

}

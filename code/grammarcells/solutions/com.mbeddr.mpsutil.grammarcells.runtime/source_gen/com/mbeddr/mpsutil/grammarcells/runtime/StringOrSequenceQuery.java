package com.mbeddr.mpsutil.grammarcells.runtime;

/*Generated by MPS */

import jetbrains.mps.internal.collections.runtime.Sequence;
import java.util.Collections;

public abstract class StringOrSequenceQuery {

  protected abstract Object queryStringOrSequence();

  protected Iterable<String> querySequence() {
    Object stringOrSequence = queryStringOrSequence();
    if (stringOrSequence == null) {
      return Sequence.fromIterable(Collections.<String>emptyList());
    }
    if (stringOrSequence instanceof String) {
      return Sequence.<String>singleton(((String) stringOrSequence));
    }
    if (stringOrSequence instanceof Iterable) {
      return ((Iterable) stringOrSequence);
    }
    return Sequence.fromIterable(Collections.<String>emptyList());
  }

  public Iterable<String> query() {
    return Sequence.fromIterable(querySequence()).where((it) -> (it != null && it.length() > 0));
  }

}

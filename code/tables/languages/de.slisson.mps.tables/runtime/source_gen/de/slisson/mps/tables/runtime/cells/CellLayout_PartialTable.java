package de.slisson.mps.tables.runtime.cells;

/*Generated by MPS */

import jetbrains.mps.nodeEditor.cellLayout.AbstractCellLayout;
import jetbrains.mps.nodeEditor.cellLayout.CellLayout;
import de.slisson.mps.tables.runtime.gridmodel.Grid;
import java.util.List;
import jetbrains.mps.openapi.editor.cells.EditorCell;
import jetbrains.mps.openapi.editor.cells.EditorCell_Collection;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import de.slisson.mps.tables.runtime.gridmodel.IGridElement;
import jetbrains.mps.util.IterableUtil;
import de.slisson.mps.tables.runtime.gridmodel.EditorCellGridLeaf;
import jetbrains.mps.openapi.editor.TextBuilder;
import jetbrains.mps.editor.runtime.TextBuilderImpl;

public class CellLayout_PartialTable extends AbstractCellLayout implements CellLayout {
  private Grid myGrid;

  public void setGrid(Grid grid) {
    myGrid = grid;
  }

  @Override
  public List<? extends EditorCell> getSelectionCells(EditorCell_Collection collection) {
    return ListSequence.fromList(((List<IGridElement>) IterableUtil.asList(myGrid))).select((it) -> check_3gf5a8_a0a0a0a0a0e(as_3gf5a8_a0a0a0a0a0a0e(it, EditorCellGridLeaf.class))).where((it) -> it != null).toList();
  }
  public void doLayout(EditorCell_Collection collection) {
    ((PartialTableEditor) collection).updateBounds();
  }
  public TextBuilder doLayoutText(Iterable<EditorCell> editorCells) {
    TextBuilder result = new TextBuilderImpl();
    for (EditorCell editorCell : editorCells) {
      result = result.appendToTheBottom(editorCell.renderText());
    }
    return result;
  }
  private static EditorCell check_3gf5a8_a0a0a0a0a0e(EditorCellGridLeaf checkedDotOperand) {
    if (null != checkedDotOperand) {
      return checkedDotOperand.getEditorCell();
    }
    return null;
  }
  private static <T> T as_3gf5a8_a0a0a0a0a0a0e(Object o, Class<T> type) {
    return (type.isInstance(o) ? (T) o : null);
  }
}

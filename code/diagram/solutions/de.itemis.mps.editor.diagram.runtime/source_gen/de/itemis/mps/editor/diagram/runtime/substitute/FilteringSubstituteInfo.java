package de.itemis.mps.editor.diagram.runtime.substitute;

/*Generated by MPS */

import jetbrains.mps.openapi.editor.cells.SubstituteInfo;
import java.util.List;
import jetbrains.mps.openapi.editor.cells.SubstituteAction;
import java.util.ArrayList;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.openapi.editor.cells.EditorCell;

public class FilteringSubstituteInfo implements SubstituteInfo {

  private SubstituteInfo myWrapped;
  private ISubstituteActionFilter myFilter;

  public FilteringSubstituteInfo(SubstituteInfo wrapped, ISubstituteActionFilter filter) {
    myWrapped = wrapped;
    myFilter = filter;
  }

  public List<SubstituteAction> getMatchingActions(String pattern, boolean strict) {
    return filter(myWrapped.getMatchingActions(pattern, strict));
  }

  protected List<SubstituteAction> filter(List<SubstituteAction> unfiltered) {
    List<SubstituteAction> filtered = new ArrayList<SubstituteAction>();
    for (SubstituteAction action : ListSequence.fromList(unfiltered)) {
      if (!(myFilter.remove(action))) {
        filtered.add(action);
      }
    }
    return filtered;
  }

  public String getOriginalText() {
    return myWrapped.getOriginalText();
  }
  public List<SubstituteAction> getSmartMatchingActions(String pattern, boolean strict, EditorCell cell) {
    return filter(myWrapped.getSmartMatchingActions(pattern, strict, cell));
  }
  public boolean hasExactlyNActions(String pattern, boolean strictMatching, int n) {
    return getMatchingActions(pattern, strictMatching).size() == n;
  }
  public void invalidateActions() {
    myWrapped.invalidateActions();
  }
  public void setOriginalText(String text) {
    myWrapped.setOriginalText(text);
  }
}

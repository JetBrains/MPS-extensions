package de.itemis.mps.comparator.code;

/*Generated by MPS */

import org.jetbrains.mps.openapi.model.SNode;
import java.util.List;
import org.jetbrains.mps.openapi.language.SAbstractConcept;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;

public abstract class NodeDifference {

  private SNode expected;
  private SNode actual;
  private String expectedName;
  private String actualName;

  protected NodeDifference(SNode expected, SNode actual, String expectedName, String actualName) {
    this.expected = expected;
    this.actual = actual;
    this.expectedName = expectedName;
    this.actualName = actualName;
  }

  public final String getDescription() {
    return getDescription(expectedName, actualName);
  }

  public abstract List<NodeDifference> getNestedDifferences();

  protected abstract String getDescription(String nameForA, String nameForB);

  protected SNode getExpected() {
    return expected;
  }

  public SAbstractConcept getExpectedConcept() {
    return SNodeOperations.getConcept(expected);
  }

  protected String getExpectedConceptName() {
    return check_u80b5r_a0a81(SNodeOperations.getConcept(expected));
  }

  protected SNode getActual() {
    return actual;
  }

  public SAbstractConcept getActualConcept() {
    return SNodeOperations.getConcept(actual);
  }

  protected String getActualConceptName() {
    return check_u80b5r_a0a42(SNodeOperations.getConcept(actual));
  }

  public ChildDifference asChildDifference() {
    if (!(this instanceof ChildDifference)) {
      throw new RuntimeException("It is not a " + ChildDifference.class.getSimpleName());
    }
    return ((ChildDifference) this);
  }

  public PropertyDifference asPropertyDifference() {
    if (!(this instanceof PropertyDifference)) {
      throw new RuntimeException("It is not a " + PropertyDifference.class.getSimpleName());
    }
    return ((PropertyDifference) this);
  }

  public ReferenceDifference asReferenceDifference() {
    if (!(this instanceof ReferenceDifference)) {
      throw new RuntimeException("It is not a " + ReferenceDifference.class.getSimpleName());
    }
    return ((ReferenceDifference) this);
  }

  private static String check_u80b5r_a0a81(SAbstractConcept checkedDotOperand) {
    if (null != checkedDotOperand) {
      return checkedDotOperand.getName();
    }
    return null;
  }
  private static String check_u80b5r_a0a42(SAbstractConcept checkedDotOperand) {
    if (null != checkedDotOperand) {
      return checkedDotOperand.getName();
    }
    return null;
  }
}

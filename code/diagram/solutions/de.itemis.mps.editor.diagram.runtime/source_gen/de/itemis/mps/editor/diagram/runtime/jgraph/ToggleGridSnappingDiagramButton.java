package de.itemis.mps.editor.diagram.runtime.jgraph;

/*Generated by MPS */

import com.mxgraph.view.mxCellState;
import java.awt.Graphics2D;
import de.itemis.mps.editor.diagram.runtime.model.Bounds;
import com.intellij.ui.JBColor;

public class ToggleGridSnappingDiagramButton extends ContextButton {
  public ToggleGridSnappingDiagramButton(double size, mxCellState state) {
    super(size, state);
  }

  @Override
  protected void paintSymbol(Graphics2D g) {
    Bounds bounds = getBounds();
    int width = bounds.getWidthInt();
    int height = bounds.getHeightInt();
    int x = bounds.getXInt();
    int y = bounds.getYInt();

    int lineGap = 4;

    // draw vertical lines
    for (int lineX = x; lineX <= x + width; lineX += lineGap) {
      g.drawLine(lineX, y, lineX, y + height);
    }
    // draw horizontal lines
    for (int lineY = y; lineY <= y + height; lineY += lineGap) {
      g.drawLine(x, lineY, x + width, lineY);
    }

    if (this.getGraph().isGridEnabled()) {
      g.setColor(JBColor.YELLOW);
    }

    g.fillRect(x, y, lineGap * 2, lineGap * 2);
  }

  @Override
  public String getTooltip() {
    if (this.getGraph().isGridEnabled()) {
      return "Deactivate Grid Snapping";
    } else {
      return "Activate Grid Snapping";
    }
  }

  @Override
  protected void execute() {
    this.getGraph().setGridEnabled(!(this.getGraph().isGridEnabled()));
  }
}

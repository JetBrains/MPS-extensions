package de.itemis.mps.compare.editor;

/*Generated by MPS */

import jetbrains.mps.editor.runtime.descriptor.AbstractEditorBuilder;
import org.jetbrains.annotations.NotNull;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.openapi.editor.EditorContext;
import jetbrains.mps.openapi.editor.cells.EditorCell;
import jetbrains.mps.nodeEditor.cells.EditorCell_Collection;
import jetbrains.mps.nodeEditor.cellLayout.CellLayout_Indent;
import jetbrains.mps.openapi.editor.style.Style;
import jetbrains.mps.editor.runtime.style.StyleImpl;
import jetbrains.mps.editor.runtime.style.StyleAttributes;
import jetbrains.mps.nodeEditor.cells.EditorCell_Constant;
import jetbrains.mps.nodeEditor.MPSColors;
import nl.f1re.mps.editor.swing.runtime.EditorCell_IntelliJComponent;
import nl.f1re.mps.editor.swing.runtime.FontHelper;
import javax.swing.JComponent;
import jetbrains.mps.baseLanguage.closures.runtime._FunctionTypes;
import com.intellij.ui.components.JBCheckBox;
import jetbrains.mps.editor.runtime.TextBuilderImpl;
import de.itemis.mps.compare.behavior.IDiffable__BehaviorDescriptor;
import java.awt.event.ItemListener;
import java.awt.event.ItemEvent;

/*package*/ class DiffCheckBox_ComponentBuilder_a extends AbstractEditorBuilder {
  @NotNull
  private SNode myNode;

  public DiffCheckBox_ComponentBuilder_a(@NotNull EditorContext context, @NotNull SNode node) {
    super(context);
    myNode = node;
  }

  @NotNull
  @Override
  public SNode getNode() {
    return myNode;
  }

  /*package*/ EditorCell createCell() {
    return createCollection_0();
  }

  private EditorCell createCollection_0() {
    EditorCell_Collection editorCell = new EditorCell_Collection(getEditorContext(), myNode, new CellLayout_Indent());
    editorCell.setCellId("Collection_vrkzuc_a");
    Style style = new StyleImpl();
    style.set(StyleAttributes.SELECTABLE, false);
    editorCell.getStyle().putAll(style);
    editorCell.addEditorCell(createConstant_0());
    editorCell.addEditorCell(createCustomJComponent_0());
    return editorCell;
  }
  private EditorCell createConstant_0() {
    EditorCell_Constant editorCell = new EditorCell_Constant(getEditorContext(), myNode, "and show diff");
    editorCell.setCellId("Constant_vrkzuc_a0");
    Style style = new StyleImpl();
    style.set(StyleAttributes.TEXT_COLOR, getStyleRegistry().getSimpleColor(MPSColors.blue));
    editorCell.getStyle().putAll(style);
    editorCell.setDefaultText("");
    return editorCell;
  }
  private EditorCell createCustomJComponent_0() {
    EditorContext editorContext = getEditorContext();
    EditorCell_IntelliJComponent editorCell = new EditorCell_IntelliJComponent(getEditorContext(), myNode, _QueryFunction_JComponent_vrkzuc_a1a(), FontHelper.regular(), (JComponent component) -> {
      SNode node = myNode;
      String text = ((_FunctionTypes._return_P0_E0<String>) () -> String.valueOf(as_orshor_a0a0a0a0a0a1a4a0a1a01(component, JBCheckBox.class).isSelected())).invoke();
      return new TextBuilderImpl(text);
    });
    editorCell.setCellId("CustomJComponent_vrkzuc_b0");
    return editorCell;
  }
  private JComponent _QueryFunction_JComponent_vrkzuc_a1a() {
    JBCheckBox box = new JBCheckBox(" ");
    box.setSelected((boolean) IDiffable__BehaviorDescriptor.isDiffEnabled_id6Od11GY7tN$.invoke(myNode));
    box.addItemListener(new ItemListener() {
      @Override
      public void itemStateChanged(ItemEvent e) {
        if (e.getStateChange() == ItemEvent.SELECTED) {
          IDiffable__BehaviorDescriptor.setDiffFlag_id6Od11GY7tDO.invoke(myNode, ((boolean) true));
        } else {
          IDiffable__BehaviorDescriptor.setDiffFlag_id6Od11GY7tDO.invoke(myNode, ((boolean) false));
        }
      }
    });
    return box;
  }
  private static <T> T as_orshor_a0a0a0a0a0a1a4a0a1a01(Object o, Class<T> type) {
    return (type.isInstance(o) ? (T) o : null);
  }
}

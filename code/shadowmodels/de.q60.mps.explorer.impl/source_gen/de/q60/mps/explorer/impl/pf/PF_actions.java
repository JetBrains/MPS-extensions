package de.q60.mps.explorer.impl.pf;

/*Generated by MPS */

import de.q60.mps.polymorphicfunctions.runtime.PFModule;
import jetbrains.mps.logging.Logger;
import jetbrains.mps.baseLanguage.closures.runtime._FunctionTypes;
import de.q60.mps.polymorphicfunctions.runtime.IFunctionImplementation;
import java.util.List;
import de.q60.mps.polymorphicfunctions.runtime.IParameterType;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import java.util.ArrayList;
import de.q60.mps.polymorphicfunctions.runtime.ParameterType_Classifier;
import com.intellij.openapi.actionSystem.ActionManager;
import de.q60.mps.polymorphicfunctions.runtime.IPFContext;
import de.q60.mps.polymorphicfunctions.runtime.ParameterList;
import de.q60.mps.explorer.pf.ExplorerElement;
import java.util.Map;
import jetbrains.mps.internal.collections.runtime.MapSequence;
import java.util.HashMap;
import com.intellij.openapi.actionSystem.AnAction;
import com.intellij.openapi.actionSystem.DefaultActionGroup;
import com.intellij.openapi.actionSystem.Separator;
import javax.swing.Icon;

public class PF_actions extends PFModule {
  private static final Logger LOG = Logger.getLogger(PF_actions.class);
  public static final PF_actions INSTANCE = ((_FunctionTypes._return_P0_E0<PF_actions>) () -> {
    try {
      return new PF_actions();
    } catch (RuntimeException ex) {
      if (LOG.isErrorLevel()) {
        LOG.error("Failed to load " + PF_actions.class.getName(), ex);
      }
      throw ex;
    }
  }).invoke();
  private PF_actions() {
    myImplementations.put("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(ActionManager.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.explorer.impl.pf/PF_actions/buildTrace_1";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof ActionManager)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        ExplorerElement te = new ExplorerElement();
        te.text = "Actions";
        te.expandByDefault = true;

        final Map<String, String> parents = MapSequence.fromMap(new HashMap<String, String>());
        for (String parentId : ((ActionManager) _PFparameters.get(0)).getActionIds("")) {
          new Object() {
            public void collect(AnAction parent_) {
              DefaultActionGroup parent = as_5on7iy_a0a0a0a0a0a0f0f0a1a0a0c(parent_, DefaultActionGroup.class);
              if (parent == null) {
                return;
              }
              for (AnAction child : parent.getChildActionsOrStubs()) {
                String childId = ((ActionManager) _PFparameters.get(0)).getId(child);
                if ((childId != null && childId.length() > 0)) {
                  MapSequence.fromMap(parents).put(childId, parentId);
                }
                collect(child);
              }
            }
          }.collect(((ActionManager) _PFparameters.get(0)).getAction(parentId));
        }

        for (String actionId : ((ActionManager) _PFparameters.get(0)).getActionIds("")) {
          if (MapSequence.fromMap(parents).containsKey(actionId)) {
            continue;
          }
          AnAction action = ((ActionManager) _PFparameters.get(0)).getAction(actionId);
          te.addChild(action);
        }
        return te;
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    myImplementations.put("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(AnAction.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.explorer.pf.TraceBuilders_base.mainView");
      @Override
      public String getId() {
        return "de.q60.mps.explorer.impl.pf/PF_actions/buildTrace_0";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof AnAction)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        ExplorerElement te = new ExplorerElement();
        te.text = ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{((AnAction) _PFparameters.get(0))})));
        te.icon = ((AnAction) _PFparameters.get(0)).getTemplatePresentation().getIcon();
        te.detailViewRoot = ((AnAction) _PFparameters.get(0));
        return te;
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    myImplementations.put("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(DefaultActionGroup.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.explorer.pf.TraceBuilders_base.mainView");
      @Override
      public String getId() {
        return "de.q60.mps.explorer.impl.pf/PF_actions/buildTrace_1";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof DefaultActionGroup)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        ExplorerElement te = new ExplorerElement();
        te.text = ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{((DefaultActionGroup) _PFparameters.get(0))})));
        te.icon = ((DefaultActionGroup) _PFparameters.get(0)).getTemplatePresentation().getIcon();
        te.detailViewRoot = ((DefaultActionGroup) _PFparameters.get(0));
        for (AnAction child : ((DefaultActionGroup) _PFparameters.get(0)).getChildActionsOrStubs()) {
          te.addChild(child);
        }
        return te;
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    myImplementations.put("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(AnAction.class));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.explorer.impl.pf/PF_actions/toString_5";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof AnAction)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        String id = ActionManager.getInstance().getId(((AnAction) _PFparameters.get(0)));
        String text = ((AnAction) _PFparameters.get(0)).getTemplateText();
        String clsName = ((AnAction) _PFparameters.get(0)).getClass().getSimpleName();
        return id + " \"" + text + "\" [" + clsName + "]";
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    myImplementations.put("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(Separator.class));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.explorer.impl.pf/PF_actions/toString_7";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof Separator)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return "---------";
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    myImplementations.put("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(Icon.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.explorer.impl.pf/PF_actions/buildTrace_9";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof Icon)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        ExplorerElement te = new ExplorerElement();
        te.icon = ((Icon) _PFparameters.get(0));
        return te;
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
  }
  private static <T> T as_5on7iy_a0a0a0a0a0a0f0f0a1a0a0c(Object o, Class<T> type) {
    return (type.isInstance(o) ? (T) o : null);
  }
}

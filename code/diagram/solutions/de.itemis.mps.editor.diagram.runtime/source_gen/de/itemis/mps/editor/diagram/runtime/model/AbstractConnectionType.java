package de.itemis.mps.editor.diagram.runtime.model;

/*Generated by MPS */

import java.util.List;
import org.jetbrains.annotations.Nullable;
import javax.swing.Icon;
import java.awt.Graphics2D;
import java.awt.geom.Rectangle2D;
import java.awt.FontMetrics;

public abstract class AbstractConnectionType implements IConnectionType {
  @Deprecated
  public boolean canCreate(IConnectionEndpoint_Internal from, IConnectionEndpoint_Internal to, List<String> reasons) {
    return canCreate(from, to);
  }

  @Deprecated
  protected boolean canCreate(IConnectionEndpoint_Internal from, IConnectionEndpoint_Internal to) {
    return false;
  }

  @Override
  public boolean canCreate(IConnectionEndpoint from, IConnectionEndpoint to, List<String> reasons) {
    return canCreate(((ConnectionEndpointAdapter) from).getInternal(), ((ConnectionEndpointAdapter) to).getInternal(), reasons);
  }

  /**
   * 
   * @deprecated  Override the create method that doesn't expect a return value and remove usages of IAccessorFactory
   */
  @Nullable
  @Override
  @Deprecated
  public final IEdgeAccessor create(IConnectionEndpoint from, IConnectionEndpoint to, IAccessorFactory factory) {
    create(from, to);
    return null;
  }

  public void create(IConnectionEndpoint from, IConnectionEndpoint to) {
  }

  @Override
  public boolean isValidStart(IConnectionEndpoint endpoint) {
    return true;
  }

  @Override
  public boolean isValidEnd(IConnectionEndpoint endpoint) {
    return true;
  }

  @Override
  public Icon getIcon() {
    return null;
  }

  public void drawIcon(Graphics2D g, Rectangle2D bounds) {
    // Use the first character of the name as the icon
    double padding = bounds.getWidth() * 0.1;
    bounds = new Rectangle2D.Double(bounds.getX() + padding, bounds.getY() + padding, bounds.getWidth() - padding * 2, bounds.getHeight() - padding * 2);
    g.setFont(g.getFont().deriveFont(7.0f));
    FontMetrics fontMetrics = g.getFontMetrics();
    String text = getName().substring(0, 1);
    Rectangle2D stringBounds = fontMetrics.getStringBounds(text, g);
    g.translate(bounds.getX(), bounds.getY());
    g.scale(bounds.getWidth() / stringBounds.getWidth(), bounds.getHeight() / stringBounds.getHeight());
    g.translate(-stringBounds.getX(), -stringBounds.getY());
    g.drawString(text, 0.0f, 0.0f);
  }

  public void extend_AbstractConnectionType_instead_of_implementing_IConnectionType() {
  }
  public boolean showContextButton() {
    return true;
  }
}

package com.mbeddr.mpsutil.grammarcells.runtime;

/*Generated by MPS */

import org.jetbrains.annotations.Nullable;
import java.util.List;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import java.util.ArrayList;

public class StringLiteralTokenizer implements ITokenizer {
  @Nullable
  public List<String> tokenize(String textBeforeCaret, String textAfterCaret) {
    String text = textBeforeCaret + textAfterCaret;

    List<String> result = ListSequence.fromList(new ArrayList<String>());
    StringBuffer currentToken = new StringBuffer();
    boolean inString = true;
    for (char c : text.toCharArray()) {
      if (c == '\"') {
        if (inString) {
          ListSequence.fromList(result).addElement(currentToken.toString());
          currentToken = new StringBuffer();
        }
        ListSequence.fromList(result).addElement(Character.toString(c));
        inString = !(inString);
      } else {
        if (inString) {
          currentToken.append(c);
        } else {
          if (c != ' ') {
            ListSequence.fromList(result).addElement(Character.toString(c));
          }
        }
      }
    }
    if (currentToken.length() > 0) {
      ListSequence.fromList(result).addElement(currentToken.toString());
    }

    return result;
  }
}

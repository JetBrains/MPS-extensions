package de.q60.mps.shadowmodels.runtime.plugin;

/*Generated by MPS */

import javax.swing.JPanel;
import java.awt.GridLayout;
import de.q60.mps.util.invalidation.IInvalidatable;
import jetbrains.mps.internal.collections.runtime.Sequence;
import de.q60.mps.util.invalidation.Invalidator;
import javax.swing.JCheckBox;

public class InvalidatorUI extends JPanel {

  public InvalidatorUI() {
    setLayout(new GridLayout(0, 1));
    for (IInvalidatable invalidatable : Sequence.fromIterable(Invalidator.getInstance().getInvalidatables()).sort((it) -> it.getText(), true)) {
      add(new InvalidatableCheckbox(invalidatable));
    }
  }

  public Iterable<IInvalidatable> getSelected() {
    return Sequence.fromIterable(Sequence.fromArray(getComponents())).ofType(InvalidatableCheckbox.class).where((it) -> it.isSelected()).select((it) -> it.invalidatable);
  }

  public class InvalidatableCheckbox extends JCheckBox {
    private IInvalidatable invalidatable;
    public InvalidatableCheckbox(IInvalidatable invalidatable) {
      this.invalidatable = invalidatable;
      setText(invalidatable.getText());
      setSelected(true);
    }
  }
}

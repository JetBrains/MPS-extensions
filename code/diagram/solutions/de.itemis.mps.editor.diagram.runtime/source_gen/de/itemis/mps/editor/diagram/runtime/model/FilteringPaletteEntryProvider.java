package de.itemis.mps.editor.diagram.runtime.model;

/*Generated by MPS */

import jetbrains.mps.internal.collections.runtime.Sequence;
import org.jetbrains.mps.openapi.model.SNode;
import de.itemis.mps.editor.diagram.runtime.DiagramUtil;
import org.jetbrains.mps.openapi.language.SAbstractConcept;

public class FilteringPaletteEntryProvider implements IPaletteEntryProvider {

  private IPaletteEntryProvider myUnfiltered;

  public FilteringPaletteEntryProvider(IPaletteEntryProvider unfiltered) {
    myUnfiltered = unfiltered;
  }

  public Iterable<IPaletteEntry> getEntries() {
    return Sequence.fromIterable(myUnfiltered.getEntries()).where((it) -> !(remove(it)));
  }

  protected boolean remove(IPaletteEntry entry) {
    SNode targetNode = null;
    if (entry instanceof SubstituteActionPaletteEntry) {
      targetNode = DiagramUtil.getReferenceTarget(((SubstituteActionPaletteEntry) entry).getSubstituteAction());
    }
    return remove(entry.getOutputConcept(), targetNode);
  }

  protected boolean remove(SAbstractConcept concept, SNode targetNode) {
    return false;
  }
}

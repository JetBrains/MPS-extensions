package de.q60.mps.shadowmodels.runtime.smodel;

/*Generated by MPS */

import org.jetbrains.mps.openapi.module.SModule;
import org.jetbrains.mps.openapi.module.SModuleId;
import java.util.Map;
import org.jetbrains.mps.openapi.module.SRepository;
import jetbrains.mps.internal.collections.runtime.MapSequence;
import java.util.WeakHashMap;
import java.util.concurrent.atomic.AtomicInteger;
import org.jetbrains.mps.openapi.module.SModuleReference;
import org.jetbrains.annotations.NotNull;
import org.jetbrains.annotations.Nullable;
import java.lang.ref.WeakReference;
import org.jetbrains.mps.openapi.module.SDependency;
import java.util.Collections;
import java.util.Set;
import org.jetbrains.mps.openapi.language.SLanguage;
import org.jetbrains.mps.openapi.model.SModel;
import org.jetbrains.mps.openapi.model.SModelId;
import org.jetbrains.mps.openapi.module.SModuleFacet;
import org.jetbrains.mps.openapi.persistence.ModelRoot;
import org.jetbrains.mps.openapi.module.SModuleListener;

@Deprecated
public class SM_DummySModule implements SModule, SModuleId {

  private static Map<SRepository, SM_DummySModule> instances = MapSequence.fromMap(new WeakHashMap<SRepository, SM_DummySModule>());
  private static final AtomicInteger ID_SEQUENCE = new AtomicInteger();

  public static SM_DummySModule getInstance(SRepository repository) {
    SM_DummySModule instance = MapSequence.fromMap(instances).get(repository);
    if (instance == null) {
      instance = new SM_DummySModule(repository);
      MapSequence.fromMap(instances).put(repository, instance);
    }
    return instance;
  }

  private int id = ID_SEQUENCE.incrementAndGet();
  private String name = "shadowmodels.dummy.module" + id;
  private SModuleId moduleId = new SModuleId() {

  };
  private SModuleReference moduleReference = new SModuleReference() {
    @NotNull
    public SModuleId getModuleId() {
      return moduleId;
    }
    @Nullable
    public String getModuleName() {
      return name;
    }
    @Nullable
    public SModule resolve(@NotNull SRepository p0) {
      return SM_DummySModule.this;
    }
  };

  private WeakReference<SRepository> repository;

  @Deprecated
  public SM_DummySModule(SRepository repository) {
    this.repository = (repository == null ? null : new WeakReference<SRepository>(repository));
  }
  @Override
  public SRepository getRepository() {
    return (repository == null ? null : repository.get());
  }

  @Override
  public SModuleId getModuleId() {
    return this;
  }
  @Override
  public String getModuleName() {
    return name;
  }
  @NotNull
  @Override
  public SModuleReference getModuleReference() {
    return moduleReference;
  }
  @Override
  public boolean isReadOnly() {
    return true;
  }
  @Override
  public boolean isPackaged() {
    return false;
  }
  @Override
  public Iterable<SDependency> getDeclaredDependencies() {
    return Collections.<SDependency>emptyList();
  }
  @Override
  public Set<SLanguage> getUsedLanguages() {
    return Collections.<SLanguage>emptySet();
  }
  @Override
  public int getUsedLanguageVersion(@NotNull SLanguage language) {
    return -1;
  }
  @Nullable
  @Override
  public SModel getModel(SModelId id) {
    throw new UnsupportedOperationException();
  }
  @NotNull
  @Override
  public Iterable<SModel> getModels() {
    throw new UnsupportedOperationException();
  }
  @NotNull
  @Override
  public Iterable<SModuleFacet> getFacets() {
    return Collections.<SModuleFacet>emptyList();
  }
  @Nullable
  @Override
  public <T extends SModuleFacet> T getFacet(Class<T> aClass) {
    return null;
  }
  @Override
  public Iterable<ModelRoot> getModelRoots() {
    throw new UnsupportedOperationException();
  }
  @Override
  public void addModuleListener(SModuleListener listener) {
    throw new UnsupportedOperationException();
  }
  @Override
  public void removeModuleListener(SModuleListener listener) {
    throw new UnsupportedOperationException();
  }
}

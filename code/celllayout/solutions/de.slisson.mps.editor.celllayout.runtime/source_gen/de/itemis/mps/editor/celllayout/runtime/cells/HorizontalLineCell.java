package de.itemis.mps.editor.celllayout.runtime.cells;

/*Generated by MPS */

import jetbrains.mps.nodeEditor.cells.EditorCell_Basic;
import jetbrains.mps.openapi.editor.style.StyleAttribute;
import jetbrains.mps.editor.runtime.style.StyleAttributes;
import java.awt.Color;
import org.jetbrains.annotations.NotNull;
import jetbrains.mps.openapi.editor.EditorContext;
import org.jetbrains.mps.openapi.model.SNode;
import java.awt.Graphics;
import jetbrains.mps.nodeEditor.cells.ParentSettings;
import jetbrains.mps.openapi.editor.TextBuilder;
import jetbrains.mps.editor.runtime.TextBuilderImpl;

public class HorizontalLineCell extends EditorCell_Basic {
  private static final StyleAttribute<Integer> MARGIN_TOP = StyleAttributes.getInstance().<Integer>getAttribute("de.itemis.mps.editor.celllayout.styles", "_margin-top");
  private static final StyleAttribute<Integer> MARGIN_BOTTOM = StyleAttributes.getInstance().<Integer>getAttribute("de.itemis.mps.editor.celllayout.styles", "_margin-bottom");
  private static final StyleAttribute<Integer> HORIZONTAL_LINE_WIDTH = StyleAttributes.getInstance().<Integer>getAttribute("de.itemis.mps.editor.celllayout.styles", "_horizontal-line-width");
  private static final StyleAttribute<Color> HORIZONTAL_LINE_COLOR = StyleAttributes.getInstance().<Color>getAttribute("de.itemis.mps.editor.celllayout.styles", "_horizontal-line-color");
  private static final StyleAttribute<Boolean> GROW_X = StyleAttributes.getInstance().<Boolean>getAttribute("de.itemis.mps.editor.celllayout.styles", "_grow-x");
  private static final StyleAttribute<Boolean> PUSH_X = StyleAttributes.getInstance().<Boolean>getAttribute("de.itemis.mps.editor.celllayout.styles", "_push-x");

  public HorizontalLineCell(@NotNull EditorContext editorContext, SNode snode) {
    super(editorContext, snode);
    getStyle().set(PUSH_X, true);
    getStyle().set(GROW_X, true);
    setSelectable(false);
  }

  public void setColor(Color color) {
    getStyle().set(HORIZONTAL_LINE_COLOR, color);
  }

  public void setLineWidth(int lineWidth) {
    getStyle().set(HORIZONTAL_LINE_WIDTH, lineWidth);
  }

  public void setMarginTop(int margin) {
    getStyle().set(MARGIN_TOP, margin);
  }

  public void setMarginBottom(int margin) {
    getStyle().set(MARGIN_BOTTOM, margin);
  }

  protected void paintContent(Graphics g_, ParentSettings settings) {
    Graphics g = g_.create();
    try {
      g.setColor(getStyle().get(HORIZONTAL_LINE_COLOR));
      g.fillRect(getX(), getY(), getWidth(), getHeight());
    } finally {
      g.dispose();
    }
  }

  @Override
  protected void relayoutImpl() {
    setWidth(10);
    setHeight(getStyle().get(HORIZONTAL_LINE_WIDTH));
  }

  @Override
  public TextBuilder renderText() {
    int widthOfOneDash = getEditorComponent().getEditorComponentSettings().getWidth('-', 1);
    int numberOfDashes = getWidth() / widthOfOneDash;
    return new TextBuilderImpl(String.valueOf('-').repeat(numberOfDashes));
  }
}

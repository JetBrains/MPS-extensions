package de.itemis.mps.editor.diagram.runtime.jgraph;

/*Generated by MPS */

import java.util.Map;
import de.itemis.mps.editor.diagram.runtime.model.IDiagramElement;
import jetbrains.mps.internal.collections.runtime.MapSequence;
import java.util.HashMap;
import com.mxgraph.model.mxCell;
import org.jetbrains.annotations.Nullable;
import java.util.Objects;
import de.itemis.mps.editor.diagram.runtime.model.Port;

public class Model2GraphElementMapper {
  private Map<String, IDiagramElement> myCellId2diagramElement = MapSequence.fromMap(new HashMap<String, IDiagramElement>());
  private Map<IDiagramElement, String> myDiagramElement2cellId = MapSequence.fromMap(new HashMap<IDiagramElement, String>());
  private Map<String, String> myCellId2PortName = MapSequence.fromMap(new HashMap<String, String>());
  private Map<String, String> myPortName2CellId = MapSequence.fromMap(new HashMap<String, String>());

  public void assign(mxCell cell, IDiagramElement diagramElement) {
    assign(cell.getId(), diagramElement);
  }

  public void assign(String cellId, IDiagramElement diagramElement) {
    if (cellId == null) {
      throw new NullPointerException("cellId == null");
    }
    if (diagramElement == null) {
      throw new NullPointerException("diagramElement == null");
    }
    MapSequence.fromMap(myCellId2diagramElement).put(cellId, diagramElement);
    MapSequence.fromMap(myDiagramElement2cellId).put(diagramElement, cellId);
  }

  @Nullable
  public String getCellId(IDiagramElement diagramElement) {
    return MapSequence.fromMap(myDiagramElement2cellId).get(diagramElement);
  }

  public IDiagramElement getDiagramElement(mxCell cell) {
    if (cell == null) {
      return null;
    }
    return MapSequence.fromMap(myCellId2diagramElement).get(cell.getId());
  }

  public IDiagramElement getDiagramElement(String cellId) {
    return MapSequence.fromMap(myCellId2diagramElement).get(cellId);
  }

  public void remove(IDiagramElement diagramElement) {
    String cellId = getCellId(diagramElement);
    MapSequence.fromMap(myCellId2diagramElement).removeKey(cellId);
    MapSequence.fromMap(myDiagramElement2cellId).removeKey(diagramElement);
  }

  public void remove(String cellId) {
    IDiagramElement diagramElement = getDiagramElement(cellId);
    if (Objects.equals(MapSequence.fromMap(myDiagramElement2cellId).get(diagramElement), cellId)) {
      MapSequence.fromMap(myDiagramElement2cellId).removeKey(diagramElement);
    }
    MapSequence.fromMap(myCellId2diagramElement).removeKey(cellId);
  }

  public void remove(mxCell cell) {
    remove(cell.getId());
  }

  public void assignCellId2PortName(String cellId, String portName) {
    MapSequence.fromMap(myCellId2PortName).put(cellId, portName);
    MapSequence.fromMap(myPortName2CellId).put(portName, cellId);
  }

  public void assign(mxCell cell, Port port) {
    assignCellId2PortName(cell.getId(), port.getName());
  }

  public String getPortName(String cellId) {
    return MapSequence.fromMap(myCellId2PortName).get(cellId);
  }

  public String getPortName(mxCell cell) {
    return getPortName(cell.getId());
  }
}

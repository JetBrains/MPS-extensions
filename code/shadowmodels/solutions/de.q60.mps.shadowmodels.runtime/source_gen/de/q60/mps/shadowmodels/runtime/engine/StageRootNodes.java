package de.q60.mps.shadowmodels.runtime.engine;

/*Generated by MPS */

import jetbrains.mps.internal.collections.runtime.Sequence;
import jetbrains.mps.baseLanguage.closures.runtime._FunctionTypes;

public class StageRootNodes implements IOutputNodesReference {
  private IStageReference stageRef;

  private StageRootNodes() {
    // for deserialization
  }

  public StageRootNodes(IStageReference stageRef) {
    this.stageRef = stageRef;
  }

  @Override
  public Iterable<IOutputNodeReference> getNodes(final ITransformationEngine engine) {
    ISubgraphStage resolveStage = engine.resolveStage(stageRef);
    return Sequence.fromIterable(resolveStage.getRoots()).translate(new _FunctionTypes._return_P1_E0<Iterable<IOutputNodeReference>, IUniqueContainmentTarget>() {
      public Iterable<IOutputNodeReference> invoke(IUniqueContainmentTarget it) {
        return new ContainmentTargetRootNodes(stageRef, it).getNodes(engine);
      }
    });
  }

  @Override
  public boolean equals(Object o) {
    if (this == o) {
      return true;
    }
    if (o == null || this.getClass() != o.getClass()) {
      return false;
    }

    StageRootNodes that = (StageRootNodes) o;
    if ((stageRef != null ? !(stageRef.equals(that.stageRef)) : that.stageRef != null)) {
      return false;
    }

    return true;
  }

  @Override
  public int hashCode() {
    int result = 0;
    result = 31 * result + ((stageRef != null ? ((Object) stageRef).hashCode() : 0));
    return result;
  }
}

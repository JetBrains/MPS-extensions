package de.itemis.mps.editor.diagram.styles.editor;

/*Generated by MPS */

import java.awt.Graphics2D;
import org.jetbrains.annotations.Nullable;
import jetbrains.mps.openapi.editor.style.Style;
import jetbrains.mps.editor.runtime.style.StyleAttributes;
import java.awt.Color;
import java.awt.Stroke;
import java.awt.BasicStroke;

public class StyleUtils {
  public static void configureLineStyle(Graphics2D g, @Nullable Style style, double scale) {
    if (style == null) {
      return;
    }
    g.setColor(style.get(StyleAttributes.getInstance().<Color>getAttribute("de.itemis.mps.editor.diagram.styles", "__line-color")));
    float lineWidth = style.get(StyleAttributes.getInstance().<Float>getAttribute("de.itemis.mps.editor.diagram.styles", "__line-width")) * ((float) scale);
    LineStyle lineStyle = style.get(StyleAttributes.getInstance().<LineStyle>getAttribute("de.itemis.mps.editor.diagram.styles", "__line-style"));
    if (lineWidth < 0) {
      lineWidth = 0;
    }
    g.setStroke(createStroke(lineWidth, lineStyle));
  }

  public static Stroke createStroke(float lineWidth, LineStyle lineStyle) {
    switch (lineStyle) {
      case DASHED:
        return new BasicStroke(lineWidth, BasicStroke.CAP_BUTT, BasicStroke.JOIN_MITER, 10.0f, new float[]{lineWidth * 3.0f, lineWidth * 2.0f}, 0.0f);
      case SOLID:
        return new BasicStroke(lineWidth);
      default:
        throw new RuntimeException("Unknown line style: " + lineStyle);
    }
  }
}

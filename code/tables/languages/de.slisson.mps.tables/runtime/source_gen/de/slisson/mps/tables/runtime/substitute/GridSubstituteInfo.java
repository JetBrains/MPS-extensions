package de.slisson.mps.tables.runtime.substitute;

/*Generated by MPS */

import jetbrains.mps.openapi.editor.cells.SubstituteInfo;
import de.slisson.mps.tables.runtime.cells.EditorCell_GridCell;
import de.slisson.mps.tables.runtime.gridmodel.Grid;
import de.slisson.mps.tables.runtime.simplegrid.GridPosition;
import jetbrains.mps.openapi.editor.EditorContext;
import org.jetbrains.mps.openapi.model.SNode;
import de.slisson.mps.hacks.editor.SubstituteUtil;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import java.util.List;
import jetbrains.mps.openapi.editor.cells.SubstituteAction;
import java.util.ArrayList;
import jetbrains.mps.openapi.editor.cells.EditorCell;

public class GridSubstituteInfo implements SubstituteInfo {
  private EditorCell_GridCell myGridCell;
  private SubstituteInfo myDelegate;
  private boolean initialized = false;

  public GridSubstituteInfo(EditorCell_GridCell gridCell) {
    myGridCell = gridCell;
  }

  public Grid getGrid() {
    return myGridCell.getTable().getGrid();
  }

  public GridPosition getPosition() {
    return myGridCell.getGridPosition();
  }

  public EditorContext getEditorContext() {
    return myGridCell.getContext();
  }

  private void init() {
    if (initialized) {
      return;
    }

    if (myDelegate == null) {
      final SNode wrappedNode = myGridCell.getWrappedCell().getSNode();
      if (wrappedNode != myGridCell.getTable().getSNode()) {
        getEditorContext().getRepository().getModelAccess().runReadAction(() -> myDelegate = SubstituteUtil.forChild(myGridCell.getContext(), SNodeOperations.getParent(wrappedNode), wrappedNode, wrappedNode.getContainmentLink()));
      }
    }

    initialized = true;
  }

  public void reset() {
    myDelegate = null;
    initialized = false;
  }

  private SubstituteInfo getDelegate() {
    init();
    return myDelegate;
  }

  public List<SubstituteAction> getMatchingActions(String string, boolean b) {
    List<SubstituteAction> actions = check_nx3vsn_a0a0s(getDelegate(), string, b, this);
    return (actions == null ? new ArrayList() : actions);
  }
  public String getOriginalText() {
    return check_nx3vsn_a0a91(getDelegate(), this);
  }
  public List<SubstituteAction> getSmartMatchingActions(String string, boolean b, EditorCell cell) {
    List<SubstituteAction> actions = check_nx3vsn_a0a0u(getDelegate(), string, b, cell, this);
    return (actions == null ? new ArrayList() : actions);
  }
  public boolean hasExactlyNActions(String string, boolean b, int i) {
    return check_nx3vsn_a0a12(getDelegate(), string, b, i, this);
  }
  public void invalidateActions() {
    check_nx3vsn_a0a22(getDelegate(), this);
  }
  public void setOriginalText(String string) {
    check_nx3vsn_a0a32(getDelegate(), string, this);
  }
  private static List<SubstituteAction> check_nx3vsn_a0a0s(SubstituteInfo checkedDotOperand, String string, Boolean b, GridSubstituteInfo checkedDotThisExpression) {
    if (null != checkedDotOperand) {
      return checkedDotOperand.getMatchingActions(string, b);
    }
    return null;
  }
  private static String check_nx3vsn_a0a91(SubstituteInfo checkedDotOperand, GridSubstituteInfo checkedDotThisExpression) {
    if (null != checkedDotOperand) {
      return checkedDotOperand.getOriginalText();
    }
    return null;
  }
  private static List<SubstituteAction> check_nx3vsn_a0a0u(SubstituteInfo checkedDotOperand, String string, Boolean b, EditorCell cell, GridSubstituteInfo checkedDotThisExpression) {
    if (null != checkedDotOperand) {
      return checkedDotOperand.getSmartMatchingActions(string, b, cell);
    }
    return null;
  }
  private static boolean check_nx3vsn_a0a12(SubstituteInfo checkedDotOperand, String string, Boolean b, Integer i, GridSubstituteInfo checkedDotThisExpression) {
    if (null != checkedDotOperand) {
      return checkedDotOperand.hasExactlyNActions(string, b, i);
    }
    return false;
  }
  private static void check_nx3vsn_a0a22(SubstituteInfo checkedDotOperand, GridSubstituteInfo checkedDotThisExpression) {
    if (null != checkedDotOperand) {
      checkedDotOperand.invalidateActions();
    }

  }
  private static void check_nx3vsn_a0a32(SubstituteInfo checkedDotOperand, String string, GridSubstituteInfo checkedDotThisExpression) {
    if (null != checkedDotOperand) {
      checkedDotOperand.setOriginalText(string);
    }

  }
}

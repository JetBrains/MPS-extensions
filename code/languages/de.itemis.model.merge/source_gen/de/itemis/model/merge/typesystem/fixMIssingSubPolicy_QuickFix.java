package de.itemis.model.merge.typesystem;

/*Generated by MPS */

import jetbrains.mps.errors.QuickFix_Runtime;
import jetbrains.mps.smodel.SNodePointer;
import org.jetbrains.mps.openapi.model.SNode;
import java.util.Set;
import org.jetbrains.mps.openapi.language.SEnumerationLiteral;
import jetbrains.mps.internal.collections.runtime.SetSequence;
import java.util.HashSet;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SEnumOperations;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import jetbrains.mps.smodel.builder.SNodeBuilder;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import org.jetbrains.mps.openapi.language.SProperty;
import org.jetbrains.mps.openapi.language.SConcept;

public class fixMIssingSubPolicy_QuickFix extends QuickFix_Runtime {
  public fixMIssingSubPolicy_QuickFix() {
    super(new SNodePointer("r:02b6652e-c87d-4bb2-bfc0-4b5c0d5b9442(de.itemis.model.merge.typesystem)", "2904525370365843971"));
  }
  public String getDescription(SNode node) {
    return "Add Missing Sub-Policies";
  }
  public void execute(SNode node) {
    Set<SEnumerationLiteral> presentMembers = SetSequence.fromSetWithValues(new HashSet<SEnumerationLiteral>(), ListSequence.fromList(SLinkOperations.getChildren(((SNode) fixMIssingSubPolicy_QuickFix.this.getField("mcp")[0]), LINKS.subPolicy$$EhP)).select((it) -> SPropertyOperations.getEnum(it, PROPS.subPolicy$jBml)));
    Set<SEnumerationLiteral> allMembers = SetSequence.fromSetWithValues(new HashSet<SEnumerationLiteral>(), SEnumOperations.getMembers(MetaAdapterFactory.getEnumeration(0x539e893908ef497cL, 0xa5fd25dd10137a55L, 0x1ed6b4fde1bea6deL, "de.itemis.model.merge.structure.SubPolicy")));

    for (SEnumerationLiteral missingMember : SetSequence.fromSet(allMembers).subtract(SetSequence.fromSet(presentMembers))) {
      ListSequence.fromList(SLinkOperations.getChildren(((SNode) fixMIssingSubPolicy_QuickFix.this.getField("mcp")[0]), LINKS.subPolicy$$EhP)).addElement(createSubPolicyContainer_po691v_a0a0a3a2(missingMember));
    }
  }
  private static SNode createSubPolicyContainer_po691v_a0a0a3a2(SEnumerationLiteral p0) {
    SNodeBuilder n0 = new SNodeBuilder().init(CONCEPTS.SubPolicyContainer$tJ);
    n0.setProperty(PROPS.subPolicy$jBml, SPropertyOperations.serializeEnummember(p0));
    n0.forChild(LINKS.action$nr8l).initNull();
    return n0.getResult();
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink subPolicy$$EhP = MetaAdapterFactory.getContainmentLink(0x539e893908ef497cL, 0xa5fd25dd10137a55L, 0x74e2e0579b2f965fL, 0x74e2e0579b2f9660L, "subPolicy");
    /*package*/ static final SContainmentLink action$nr8l = MetaAdapterFactory.getContainmentLink(0x539e893908ef497cL, 0xa5fd25dd10137a55L, 0x1ed6b4fde1c3243aL, 0x1ed6b4fde1c4a617L, "action");
  }

  private static final class PROPS {
    /*package*/ static final SProperty subPolicy$jBml = MetaAdapterFactory.getProperty(0x539e893908ef497cL, 0xa5fd25dd10137a55L, 0x1ed6b4fde1c3243aL, 0x1ed6b4fde1c3243bL, "subPolicy");
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept SubPolicyContainer$tJ = MetaAdapterFactory.getConcept(0x539e893908ef497cL, 0xa5fd25dd10137a55L, 0x1ed6b4fde1c3243aL, "de.itemis.model.merge.structure.SubPolicyContainer");
  }
}

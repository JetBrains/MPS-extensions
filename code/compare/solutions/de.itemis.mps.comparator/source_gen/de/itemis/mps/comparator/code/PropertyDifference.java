package de.itemis.mps.comparator.code;

/*Generated by MPS */

import org.jetbrains.mps.openapi.language.SProperty;
import org.jetbrains.mps.openapi.model.SNode;
import java.util.List;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import java.util.ArrayList;
import java.util.Objects;
import jetbrains.mps.smodel.SNodeUtil;

public class PropertyDifference extends NodeDifference {

  private SProperty property;

  protected PropertyDifference(SNode expected, SNode actual, String expectedName, String actualName, SProperty property) {
    super(expected, actual, expectedName, actualName);
    this.property = property;
  }

  public SProperty getProperty() {
    return property;
  }

  public List<NodeDifference> getNestedDifferences() {
    return ListSequence.fromList(new ArrayList<NodeDifference>());
  }

  protected String getDescription(String nameForA, String nameForB) {
    StringBuilder description = new StringBuilder();
    if (Objects.equals(property, SNodeUtil.property_INamedConcept_name)) {
      description.append("name (property) is different: expected '");
      description.append(nameForA);
      description.append("' got '");
      description.append(nameForB);
      description.append("'");
    } else {
      description.append(property.getName());
      description.append(" (property) is different: expected ");
      description.append(nameForA);
      description.append(" = ");
      String expected = getExpected().getProperty(property);
      if (expected != null) {
        description.append("'");
      }
      description.append(expected);
      if (expected != null) {
        description.append("'");
      }
      description.append(", got ");
      description.append(nameForB);
      String actual = getActual().getProperty(property);
      description.append(" = ");
      if (actual != null) {
        description.append("'");
      }
      description.append(actual);
      if (actual != null) {
        description.append("'");
      }
    }
    return description.toString();
  }

  public String getPropertyValueForA() {
    return getExpected().getProperty(property);
  }

  public String getPropertyValueForB() {
    return getActual().getProperty(property);
  }

}

package de.itemis.mps.editor.diagram.runtime.model;

/*Generated by MPS */

import org.jetbrains.annotations.Nullable;
import org.jetbrains.mps.openapi.model.SNode;
import org.jetbrains.annotations.NotNull;

public class EndpointUtil {

  @Nullable
  public static Box getBox(@Nullable IConnectionEndpoint_Internal endpoint) {
    if (endpoint instanceof Box) {
      return ((Box) endpoint);
    } else if (endpoint instanceof Port) {
      return ((Port) endpoint).getBox();
    } else {
      return null;
    }
  }

  @Nullable
  public static Port getPort(@Nullable IConnectionEndpoint_Internal endpoint) {
    if (endpoint instanceof Port) {
      return ((Port) endpoint);
    } else {
      return null;
    }
  }

  @Nullable
  public static SNode getSNode(@Nullable IConnectionEndpoint_Internal endpoint) {
    return check_tu97sb_a0a5(getBox(endpoint));
  }

  @Nullable
  public static String getPortName(@Nullable IConnectionEndpoint_Internal endpoint) {
    return check_tu97sb_a0a7(getPort(endpoint));
  }

  @Nullable
  public static IConnectionEndpoint_Internal getEndpoint(@Nullable Box box, @Nullable String portName) {
    if (box == null) {
      return null;
    }
    if (portName == null) {
      return box;
    }
    Port port = box.getPort(portName);
    if (port != null) {
      return port;
    }
    return box;
  }

  public static IAccessorKey createAccessorKeyForSNode(@NotNull SNode snode) {
    return new AccessorKey(createIdForSNode(snode));
  }

  public static String createIdForSNode(@NotNull SNode snode) {
    return snode.getNodeId().toString();
  }

  @NotNull
  public static IConnectionEndpointReference createEndpointReferenceForNode(@NotNull SNode snode) {
    return createEndpointReferenceAccessorKey(createAccessorKeyForSNode(snode));
  }
  @Nullable
  public static IConnectionEndpointReference createEndpointReferenceForNodeSafe(@Nullable SNode snode) {
    if (snode == null) {
      return null;
    }
    return createEndpointReferenceForNode(snode);
  }

  @NotNull
  public static IConnectionEndpointReference createEndpointReferenceForPort(@NotNull SNode snode, @Nullable String portName) {
    if (portName == null) {
      return createEndpointReferenceForNode(snode);
    } else {
      return new PortEndpointReference(createEndpointReferenceForNode(snode), portName);
    }
  }
  @Nullable
  public static IConnectionEndpointReference createEndpointReferenceForPortSafe(@Nullable SNode snode, @Nullable String portName) {
    if (snode == null) {
      return null;
    }
    return createEndpointReferenceForPort(snode, portName);
  }

  @NotNull
  public static IConnectionEndpointReference createEndpointReferenceForPort(@NotNull IConnectionEndpointReference boxEndpoint, @Nullable String portName) {
    if (portName == null) {
      return boxEndpoint;
    } else {
      return new PortEndpointReference(boxEndpoint, portName);
    }
  }

  @Nullable
  public static IConnectionEndpointReference createEndpointReferenceForPortSafe(@Nullable IConnectionEndpointReference boxEndpoint, @Nullable String portName) {
    if (portName == null || boxEndpoint == null) {
      return boxEndpoint;
    } else {
      return new PortEndpointReference(boxEndpoint, portName);
    }
  }

  @NotNull
  public static IConnectionEndpointReference createEndpointReferenceAccessorKey(@NotNull IAccessorKey key) {
    return new AccessorKeyEnpointReference(key);
  }

  @NotNull
  public static IConnectionEndpointReference createEndpointReferenceForId(@NotNull String id) {
    return new AccessorKeyEnpointReference(new AccessorKey(id));
  }

  @Nullable
  public static IConnectionEndpointReference createEndpointReferenceForIdSafe(@Nullable String id) {
    if (id == null) {
      return null;
    }
    return createEndpointReferenceForId(id);
  }

  private static SNode check_tu97sb_a0a5(Box checkedDotOperand) {
    if (null != checkedDotOperand) {
      return checkedDotOperand.getSNode();
    }
    return null;
  }
  private static String check_tu97sb_a0a7(Port checkedDotOperand) {
    if (null != checkedDotOperand) {
      return checkedDotOperand.getName();
    }
    return null;
  }
}

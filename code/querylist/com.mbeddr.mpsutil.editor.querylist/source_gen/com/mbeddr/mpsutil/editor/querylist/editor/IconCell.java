package com.mbeddr.mpsutil.editor.querylist.editor;

/*Generated by MPS */

import jetbrains.mps.nodeEditor.AbstractCellProvider;
import javax.swing.Icon;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.openapi.editor.cells.EditorCell;
import jetbrains.mps.openapi.editor.EditorContext;
import jetbrains.mps.nodeEditor.cells.EditorCell_Basic;
import java.awt.Graphics;
import jetbrains.mps.nodeEditor.cells.ParentSettings;
import java.awt.image.BufferedImage;
import jetbrains.mps.nodeEditor.cells.EditorCell_Collection;

public class IconCell extends AbstractCellProvider {

  private Icon icon;
  private int voffset;

  public IconCell(SNode node, Icon icon, int voffset) {
    super(node);
    this.icon = icon;
    this.voffset = voffset;
  }

  @Override
  public EditorCell createEditorCell(EditorContext context) {
    return new EditorCell_Basic(context, getSNode()) {
      @Override
      protected void paintContent(Graphics g, ParentSettings parentSettings) {
        BufferedImage iconImage = new BufferedImage(icon.getIconWidth(), icon.getIconHeight(), BufferedImage.TYPE_INT_ARGB);
        icon.paintIcon(null, iconImage.getGraphics(), 0, 0);
        EditorCell_Collection parent = this.getParent();
        g.drawImage(iconImage, parent.getX(), parent.getY() + voffset, null);
      }

      @Override
      protected void relayoutImpl() {
        this.myWidth = icon.getIconWidth();
        this.myHeight = icon.getIconHeight();
      }
    };
  }


}

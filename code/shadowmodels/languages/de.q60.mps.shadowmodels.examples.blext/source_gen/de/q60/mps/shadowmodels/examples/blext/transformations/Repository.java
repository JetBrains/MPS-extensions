package de.q60.mps.shadowmodels.examples.blext.transformations;

/*Generated by MPS */

import de.q60.mps.polymorphicfunctions.runtime.PFModule;
import jetbrains.mps.logging.Logger;
import jetbrains.mps.baseLanguage.closures.runtime._FunctionTypes;
import de.q60.mps.polymorphicfunctions.runtime.IFunctionImplementation;
import java.util.List;
import de.q60.mps.polymorphicfunctions.runtime.IParameterType;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import java.util.ArrayList;
import de.q60.mps.polymorphicfunctions.runtime.IPFContext;
import de.q60.mps.polymorphicfunctions.runtime.ParameterList;
import org.jetbrains.mps.openapi.language.SLanguage;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import de.q60.mps.shadowmodels.runtime.engine.ParameterType_INode;
import org.modelix.model.mpsadapters.mps.SConceptAdapter;
import org.modelix.model.api.INode;
import de.q60.mps.shadowmodels.runtime.smodel.SM_GeneratedTransformationRule;
import jetbrains.mps.smodel.SNodePointer;
import de.q60.mps.shadowmodels.runtime.engine.ContainmentTargetRootNodes;
import de.q60.mps.shadowmodels.runtime.engine.TransformationCall;
import de.q60.mps.shadowmodels.runtime.engine.TransformationResult;
import de.q60.mps.shadowmodels.runtime.engine.ContributionContext;
import de.q60.mps.shadowmodels.runtime.engine.IBuilderContext;
import de.q60.mps.shadowmodels.runtime.engine.BuilderContextParameter;
import de.q60.mps.shadowmodels.runtime.smodel.SM_ParameterConversion;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.internal.collections.runtime.Sequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import java.util.Objects;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import de.q60.mps.shadowmodels.runtime.engine.RootBuilderContext;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import de.q60.mps.shadowmodels.runtime.engine.ForkCall;
import de.q60.mps.shadowmodels.runtime.engine.GoalCall;
import org.jetbrains.mps.openapi.language.SConcept;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import org.jetbrains.mps.openapi.language.SProperty;

public class Repository extends PFModule {
  private static final Logger LOG = Logger.getLogger(Repository.class);
  public static final Repository INSTANCE = ((_FunctionTypes._return_P0_E0<Repository>) () -> {
    try {
      return new Repository();
    } catch (RuntimeException ex) {
      if (LOG.isErrorLevel()) {
        LOG.error("Failed to load " + Repository.class.getName(), ex);
      }
      throw ex;
    }
  }).invoke();
  private Repository() {
    addImplementation("de.q60.mps.shadowmodels.transformation.polyfun.TransformationModuleMetaFunctions.getOutputLanguages", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromList(new ArrayList<IParameterType>());
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.examples.blext.transformations/Repository/getOutputLanguages_0";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return ListSequence.fromListAndArray(new ArrayList<SLanguage>(), MetaAdapterFactory.getLanguage(0xfdda8484fc574faaL, 0x9059032e2b8b648fL, "de.q60.mps.shadowmodels.repository"), MetaAdapterFactory.getLanguage(0xa7577d1d4e5431dL, 0x98b1fae38f9aee80L, "org.modelix.model.repositoryconcepts"), MetaAdapterFactory.getLanguage(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, "jetbrains.mps.lang.core"), MetaAdapterFactory.getLanguage(0xf3061a5392264cc5L, 0xa443f952ceaf5816L, "jetbrains.mps.baseLanguage"));
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.shadowmodels.repository.transformations.ShadowRepository.Repository&", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_INode(SConceptAdapter.wrap(CONCEPTS.Repository$db)));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.examples.blext.transformations/Repository/Repository&_1";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof INode && ((INode) _PFparameters.get(0)).getConcept().isSubConceptOf(SConceptAdapter.wrap(CONCEPTS.Repository$db)))) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return new SM_GeneratedTransformationRule(new SNodePointer("r:c375a18d-71ae-4a50-a794-bc6969ddf849(de.q60.mps.shadowmodels.examples.blext.transformations)", "9192345617660068455")) {
          @Override
          public void apply(ContainmentTargetRootNodes<TransformationCall> call, final TransformationResult result) {
            if (result.getFirstRootElement(0) == null) {
              return;
            }
            new ContributionContext(call, result).run((final IBuilderContext context) -> {
              result.setTraceInfo("r:c375a18d-71ae-4a50-a794-bc6969ddf849(de.q60.mps.shadowmodels.examples.blext.transformations)/9192345617660068455");
              context.forChildRole("0").run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                public void invoke(final IBuilderContext context) {
                  context.withParameter(BuilderContextParameter.ID, "_U0zpnmR_0").createNode(new SConceptAdapter(CONCEPTS.Repository$db)).run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                    public void invoke(final IBuilderContext context) {
                      context.getResultElement().setTraceInfo("r:c375a18d-71ae-4a50-a794-bc6969ddf849(de.q60.mps.shadowmodels.examples.blext.transformations)/9192345617660071855");
                      if (true) {
                        context.forChildRole("modules").run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                          public void invoke(final IBuilderContext context) {
                            context.withParameter(BuilderContextParameter.ID, "_U0zpnmR_1").createNode(new SConceptAdapter(CONCEPTS.Module$4i)).run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                              public void invoke(final IBuilderContext context) {
                                context.getResultElement().setTraceInfo("r:c375a18d-71ae-4a50-a794-bc6969ddf849(de.q60.mps.shadowmodels.examples.blext.transformations)/9192345617660072761");
                                final IBuilderContext savedContext_wm5ned_a0a0a1 = context;
                                context.getResultElement().setProperty("name", () -> {
                                  return savedContext_wm5ned_a0a0a1.compute(new _FunctionTypes._return_P1_E0<String, IBuilderContext>() {
                                    public String invoke(final IBuilderContext context) {
                                      return SM_ParameterConversion.asString("examples.blext");
                                    }
                                  });
                                });
                                if (true) {
                                  context.forChildRole("models").run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                                    public void invoke(final IBuilderContext context) {
                                      int i_a1a0a0b = 0;
                                      for (SNode e_a1a0a0b : Sequence.fromIterable(SLinkOperations.collectMany(ListSequence.fromList(SLinkOperations.getChildren(SM_ParameterConversion.toMPS(((INode) context.getContextValue())), LINKS.modules$jBPn)).where((it) -> Objects.equals(SPropertyOperations.getString(it, PROPS.name$MnvL), "de.q60.mps.shadowmodels.examples.input")), LINKS.models$h3QT)).where((it) -> Objects.equals(SPropertyOperations.getString(it, PROPS.name$MnvL), "de.q60.mps.shadowmodels.examples.input.blext"))) {
                                        context.forContextValue(SM_ParameterConversion.fromMPS(e_a1a0a0b)).withAdditionalIdPrefix("_U0zpnmR_2" + "#" + i_a1a0a0b).run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                                          public void invoke(final IBuilderContext context) {
                                            context.createNode(new TransformationCall("de.q60.mps.shadowmodels.examples.blext.transformations.Repository.outputModel", new ParameterList(ListSequence.fromListAndArray(new ArrayList<Object>(), SM_ParameterConversion.fromMPS(SM_ParameterConversion.toMPS(((INode) context.getContextValue()))))), "r:c375a18d-71ae-4a50-a794-bc6969ddf849(de.q60.mps.shadowmodels.examples.blext.transformations)/9192345617660072786"));
                                          }
                                        });
                                        i_a1a0a0b++;
                                      }
                                    }
                                  });
                                }
                              }
                            });
                          }
                        });
                      }
                    }
                  });
                }
              });
            });
          }
        };
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.shadowmodels.examples.blext.transformations.Repository.outputModel", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_INode(SConceptAdapter.wrap(CONCEPTS.Model$2P)));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.examples.blext.transformations/Repository/outputModel_4";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof INode && ((INode) _PFparameters.get(0)).getConcept().isSubConceptOf(SConceptAdapter.wrap(CONCEPTS.Model$2P)))) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return new SM_GeneratedTransformationRule(new SNodePointer("r:c375a18d-71ae-4a50-a794-bc6969ddf849(de.q60.mps.shadowmodels.examples.blext.transformations)", "9192345617659972781")) {
          @Override
          public void apply(ContainmentTargetRootNodes<TransformationCall> call, final TransformationResult result) {
            new RootBuilderContext(call, result).run((final IBuilderContext context) -> {
              result.setTraceInfo("r:c375a18d-71ae-4a50-a794-bc6969ddf849(de.q60.mps.shadowmodels.examples.blext.transformations)/9192345617659972781");
              context.forChildRole("0").run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                public void invoke(final IBuilderContext context) {
                  context.createNode(new TransformationCall("de.q60.mps.shadowmodels.examples.blext.transformations.Repository.outputModelWithRewrite", new ParameterList(ListSequence.fromListAndArray(new ArrayList<Object>(), SM_ParameterConversion.fromMPS(SM_ParameterConversion.toMPS(((INode) context.getInput(0)))))), "r:c375a18d-71ae-4a50-a794-bc6969ddf849(de.q60.mps.shadowmodels.examples.blext.transformations)/7651629045961404869"));
                }
              });
              context.forChildRole("1").run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                public void invoke(final IBuilderContext context) {
                  context.createNode(new TransformationCall("de.q60.mps.shadowmodels.examples.blext.transformations.Repository.outputModelWithCopy", new ParameterList(ListSequence.fromListAndArray(new ArrayList<Object>(), SM_ParameterConversion.fromMPS(SM_ParameterConversion.toMPS(((INode) context.getInput(0)))))), "r:c375a18d-71ae-4a50-a794-bc6969ddf849(de.q60.mps.shadowmodels.examples.blext.transformations)/8286906820978181177"));
                }
              });
              context.forChildRole("2").run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                public void invoke(final IBuilderContext context) {
                  context.createNode(new TransformationCall("de.q60.mps.shadowmodels.examples.blext.transformations.Repository.outputModelWithReductionRules", new ParameterList(ListSequence.fromListAndArray(new ArrayList<Object>(), SM_ParameterConversion.fromMPS(SM_ParameterConversion.toMPS(((INode) context.getInput(0)))))), "r:c375a18d-71ae-4a50-a794-bc6969ddf849(de.q60.mps.shadowmodels.examples.blext.transformations)/5228830074597112238"));
                }
              });
            });
          }
        };
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.shadowmodels.examples.blext.transformations.Repository.outputModelWithRewrite", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_INode(SConceptAdapter.wrap(CONCEPTS.Model$2P)));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.examples.blext.transformations/Repository/outputModelWithRewrite_7";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof INode && ((INode) _PFparameters.get(0)).getConcept().isSubConceptOf(SConceptAdapter.wrap(CONCEPTS.Model$2P)))) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return new SM_GeneratedTransformationRule(new SNodePointer("r:c375a18d-71ae-4a50-a794-bc6969ddf849(de.q60.mps.shadowmodels.examples.blext.transformations)", "3502377949041820183")) {
          @Override
          public void apply(ContainmentTargetRootNodes<TransformationCall> call, final TransformationResult result) {
            new RootBuilderContext(call, result).run((final IBuilderContext context) -> {
              result.setTraceInfo("r:c375a18d-71ae-4a50-a794-bc6969ddf849(de.q60.mps.shadowmodels.examples.blext.transformations)/3502377949041820183");
              context.forChildRole("0").run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                public void invoke(final IBuilderContext context) {
                  context.withParameter(BuilderContextParameter.ID, "3").createNode(new SConceptAdapter(CONCEPTS.Model$2P)).run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                    public void invoke(final IBuilderContext context) {
                      context.getResultElement().setTraceInfo("r:c375a18d-71ae-4a50-a794-bc6969ddf849(de.q60.mps.shadowmodels.examples.blext.transformations)/3502377949041820203");
                      final IBuilderContext savedContext_wm5ned_a0a5 = context;
                      context.getResultElement().setProperty("name", () -> {
                        return savedContext_wm5ned_a0a5.compute(new _FunctionTypes._return_P1_E0<String, IBuilderContext>() {
                          public String invoke(final IBuilderContext context) {
                            return SM_ParameterConversion.asString(SPropertyOperations.getString(SM_ParameterConversion.toMPS(((INode) context.getContextValue())), PROPS.name$MnvL) + ".desugar_rewrite");
                          }
                        });
                      });
                      if (true) {
                        context.forChildRole("rootNodes").run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                          public void invoke(final IBuilderContext context) {
                            int i_a1a0f = 0;
                            for (SNode e_a1a0f : Sequence.fromIterable(SNodeOperations.ofConcept(SLinkOperations.getChildren(SM_ParameterConversion.toMPS(((INode) context.getContextValue())), LINKS.rootNodes$jxXY), CONCEPTS.ClassConcept$bK))) {
                              context.forContextValue(SM_ParameterConversion.fromMPS(e_a1a0f)).withAdditionalIdPrefix("4" + "#" + i_a1a0f).run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                                public void invoke(final IBuilderContext context) {
                                  context.createNode(((ForkCall) _PFcontext.callFunction("de.q60.mps.shadowmodels.examples.blext.transformations.desugarUsingRewrite.classFork", new ParameterList(new Object[]{SM_ParameterConversion.fromMPS(SM_ParameterConversion.toMPS(((INode) context.getContextValue())))}))).setTraceInfo("r:c375a18d-71ae-4a50-a794-bc6969ddf849(de.q60.mps.shadowmodels.examples.blext.transformations)/3399411678335546517"));
                                }
                              });
                              i_a1a0f++;
                            }
                          }
                        });
                      }
                    }
                  });
                }
              });
            });
          }
        };
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.shadowmodels.examples.blext.transformations.Repository.outputModelWithCopy", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_INode(SConceptAdapter.wrap(CONCEPTS.Model$2P)));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.examples.blext.transformations/Repository/outputModelWithCopy_10";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof INode && ((INode) _PFparameters.get(0)).getConcept().isSubConceptOf(SConceptAdapter.wrap(CONCEPTS.Model$2P)))) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return new SM_GeneratedTransformationRule(new SNodePointer("r:c375a18d-71ae-4a50-a794-bc6969ddf849(de.q60.mps.shadowmodels.examples.blext.transformations)", "7651629045961391483")) {
          @Override
          public void apply(ContainmentTargetRootNodes<TransformationCall> call, final TransformationResult result) {
            new RootBuilderContext(call, result).run((final IBuilderContext context) -> {
              result.setTraceInfo("r:c375a18d-71ae-4a50-a794-bc6969ddf849(de.q60.mps.shadowmodels.examples.blext.transformations)/7651629045961391483");
              context.forChildRole("0").run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                public void invoke(final IBuilderContext context) {
                  context.withParameter(BuilderContextParameter.ID, "5").createNode(new SConceptAdapter(CONCEPTS.Model$2P)).run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                    public void invoke(final IBuilderContext context) {
                      context.getResultElement().setTraceInfo("r:c375a18d-71ae-4a50-a794-bc6969ddf849(de.q60.mps.shadowmodels.examples.blext.transformations)/7651629045961393321");
                      final IBuilderContext savedContext_wm5ned_a0a7 = context;
                      context.getResultElement().setProperty("name", () -> {
                        return savedContext_wm5ned_a0a7.compute(new _FunctionTypes._return_P1_E0<String, IBuilderContext>() {
                          public String invoke(final IBuilderContext context) {
                            return SM_ParameterConversion.asString(SPropertyOperations.getString(SM_ParameterConversion.toMPS(((INode) context.getContextValue())), PROPS.name$MnvL) + ".desugar_copy");
                          }
                        });
                      });
                      if (true) {
                        context.forChildRole("rootNodes").run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                          public void invoke(final IBuilderContext context) {
                            int i_a1a0h = 0;
                            for (SNode e_a1a0h : Sequence.fromIterable(SNodeOperations.ofConcept(SLinkOperations.getChildren(SM_ParameterConversion.toMPS(((INode) context.getContextValue())), LINKS.rootNodes$jxXY), CONCEPTS.ClassConcept$bK))) {
                              context.forContextValue(SM_ParameterConversion.fromMPS(e_a1a0h)).withAdditionalIdPrefix("6" + "#" + i_a1a0h).run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                                public void invoke(final IBuilderContext context) {
                                  context.createNode(new TransformationCall("de.q60.mps.shadowmodels.examples.blext.transformations.desugarUsingCopy.desugar", new ParameterList(ListSequence.fromListAndArray(new ArrayList<Object>(), SM_ParameterConversion.fromMPS(SM_ParameterConversion.toMPS(((INode) context.getContextValue()))))), "r:c375a18d-71ae-4a50-a794-bc6969ddf849(de.q60.mps.shadowmodels.examples.blext.transformations)/7651629045961393336"));
                                }
                              });
                              i_a1a0h++;
                            }
                          }
                        });
                      }
                    }
                  });
                }
              });
            });
          }
        };
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.shadowmodels.examples.blext.transformations.Repository.outputModelWithReductionRules", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_INode(SConceptAdapter.wrap(CONCEPTS.Model$2P)));
      private List<String> contextIds = ListSequence.fromList(new ArrayList<String>());
      private List<String> groupIds = ListSequence.fromList(new ArrayList<String>());
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.examples.blext.transformations/Repository/outputModelWithReductionRules_13";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof INode && ((INode) _PFparameters.get(0)).getConcept().isSubConceptOf(SConceptAdapter.wrap(CONCEPTS.Model$2P)))) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return new SM_GeneratedTransformationRule(new SNodePointer("r:c375a18d-71ae-4a50-a794-bc6969ddf849(de.q60.mps.shadowmodels.examples.blext.transformations)", "5228830074597105112")) {
          @Override
          public void apply(ContainmentTargetRootNodes<TransformationCall> call, final TransformationResult result) {
            new RootBuilderContext(call, result).run((final IBuilderContext context) -> {
              result.setTraceInfo("r:c375a18d-71ae-4a50-a794-bc6969ddf849(de.q60.mps.shadowmodels.examples.blext.transformations)/5228830074597105112");
              context.forChildRole("0").run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                public void invoke(final IBuilderContext context) {
                  context.withParameter(BuilderContextParameter.ID, "7").createNode(new SConceptAdapter(CONCEPTS.Model$2P)).run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                    public void invoke(final IBuilderContext context) {
                      context.getResultElement().setTraceInfo("r:c375a18d-71ae-4a50-a794-bc6969ddf849(de.q60.mps.shadowmodels.examples.blext.transformations)/5228830074597105114");
                      final IBuilderContext savedContext_wm5ned_a0a9 = context;
                      context.getResultElement().setProperty("name", () -> {
                        return savedContext_wm5ned_a0a9.compute(new _FunctionTypes._return_P1_E0<String, IBuilderContext>() {
                          public String invoke(final IBuilderContext context) {
                            return SM_ParameterConversion.asString(SPropertyOperations.getString(SM_ParameterConversion.toMPS(((INode) context.getContextValue())), PROPS.name$MnvL) + ".desugar_reductionRules");
                          }
                        });
                      });
                      if (true) {
                        context.forChildRole("rootNodes").run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                          public void invoke(final IBuilderContext context) {
                            int i_a1a0j = 0;
                            for (SNode e_a1a0j : Sequence.fromIterable(SNodeOperations.ofConcept(SLinkOperations.getChildren(SM_ParameterConversion.toMPS(((INode) context.getContextValue())), LINKS.rootNodes$jxXY), CONCEPTS.ClassConcept$bK))) {
                              context.forContextValue(SM_ParameterConversion.fromMPS(e_a1a0j)).withAdditionalIdPrefix("8" + "#" + i_a1a0j).run(new _FunctionTypes._void_P1_E0<IBuilderContext>() {
                                public void invoke(final IBuilderContext context) {
                                  context.createNode(((GoalCall) _PFcontext.callFunction("de.q60.mps.shadowmodels.examples.blext.transformations.desugarUsingReductionRules.toJava", new ParameterList(new Object[]{SM_ParameterConversion.fromMPS(SM_ParameterConversion.toMPS(((INode) context.getContextValue())))}))).setTraceInfo("r:c375a18d-71ae-4a50-a794-bc6969ddf849(de.q60.mps.shadowmodels.examples.blext.transformations)/5228830074597110599"));
                                }
                              });
                              i_a1a0j++;
                            }
                          }
                        });
                      }
                    }
                  });
                }
              });
            });
          }
        };
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept Repository$db = MetaAdapterFactory.getConcept(0xa7577d1d4e5431dL, 0x98b1fae38f9aee80L, 0x69652614fd1c516L, "org.modelix.model.repositoryconcepts.structure.Repository");
    /*package*/ static final SConcept Module$4i = MetaAdapterFactory.getConcept(0xa7577d1d4e5431dL, 0x98b1fae38f9aee80L, 0x69652614fd1c50fL, "org.modelix.model.repositoryconcepts.structure.Module");
    /*package*/ static final SConcept Model$2P = MetaAdapterFactory.getConcept(0xa7577d1d4e5431dL, 0x98b1fae38f9aee80L, 0x69652614fd1c50cL, "org.modelix.model.repositoryconcepts.structure.Model");
    /*package*/ static final SConcept ClassConcept$bK = MetaAdapterFactory.getConcept(0xf3061a5392264cc5L, 0xa443f952ceaf5816L, 0xf8c108ca66L, "jetbrains.mps.baseLanguage.structure.ClassConcept");
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink modules$jBPn = MetaAdapterFactory.getContainmentLink(0xa7577d1d4e5431dL, 0x98b1fae38f9aee80L, 0x69652614fd1c516L, 0x69652614fd1c517L, "modules");
    /*package*/ static final SContainmentLink models$h3QT = MetaAdapterFactory.getContainmentLink(0xa7577d1d4e5431dL, 0x98b1fae38f9aee80L, 0x69652614fd1c50fL, 0x69652614fd1c512L, "models");
    /*package*/ static final SContainmentLink rootNodes$jxXY = MetaAdapterFactory.getContainmentLink(0xa7577d1d4e5431dL, 0x98b1fae38f9aee80L, 0x69652614fd1c50cL, 0x69652614fd1c514L, "rootNodes");
  }

  private static final class PROPS {
    /*package*/ static final SProperty name$MnvL = MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name");
  }
}

package de.itemis.mps.editor.diagram.runtime.model;

/*Generated by MPS */

import org.jetbrains.annotations.NotNull;
import org.jetbrains.mps.openapi.model.SNode;
import de.itemis.mps.editor.diagram.runtime.jgraph.DiagramCreationContext;
import org.jetbrains.mps.openapi.language.SAbstractConcept;
import org.jetbrains.annotations.Nullable;
import java.util.List;
import de.itemis.mps.editor.diagram.runtime.shape.IShape;
import com.mxgraph.swing.mxGraphComponent;
import java.awt.Color;
import de.itemis.mps.editor.diagram.runtime.jgraph.MyGraphComponent;

public abstract class AbstractDiagramAccessor implements IDiagramAccessor {

  @NotNull
  private SNode mySNode;
  @NotNull
  private LayoutMap myLayoutMap;

  public AbstractDiagramAccessor(@NotNull SNode snode) {
    mySNode = snode;
    SNode layoutMapLocation = snode;
    if (DiagramCreationContext.isSubdiagram() && saveSubDiagramLayoutInDiagram()) {
      layoutMapLocation = DiagramCreationContext.getRootGraph().getRootDiagramModel().getSNode();
    }
    myLayoutMap = LayoutMap.getInstance(layoutMapLocation);
  }

  public boolean saveSubDiagramLayoutInDiagram() {
    return false;
  }

  @Override
  public String getPaletteFolderForEntry(SAbstractConcept concept, SNode targetNode) {
    return null;
  }

  @Override
  public void storeLayoutData(@NotNull IAccessorKey key, @Nullable SNode data) {
    myLayoutMap.setValue(key.serialize(), data, this.saveDiagramLayout());
  }

  @Override
  public void forcedStoreLayoutData(@NotNull IAccessorKey key, @Nullable SNode data) {
    myLayoutMap.setValue(key.serialize(), data, true);
  }

  @Nullable
  @Override
  public SNode getLayoutData(@NotNull IAccessorKey key) {
    return myLayoutMap.getValue(key.serialize());
  }

  @Override
  public boolean hasAnyLayoutData() {
    return myLayoutMap.hasAnyLayoutData();
  }

  @Nullable
  public List<? extends IEndpointRedirect> getEndpointRedirects() {
    return null;
  }

  @NotNull
  @Override
  public IAccessorKey getId() {
    return EndpointUtil.createAccessorKeyForSNode(mySNode);
  }

  @Override
  public boolean autoRouteEdges() {
    return false;
  }

  @Override
  public IShape getDefaultBoxShape() {
    return null;
  }

  @Override
  public boolean canChangeOwner(IDiagramElement element) {
    return false;
  }

  @Override
  public void changeOwner(IDiagramElement element) {
    throw new UnsupportedOperationException();
  }

  public boolean saveDiagramLayout() {
    return true;
  }

  public boolean runAutoLayoutOnInit() {
    return false;
  }

  public boolean fitToSizeOnInit() {
    return false;
  }

  public boolean disableNodeEditing() {
    return false;
  }

  public boolean syncWithModelOnlyOnOpening() {
    return false;
  }

  public boolean allowElementsToBeBelowRequiredSize() {
    return false;
  }

  @Override
  public boolean showGrid() {
    return false;
  }

  @Override
  public boolean useGridSnapping() {
    return false;
  }

  @Override
  public int getGridSize() {
    return 10;
  }


  @Override
  public int getGridStyle() {
    return mxGraphComponent.GRID_STYLE_DOT;
  }

  @Override
  public Color getGridColor() {
    return new Color(192, 192, 192);
  }

  @Override
  public double getArrowKeyMoveAmount() {
    return MyGraphComponent.DEFAULT_ARROW_KEY_MOVE_AMOUNT;
  }

  @Override
  public double getArrowKeyMoveAmountSlow() {
    return MyGraphComponent.DEFAULT_ARROW_KEY_MOVE_AMOUNT_SLOW;
  }

  @Override
  public double getPanAmount() {
    return MyGraphComponent.DEFAULT_PAN_AMOUNT;
  }

  @Override
  public double getPanAmountSlow() {
    return MyGraphComponent.DEFAULT_PAN_AMOUNT_SLOW;
  }

  @Override
  public double getMinimumScale() {
    return MyGraphComponent.DEFAULT_MINIMUM_SCALE;
  }
}

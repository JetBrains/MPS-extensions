package com.mbeddr.mpsutil.projectview.vcs;

/*Generated by MPS */

import jetbrains.mps.vcs.changesmanager.tree.TreeNodeFeatureExtractor;
import org.jetbrains.annotations.Nullable;
import jetbrains.mps.vcs.changesmanager.tree.features.Feature;
import org.jetbrains.annotations.NotNull;
import jetbrains.mps.ide.ui.tree.MPSTreeNode;
import com.mbeddr.mpsutil.projectview.runtime.tree.CustomTreeNode;
import org.jetbrains.mps.openapi.model.SNode;
import org.jetbrains.mps.openapi.model.SNodeReference;
import jetbrains.mps.vcs.changesmanager.tree.features.NodeFeature;
import org.jetbrains.mps.openapi.model.SModel;
import jetbrains.mps.vcs.changesmanager.tree.features.ModelFeature;

public class CustomTreeFeatureExtractor implements TreeNodeFeatureExtractor {
  @Nullable
  public Feature getFeature(@NotNull MPSTreeNode treeNode) {
    if (!(treeNode instanceof CustomTreeNode)) {
      return null;
    }
    CustomTreeNode customTreeNode = ((CustomTreeNode) treeNode);

    Object object = customTreeNode.getObject();
    if (object instanceof SNode) {
      SNodeReference reference = ((SNode) object).getReference();
      if (reference.getModelReference() == null) {
        return null;
      }
      return new NodeFeature(reference);
    } else if (object instanceof SModel) {
      return new ModelFeature(((SModel) object).getReference());
    } else {
      return null;
    }
  }
}

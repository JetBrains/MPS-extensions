package com.mbeddr.mpsutil.editor.querylist.runtime;

/*Generated by MPS */

import jetbrains.mps.openapi.editor.EditorContext;
import jetbrains.mps.openapi.editor.cells.SubstituteInfo;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import de.slisson.mps.hacks.editor.SubstituteUtil;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import org.jetbrains.mps.openapi.language.SAbstractConcept;

public class SubstituteInfoFactory {

  private EditorContext myEditorContext;

  public SubstituteInfoFactory(EditorContext context) {
    myEditorContext = context;
  }

  public SubstituteInfo forEmptyList(SNode parent, SNode linkdDeclaration) {
    return forChild(parent, null, linkdDeclaration);
  }

  public SubstituteInfo forChild(SNode child) {
    if (SNodeOperations.getParent(child) == null) {
      return null;
    }
    return forChild(SNodeOperations.getParent(child), child, SNodeOperations.getContainingLink(child));
  }

  public SubstituteInfo forChild(SNode parent, SNode child) {
    return forChild(parent, child, SNodeOperations.getContainingLink(child));
  }

  public SubstituteInfo forChild(SNode parent, SNode child, SNode linkDeclaration) {
    return SubstituteUtil.forChild(myEditorContext, parent, child, linkDeclaration);
  }

  public SubstituteInfo forChild(SNode parent, SNode child, SContainmentLink linkDeclaration) {
    return SubstituteUtil.forChild(myEditorContext, parent, child, linkDeclaration);
  }

  public SubstituteInfo forWrapper(SNode parentNode, SNode currentWrapped, SContainmentLink childLink, SAbstractConcept wrappedConcept, NodeSubstituter substituter) {
    return new WrapperSubstituteInfo(myEditorContext, parentNode, currentWrapped, childLink, wrappedConcept, substituter);
  }
}

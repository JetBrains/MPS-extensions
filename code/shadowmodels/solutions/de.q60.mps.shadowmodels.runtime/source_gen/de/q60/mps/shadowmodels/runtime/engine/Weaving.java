package de.q60.mps.shadowmodels.runtime.engine;

/*Generated by MPS */

import jetbrains.mps.baseLanguage.closures.runtime._FunctionTypes;

public class Weaving implements IWeaving {

  private IScope sourceScope;
  private IReferenceTarget targetNode;
  private String targetRole;
  private int index;
  private IUniqueContainmentTarget<TransformationCall> content;
  private _FunctionTypes._return_P1_E0<? extends IUniqueContainmentTarget<TransformationCall>, ? super ISubgraphStage> contentCreator;

  public Weaving(IScope sourceScope, IReferenceTarget targetNode, String targetRole, int index, IUniqueContainmentTarget<TransformationCall> content) {
    this.sourceScope = sourceScope;
    this.targetNode = targetNode;
    this.targetRole = targetRole;
    this.index = index;
    this.content = content;
  }

  public Weaving(IScope sourceScope, IReferenceTarget targetNode, String targetRole, int index, _FunctionTypes._return_P1_E0<? extends IUniqueContainmentTarget<TransformationCall>, ? super ISubgraphStage> contentCreator) {
    this.sourceScope = sourceScope;
    this.targetNode = targetNode;
    this.targetRole = targetRole;
    this.index = index;
    this.contentCreator = contentCreator;
  }

  @Override
  public IOutputNodeReference wrap(IOutputNodeReference node) {
    return new OutputNodeReferenceWithWeaving(node, this);
  }

  @Override
  public IScope getSourceScope() {
    return sourceScope;
  }

  @Override
  public IReferenceTarget getTargetNode() {
    return targetNode;
  }

  @Override
  public String getTargetRole() {
    return targetRole;
  }

  @Override
  public int getIndex() {
    return index;
  }

  @Override
  public IUniqueContainmentTarget<TransformationCall> getContent(ISubgraphStage stage) {
    if (content == null && contentCreator != null) {
      content = contentCreator.invoke(stage);
    }
    return content;
  }

  @Override
  public boolean equals(Object o) {
    if (this == o) {
      return true;
    }
    if (o == null || this.getClass() != o.getClass()) {
      return false;
    }

    Weaving that = (Weaving) o;
    if ((targetNode != null ? !(targetNode.equals(that.targetNode)) : that.targetNode != null)) {
      return false;
    }
    if ((targetRole != null ? !(((Object) targetRole).equals(that.targetRole)) : that.targetRole != null)) {
      return false;
    }
    if (index != that.index) {
      return false;
    }
    if ((content != null ? !(content.equals(that.content)) : that.content != null)) {
      return false;
    }

    return true;
  }

  @Override
  public int hashCode() {
    int result = 0;
    result = 31 * result + ((targetNode != null ? ((Object) targetNode).hashCode() : 0));
    result = 31 * result + ((targetRole != null ? String.valueOf(targetRole).hashCode() : 0));
    result = 31 * result + index;
    result = 31 * result + ((content != null ? ((Object) content).hashCode() : 0));
    return result;
  }
}

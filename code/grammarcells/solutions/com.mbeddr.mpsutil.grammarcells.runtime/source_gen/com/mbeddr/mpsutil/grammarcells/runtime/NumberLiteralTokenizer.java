package com.mbeddr.mpsutil.grammarcells.runtime;

/*Generated by MPS */

import org.jetbrains.annotations.Nullable;
import java.util.List;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import java.util.ArrayList;

public class NumberLiteralTokenizer implements ITokenizer {

  @Nullable
  public List<String> tokenize(String textBeforeCaret, String textAfterCaret) {
    String text = textBeforeCaret + textAfterCaret;

    List<String> result = ListSequence.fromList(new ArrayList<String>());
    StringBuffer currentToken = new StringBuffer();
    boolean inNumber = true;
    for (char c : text.toCharArray()) {
      boolean isSuffix = inNumber && currentToken.length() > 0 && ('a' <= c && c <= 'z' || 'A' <= c && c <= 'Z');
      boolean isDigit = '0' <= c && c <= '9';
      boolean isDot = inNumber && currentToken.length() > 0 && c == '.';
      boolean isNumber = isSuffix || isDigit || isDot;

      if (inNumber != isNumber) {
        ListSequence.fromList(result).addElement(currentToken.toString());
        currentToken = new StringBuffer();
        inNumber = !(inNumber);
      }
      if (c != ' ') {
        currentToken.append(c);
      }
    }
    if (currentToken.length() > 0) {
      ListSequence.fromList(result).addElement(currentToken.toString());
    }
    return result;
  }
}

package de.slisson.mps.tables.runtime.substitute;

/*Generated by MPS */

import jetbrains.mps.nodeEditor.cellMenu.AbstractNodeSubstituteInfo;
import org.jetbrains.mps.openapi.model.SNode;
import org.jetbrains.mps.openapi.language.SAbstractConcept;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import jetbrains.mps.openapi.editor.EditorContext;
import java.util.List;
import jetbrains.mps.openapi.editor.cells.SubstituteAction;
import jetbrains.mps.smodel.action.IChildNodeSetter;
import jetbrains.mps.smodel.action.AbstractChildNodeSetter;
import org.jetbrains.annotations.Nullable;
import jetbrains.mps.smodel.action.ModelActions;

public class WrapperSubstituteInfo extends AbstractNodeSubstituteInfo {

  private SNode myParentNode;
  private SNode myCurrentWrapped;
  private SAbstractConcept myWrappedConcept;
  private NodeSubstituter myNodeSetter;
  private SContainmentLink myChildLink;

  public WrapperSubstituteInfo(EditorContext editorContext, SNode parentNode, SNode currentWrapped, SContainmentLink childLink, SAbstractConcept wrappedConcept, NodeSubstituter substituter) {
    super(editorContext);
    myParentNode = parentNode;
    myCurrentWrapped = currentWrapped;
    myWrappedConcept = wrappedConcept;
    myNodeSetter = substituter;
    myChildLink = childLink;
  }

  @Override
  protected List<SubstituteAction> createActions() {
    IChildNodeSetter setter = new AbstractChildNodeSetter() {
      @Override
      protected SNode doExecute(SNode parentNode, SNode oldChild, SNode newChild, @Nullable EditorContext scope) {
        return myNodeSetter.substituteNode(newChild, myCurrentWrapped);
      }

    };
    return ModelActions.createChildNodeSubstituteActions(myParentNode, myCurrentWrapped, myChildLink, myWrappedConcept, setter, getEditorContext());
  }
}

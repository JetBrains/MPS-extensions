package de.itemis.mps.editor.diagram.runtime.model;

/*Generated by MPS */

import org.jetbrains.annotations.NotNull;

public class RelativePosition implements Cloneable {

  @NotNull
  private Point myReferencePoint;
  @NotNull
  private Point myOffset;

  public RelativePosition() {
    this(new Point(0.0, 0.0), new Point(0.0, 0.0));
  }

  public RelativePosition(@NotNull Point offset, Point referencePoint) {
    myOffset = offset;
    myReferencePoint = referencePoint;
  }

  @NotNull
  public Point getAbsolutePoint() {
    return getAbsolutePoint(1.0);
  }

  @NotNull
  public Point getAbsolutePoint(double scale) {
    return new Point(myReferencePoint.getX() + myOffset.getX() * scale, myReferencePoint.getY() + myOffset.getY() * scale);
  }

  public void setAbsolutePosition(double x, double y) {
    myOffset = new Point(x - myReferencePoint.getX(), y - myReferencePoint.getY());
  }

  public void setOffset(double x, double y) {
    myOffset = new Point(x, y);
  }

  @NotNull
  public Point getReferencePoint() {
    return myReferencePoint;
  }

  @NotNull
  public Point getOffset() {
    return myOffset;
  }

  public void setReferencePoint(double x, double y) {
    myReferencePoint = new Point(x, y);
  }

  public void setReferencePointButKeepAbsolutePoint(double x, double y) {
    myOffset = new Point(myOffset.getX() + (myReferencePoint.getX() - x), myOffset.getY() + (myReferencePoint.getY() - y));
    myReferencePoint = new Point(x, y);
  }

  @Override
  public boolean equals(Object o) {
    if (this == o) {
      return true;
    }
    if (o == null || this.getClass() != o.getClass()) {
      return false;
    }

    RelativePosition that = (RelativePosition) o;
    if ((myOffset != null ? !(myOffset.equals(that.myOffset)) : that.myOffset != null)) {
      return false;
    }
    if ((myReferencePoint != null ? !(myReferencePoint.equals(that.myReferencePoint)) : that.myReferencePoint != null)) {
      return false;
    }

    return true;
  }
  @Override
  public int hashCode() {
    int result = 0;
    result = 31 * result + ((myOffset != null ? ((Object) myOffset).hashCode() : 0));
    result = 31 * result + ((myReferencePoint != null ? ((Object) myReferencePoint).hashCode() : 0));
    return result;
  }


  @Override
  public RelativePosition clone() {
    try {
      RelativePosition clone = (RelativePosition) super.clone();
      return clone;
    } catch (CloneNotSupportedException ex) {
      throw new RuntimeException(ex);
    }
  }
}

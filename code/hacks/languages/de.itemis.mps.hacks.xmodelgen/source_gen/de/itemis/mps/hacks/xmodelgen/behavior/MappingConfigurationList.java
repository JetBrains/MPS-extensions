package de.itemis.mps.hacks.xmodelgen.behavior;

/*Generated by MPS */

import jetbrains.mps.smodel.language.LanguageRuntime;
import jetbrains.mps.generator.runtime.TemplateModule;
import jetbrains.mps.generator.runtime.TemplateModel;
import org.jetbrains.mps.openapi.language.SLanguage;
import java.util.List;
import jetbrains.mps.generator.runtime.TemplateMappingConfiguration;
import jetbrains.mps.smodel.language.LanguageRegistry;
import java.util.UUID;
import jetbrains.mps.smodel.adapter.ids.SLanguageId;
import jetbrains.mps.smodel.adapter.structure.language.SLanguageAdapterById;
import java.util.Map;
import de.slisson.mps.reflection.runtime.ReflectionUtil;
import javax.swing.SwingUtilities;
import java.util.Collection;
import jetbrains.mps.smodel.language.GeneratorRuntime;
import java.util.Collections;
import jetbrains.mps.util.NameUtil;
import jetbrains.mps.smodel.runtime.ILanguageAspect;
import org.jetbrains.annotations.NotNull;
import jetbrains.mps.generator.runtime.TemplateMappingPriorityRule;
import org.jetbrains.mps.openapi.module.SModuleReference;
import jetbrains.mps.project.structure.modules.ModuleReference;
import jetbrains.mps.project.ModuleId;
import org.jetbrains.mps.openapi.model.SModelReference;
import jetbrains.mps.generator.runtime.TemplateSwitchMapping;
import jetbrains.mps.generator.runtime.TemplateDeclaration;
import jetbrains.mps.generator.runtime.TemplateDeclarationKey;
import org.jetbrains.mps.openapi.language.SAbstractConcept;
import org.jetbrains.mps.openapi.language.SDataType;
import org.jetbrains.annotations.Nullable;
import org.jetbrains.mps.openapi.module.SModule;
import jetbrains.mps.generator.impl.query.GeneratorQueryProvider;

public class MappingConfigurationList extends LanguageRuntime implements TemplateModule, TemplateModel, SLanguage {

  private List<TemplateMappingConfiguration> mappingConfigurations;
  private LanguageRegistry languageRegistry;
  private UUID uuid = UUID.randomUUID();
  private SLanguageId id = new SLanguageId(uuid);
  private SLanguageAdapterById languageIdHolder = new SLanguageAdapterById(id, "MappingConfigurationList_" + id.toString());

  public MappingConfigurationList(List<TemplateMappingConfiguration> mappingConfigurations, LanguageRegistry languageRegistry) {
    this.mappingConfigurations = mappingConfigurations;
    this.languageRegistry = languageRegistry;
    ((Map<SLanguageId, LanguageRuntime>) ReflectionUtil.readField(LanguageRegistry.class, languageRegistry, "myLanguagesById")).put(id, this);
  }

  public SLanguageAdapterById getIdHolder() {
    // See MetaIdHelper.getLanguage(SLanguage)
    return languageIdHolder;
  }

  public void unregister() {
    ((Map<SLanguageId, LanguageRuntime>) ReflectionUtil.readField(LanguageRegistry.class, languageRegistry, "myLanguagesById")).remove(id);
  }

  public void unregisterLater() {
    SwingUtilities.invokeLater(() -> unregister());
  }

  @Override
  public Collection<? extends GeneratorRuntime> getGenerators() {
    // See RigidPlanBuilder
    unregister();

    return Collections.singleton(this);
  }
  @Override
  public String getNamespace() {
    return NameUtil.toValidIdentifier(id.toString());
  }
  @Override
  protected <T extends ILanguageAspect> T createAspect(Class<T> aspectClass) {
    unregisterLater();
    return null;
  }
  @NotNull
  @Override
  public Iterable<LanguageRuntime> getExtendingLanguages() {
    unregisterLater();
    return Collections.<LanguageRuntime>emptyList();
  }
  @NotNull
  @Override
  public Collection<LanguageRuntime> getExtendedLanguages() {
    unregisterLater();
    return Collections.<LanguageRuntime>emptyList();
  }
  @Override
  public SLanguageId getId() {
    return id;
  }
  @Override
  public int getVersion() {
    unregisterLater();
    return 0;
  }

  @Override
  public Collection<TemplateModel> getModels() {
    return Collections.<TemplateModel>singleton(this);
  }
  @Override
  public Collection<TemplateMappingPriorityRule> getPriorities() {
    unregisterLater();
    return Collections.<TemplateMappingPriorityRule>emptyList();
  }
  @Override
  public Collection<TemplateModule> getExtendedGenerators() {
    unregisterLater();
    return Collections.<TemplateModule>emptyList();
  }
  @Override
  public Collection<TemplateModule> getEmployedGenerators() {
    unregisterLater();
    return Collections.<TemplateModule>emptyList();
  }
  @Override
  public Collection<SLanguage> getTargetLanguages() {
    unregisterLater();
    return Collections.<SLanguage>emptyList();
  }
  @Override
  public String getAlias() {
    unregisterLater();
    return "";
  }
  @NotNull
  @Override
  public SModuleReference getModuleReference() {
    unregister();
    return new ModuleReference("module" + uuid, ModuleId.regular(uuid));
  }
  @NotNull
  @Override
  public LanguageRuntime getSourceLanguage() {
    unregisterLater();
    throw new UnsupportedOperationException();
  }





  @Override
  public Collection<TemplateMappingConfiguration> getConfigurations() {
    return this.mappingConfigurations;
  }
  @Override
  public String getLongName() {
    unregisterLater();
    return "";
  }
  @Override
  public SModelReference getSModelReference() {
    unregisterLater();
    throw new UnsupportedOperationException();
  }
  @Override
  public Collection<TemplateSwitchMapping> getSwitches() {
    unregisterLater();
    return Collections.<TemplateSwitchMapping>emptyList();
  }
  @Override
  public TemplateDeclaration loadTemplate(TemplateDeclarationKey key) {
    unregisterLater();
    throw new UnsupportedOperationException();
  }
  @Override
  public TemplateModule getModule() {
    unregisterLater();
    throw new UnsupportedOperationException();
  }




  @NotNull
  @Override
  public String getQualifiedName() {
    unregisterLater();
    throw new UnsupportedOperationException();
  }
  @Override
  public Iterable<SAbstractConcept> getConcepts() {
    unregisterLater();
    throw new UnsupportedOperationException();
  }
  public Iterable<SDataType> getDatatypes() {
    unregisterLater();
    throw new UnsupportedOperationException();
  }
  @Override
  public boolean isValid() {
    unregisterLater();
    throw new UnsupportedOperationException();
  }
  @Override
  public Iterable<SModuleReference> getLanguageRuntimes() {
    unregisterLater();
    throw new UnsupportedOperationException();
  }
  @Nullable
  @Override
  public SModule getSourceModule() {
    unregisterLater();
    throw new UnsupportedOperationException();
  }
  @Override
  public SModuleReference getSourceModuleReference() {
    unregisterLater();
    throw new UnsupportedOperationException();
  }
  @Deprecated
  @Override
  public int getLanguageVersion() {
    unregisterLater();
    return 0;
  }
  public Class<?> loadClass(String string) throws ClassNotFoundException {
    unregisterLater();
    return null;
  }
  @Override
  public GeneratorQueryProvider getQueryProvider() {
    unregisterLater();
    return null;
  }
}

package de.itemis.mps.compare.pattern.generator.runtime.plugin;

/*Generated by MPS */

import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.generator.template.TemplateQueryContext;
import de.itemis.mps.compare.pattern.runtime.plugin.MatchResult;
import jetbrains.mps.baseLanguage.tuples.runtime.MultiTuple;
import java.util.List;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SConceptOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SConcept;

public class GeneratorUtils {

  public static final String MATCH_RESULT = "matchResult";
  public static final String BASEMAPPINGRULE_CONDITION = "baseMappingRule_Condition";

  public static SNode getLastStatement(SNode list) {
    return getLastStatement(SLinkOperations.getChildren(list, LINKS.statement$53DE));
  }
  public static void AddResultToContext(TemplateQueryContext _context, String matchId, MatchResult result) {
    _context.putStepObject(MultiTuple.<String,String,SNode>from(MATCH_RESULT, matchId, _context.getInputNode()), result);
  }
  public static MatchResult GetResultFromContext(TemplateQueryContext _context, String matchId) {
    return ((MatchResult) _context.getStepObject(MultiTuple.<String,String,SNode>from(MATCH_RESULT, matchId, _context.getInputNode())));
  }
  public static SNode getLastStatement(List<SNode> list) {
    return ListSequence.fromList(list).findLast((it) -> !(SConceptOperations.isExactly(SNodeOperations.asSConcept(SNodeOperations.getConcept(it)), CONCEPTS.Statement$P6)) && !(SNodeOperations.isInstanceOf(it, CONCEPTS.SingleLineComment$Kw)));
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink statement$53DE = MetaAdapterFactory.getContainmentLink(0xf3061a5392264cc5L, 0xa443f952ceaf5816L, 0xf8cc56b200L, 0xf8cc6bf961L, "statement");
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept SingleLineComment$Kw = MetaAdapterFactory.getConcept(0xf3061a5392264cc5L, 0xa443f952ceaf5816L, 0x57d533a7af15ed3aL, "jetbrains.mps.baseLanguage.structure.SingleLineComment");
    /*package*/ static final SConcept Statement$P6 = MetaAdapterFactory.getConcept(0xf3061a5392264cc5L, 0xa443f952ceaf5816L, 0xf8cc56b215L, "jetbrains.mps.baseLanguage.structure.Statement");
  }
}

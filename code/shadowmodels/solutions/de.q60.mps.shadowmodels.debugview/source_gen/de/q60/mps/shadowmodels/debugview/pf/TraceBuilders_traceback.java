package de.q60.mps.shadowmodels.debugview.pf;

/*Generated by MPS */

import de.q60.mps.polymorphicfunctions.runtime.PFModule;
import jetbrains.mps.logging.Logger;
import jetbrains.mps.baseLanguage.closures.runtime._FunctionTypes;
import de.q60.mps.polymorphicfunctions.runtime.IFunctionImplementation;
import java.util.List;
import de.q60.mps.polymorphicfunctions.runtime.IParameterType;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import java.util.ArrayList;
import de.q60.mps.polymorphicfunctions.runtime.ParameterType_Classifier;
import de.q60.mps.shadowmodels.runtime.engine.ChildSubgraphRef;
import de.q60.mps.polymorphicfunctions.runtime.IPFContext;
import de.q60.mps.polymorphicfunctions.runtime.ParameterList;
import de.q60.mps.explorer.pf.ExplorerElement;
import de.q60.mps.shadowmodels.runtime.engine.CopiedOutputNodeReference;
import de.q60.mps.polymorphicfunctions.runtime.GroupPFContext;
import de.q60.mps.shadowmodels.runtime.engine.DependencyTrackingNode;
import de.q60.mps.shadowmodels.runtime.engine.OutputNodeReferenceAsNode;
import de.q60.mps.shadowmodels.runtime.engine.ResultElementOutputNodeReference_Id;
import de.q60.mps.shadowmodels.runtime.engine.ResultElementAsOutputNode;
import de.q60.mps.shadowmodels.runtime.engine.IUniqueContainmentTarget;
import de.q60.mps.shadowmodels.runtime.engine.TransformationCall;
import de.q60.mps.shadowmodels.runtime.engine.CopyCall;
import de.q60.mps.shadowmodels.runtime.engine.OutputNodeReferenceWithWeaving;
import org.jetbrains.mps.openapi.model.SNode;
import de.q60.mps.shadowmodels.runtime.concurrentrepo.RepositoryMirror;
import org.modelix.model.mpsadapters.mps.SNodeToNodeAdapter;
import de.q60.mps.explorer.pf.IExplorerContext;
import jetbrains.mps.ide.icons.GlobalIconManager;
import de.q60.mps.shadowmodels.runtime.smodel.SM_SNodeAPI;

public class TraceBuilders_traceback extends PFModule {
  private static final Logger LOG = Logger.getLogger(TraceBuilders_traceback.class);
  public static final TraceBuilders_traceback INSTANCE = ((_FunctionTypes._return_P0_E0<TraceBuilders_traceback>) () -> {
    try {
      return new TraceBuilders_traceback();
    } catch (RuntimeException ex) {
      if (LOG.isErrorLevel()) {
        LOG.error("Failed to load " + TraceBuilders_traceback.class.getName(), ex);
      }
      throw ex;
    }
  }).invoke();
  private TraceBuilders_traceback() {
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(ChildSubgraphRef.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext", "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_traceback.traceBack");
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_traceback/buildTrace_0";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof ChildSubgraphRef)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return ((ExplorerElement) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new ParameterList(new Object[]{((ChildSubgraphRef) _PFparameters.get(0)).getCall()})));
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(CopiedOutputNodeReference.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext", "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_traceback.traceBack");
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_traceback/buildTrace_1";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof CopiedOutputNodeReference)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        ExplorerElement te = new ExplorerElement();
        te.text = "copy " + new Object() {
          public String groupCall(final IPFContext _PFcontext) {
            return ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{((CopiedOutputNodeReference) _PFparameters.get(0)).getInputNode()})));
          }
        }.groupCall(new GroupPFContext(_PFcontext, "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shortToString"));
        te.addChild("input: ", ((CopiedOutputNodeReference) _PFparameters.get(0)).getInputNode());
        return te;
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(DependencyTrackingNode.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext", "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_traceback.traceBack");
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_traceback/buildTrace_2";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof DependencyTrackingNode)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return ((ExplorerElement) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new ParameterList(new Object[]{DependencyTrackingNode.unwrap(((DependencyTrackingNode) _PFparameters.get(0)))})));
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(OutputNodeReferenceAsNode.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext", "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_traceback.traceBack");
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_traceback/buildTrace_3";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof OutputNodeReferenceAsNode)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return ((ExplorerElement) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new ParameterList(new Object[]{((OutputNodeReferenceAsNode) _PFparameters.get(0)).getOutputNodeReference()})));
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(ResultElementOutputNodeReference_Id.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext", "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_traceback.traceBack");
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_traceback/buildTrace_4";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof ResultElementOutputNodeReference_Id)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        ExplorerElement te = ((ExplorerElement) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new ParameterList(new Object[]{((ResultElementOutputNodeReference_Id) _PFparameters.get(0)).getResultRef().getContainmentTarget()})));
        try {
          final ResultElementAsOutputNode resulElementNode = as_67ztx1_a0a0a1a5a0b0e0c(((ResultElementOutputNodeReference_Id) _PFparameters.get(0)).resolve(((ITraceBuilderContext) _PFcontext.getContextParameters("de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext").get(0)).getTransformationEngine()), ResultElementAsOutputNode.class);
          if (resulElementNode != null) {
            te.navigationTarget = () -> ((ITraceBuilderContext) _PFcontext.getContextParameters("de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext").get(0)).resolveTraceInfo(resulElementNode.getElement().getTraceInfo());
          }
        } catch (Exception ex) {
          if (LOG.isErrorLevel()) {
            LOG.error("", ex);
          }
        }
        return te;
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(IUniqueContainmentTarget.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext", "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_traceback.traceBack");
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_traceback/buildTrace_5";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof IUniqueContainmentTarget)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        return ((ExplorerElement) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new ParameterList(new Object[]{((IUniqueContainmentTarget) _PFparameters.get(0)).getTarget()})));
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(TransformationCall.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext", "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_traceback.traceBack");
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_traceback/buildTrace_6";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof TransformationCall)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        ExplorerElement te = new ExplorerElement();
        te.text = new Object() {
          public String groupCall(final IPFContext _PFcontext) {
            return ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{((TransformationCall) _PFparameters.get(0))})));
          }
        }.groupCall(new GroupPFContext(_PFcontext, "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shortToString"));
        te.navigationTarget = () -> ((ITraceBuilderContext) _PFcontext.getContextParameters("de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext").get(0)).resolveTraceInfo(((TransformationCall) _PFparameters.get(0)).getTraceInfo());
        int index = 0;
        for (Object param : ((TransformationCall) _PFparameters.get(0)).getParameters().asSequence()) {
          te.addChild("parameter " + index++ + ": ", param);
        }
        return te;
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(CopyCall.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext", "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_traceback.traceBack");
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_traceback/buildTrace_7";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof CopyCall)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        ExplorerElement te = new ExplorerElement();
        te.text = "copy " + new Object() {
          public String groupCall(final IPFContext _PFcontext) {
            return ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{((CopyCall) _PFparameters.get(0)).getInput()})));
          }
        }.groupCall(new GroupPFContext(_PFcontext, "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.shortToString"));
        te.addChild("input: ", ((CopyCall) _PFparameters.get(0)).getInput());
        return te;
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(OutputNodeReferenceWithWeaving.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext", "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_traceback.traceBack");
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_traceback/buildTrace_9";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof OutputNodeReferenceWithWeaving)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        ExplorerElement te = new ExplorerElement();
        te.text = "with weavings";
        te.addChild(((OutputNodeReferenceWithWeaving) _PFparameters.get(0)).getWithoutWeaving());
        return te;
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
    addImplementation("de.q60.mps.explorer.pf.TraceBuilders_base.buildTrace", new IFunctionImplementation() {
      private List<IParameterType> myParameterTypes = ListSequence.fromListAndArray(new ArrayList<IParameterType>(), new ParameterType_Classifier(SNode.class));
      private List<String> contextIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_ShadowModels.traceBuilderContext", "de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup");
      private List<String> groupIds = ListSequence.fromListAndArray(new ArrayList<String>(), "de.q60.mps.shadowmodels.debugview.pf.TraceBuilders_traceback.traceBack");
      @Override
      public String getId() {
        return "de.q60.mps.shadowmodels.debugview.pf/TraceBuilders_traceback/buildTrace_11";
      }
      public boolean isApplicable(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        if (!(_PFparameters.get(0) == null || _PFparameters.get(0) instanceof SNode)) {
          return false;
        }
        return true;
      }
      public Object execute(final IPFContext _PFcontext, final ParameterList _PFparameters) {
        ExplorerElement te = new ExplorerElement();

        SNode originalNode = RepositoryMirror.getOriginalNode(SNodeToNodeAdapter.wrap(((SNode) _PFparameters.get(0))), ((IExplorerContext) _PFcontext.getContextParameters("de.q60.mps.explorer.pf.TraceBuilders_base.explorerContextGroup").get(0)).getRepository());
        final SNode snode = (originalNode != null ? originalNode : ((SNode) _PFparameters.get(0)));
        te.text = ((String) _PFcontext.callFunction("de.q60.mps.explorer.pf.TraceBuilders_base.toString", new ParameterList(new Object[]{((SNode) _PFparameters.get(0))})));
        te.icon = (TraceBuilderUtil.isShadowNode(snode) ? TraceIcons.SHADOW_NODE_ICON : GlobalIconManager.getInstance().getIconFor(((SNode) _PFparameters.get(0))));
        te.navigationTarget = () -> SM_SNodeAPI.tryGetUnwrappedNode(snode);

        return te;
      }
      @Override
      public Iterable<IParameterType> getParameterTypes() {
        return myParameterTypes;
      }
      @Override
      public Iterable<String> getContextIds() {
        return contextIds;
      }
      @Override
      public Iterable<String> getPriorityGroupIds() {
        return groupIds;
      }
    });
  }
  private static <T> T as_67ztx1_a0a0a1a5a0b0e0c(Object o, Class<T> type) {
    return (type.isInstance(o) ? (T) o : null);
  }
}

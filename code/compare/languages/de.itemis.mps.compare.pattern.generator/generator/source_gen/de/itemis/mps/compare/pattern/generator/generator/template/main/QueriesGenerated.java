package de.itemis.mps.compare.pattern.generator.generator.template.main;

/*Generated by MPS */

import jetbrains.mps.generator.runtime.Generated;
import jetbrains.mps.generator.impl.query.QueryProviderBase;
import jetbrains.mps.generator.template.BaseMappingRuleContext;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import de.itemis.mps.compare.pattern.generator.runtime.plugin.GeneratorUtils;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.generator.template.PropertyMacroContext;
import jetbrains.mps.generator.template.SourceSubstituteMacroNodeContext;
import jetbrains.mps.typechecking.TypecheckingFacade;
import jetbrains.mps.baseLanguage.behavior.Type__BehaviorDescriptor;
import jetbrains.mps.generator.template.TemplateArgumentContext;
import java.util.Map;
import jetbrains.mps.generator.impl.query.ReductionRuleCondition;
import java.util.HashMap;
import org.jetbrains.annotations.NotNull;
import jetbrains.mps.generator.impl.query.QueryKey;
import jetbrains.mps.generator.template.ReductionRuleQueryContext;
import jetbrains.mps.generator.impl.GenerationFailureException;
import jetbrains.mps.generator.impl.query.SourceNodeQuery;
import org.jetbrains.annotations.Nullable;
import jetbrains.mps.generator.impl.query.PropertyValueQuery;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.language.SProperty;
import jetbrains.mps.generator.impl.query.CallArgumentQuery;
import org.jetbrains.mps.openapi.language.SConcept;
import org.jetbrains.mps.openapi.language.SInterfaceConcept;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import org.jetbrains.mps.openapi.language.SReferenceLink;

@Generated
public class QueriesGenerated extends QueryProviderBase {
  public QueriesGenerated() {
    super(1);
  }
  public static boolean rule_Condition_0_0(final BaseMappingRuleContext _context) {
    SNode rule = SNodeOperations.cast(ListSequence.fromList(SNodeOperations.getNodeAncestors(_context.getNode(), null, false)).findFirst((it) -> SNodeOperations.isInstanceOf(it, CONCEPTS.StaticMethodDeclaration$FJ) && SPropertyOperations.getString(SNodeOperations.cast(it, CONCEPTS.StaticMethodDeclaration$FJ), PROPS.name$MnvL).startsWith(GeneratorUtils.BASEMAPPINGRULE_CONDITION)), CONCEPTS.StaticMethodDeclaration$FJ);
    if (rule == null) {
      return false;
    } else {
      SNode statement = GeneratorUtils.getLastStatement(SLinkOperations.getChildren(SLinkOperations.getTarget(rule, LINKS.body$5xQk), LINKS.statement$53DE));
      if (_context.getNode() != statement) {
        return false;
      } else {
        return SNodeOperations.isInstanceOf(SLinkOperations.getTarget(_context.getNode(), LINKS.expression$eJ92), CONCEPTS.DotExpression$yW) && SNodeOperations.isInstanceOf(SLinkOperations.getTarget(SNodeOperations.cast(SLinkOperations.getTarget(_context.getNode(), LINKS.expression$eJ92), CONCEPTS.DotExpression$yW), LINKS.operation$gs9E), CONCEPTS.MatchOperation$9U);
      }

    }
  }
  public static boolean rule_Condition_0_1(final BaseMappingRuleContext _context) {
    SNode rule = SNodeOperations.cast(ListSequence.fromList(SNodeOperations.getNodeAncestors(_context.getNode(), null, false)).findFirst((it) -> SNodeOperations.isInstanceOf(it, CONCEPTS.StaticMethodDeclaration$FJ) && SPropertyOperations.getString(SNodeOperations.cast(it, CONCEPTS.StaticMethodDeclaration$FJ), PROPS.name$MnvL).startsWith(GeneratorUtils.BASEMAPPINGRULE_CONDITION)), CONCEPTS.StaticMethodDeclaration$FJ);
    if (rule == null) {
      return false;
    } else {
      SNode statement = GeneratorUtils.getLastStatement(SLinkOperations.getChildren(SLinkOperations.getTarget(rule, LINKS.body$5xQk), LINKS.statement$53DE));

      if (_context.getNode() != statement) {
        return false;
      } else {
        return SNodeOperations.isInstanceOf(SLinkOperations.getTarget(_context.getNode(), LINKS.expression$5L7M), CONCEPTS.DotExpression$yW) && SNodeOperations.isInstanceOf(SLinkOperations.getTarget(SNodeOperations.cast(SLinkOperations.getTarget(_context.getNode(), LINKS.expression$5L7M), CONCEPTS.DotExpression$yW), LINKS.operation$gs9E), CONCEPTS.MatchOperation$9U);
      }

    }
  }
  public static Object propertyMacro_GetValue_0_0(final PropertyMacroContext _context) {
    return SNodeOperations.getNodeAncestor(SLinkOperations.getTarget(_context.getNode(), LINKS.member$rCDB), CONCEPTS.MatchOperation$9U, false, false).getNodeId().toString();
  }
  public static Object propertyMacro_GetValue_0_1(final PropertyMacroContext _context) {
    return SPropertyOperations.getString(SLinkOperations.getTarget(_context.getNode(), LINKS.member$rCDB), PROPS.name$MnvL);
  }
  public static Object propertyMacro_GetValue_1_0(final PropertyMacroContext _context) {
    return ((SNode) _context.getVariable("operation")).getNodeId().toString();
  }
  public static SNode sourceNodeQuery_0_0(final SourceSubstituteMacroNodeContext _context) {
    SNode annotation = SLinkOperations.getTarget(_context.getNode(), LINKS.member$rCDB);
    SNode initPart = SNodeOperations.cast(SNodeOperations.getParent(annotation), CONCEPTS.IInitPart$_A);
    SNode expression = SLinkOperations.getTarget(initPart, LINKS.expression$lu95);
    SNode type = TypecheckingFacade.getFromContext().getTypeOf(expression);
    if (SNodeOperations.isInstanceOf(type, CONCEPTS.PrimitiveType$sR)) {
      return Type__BehaviorDescriptor.getClassExpression_idhEwIzOd.invoke(Type__BehaviorDescriptor.getBoxedType_idhEwIzNC.invoke(SNodeOperations.cast(type, CONCEPTS.PrimitiveType$sR)));
    } else {
      return Type__BehaviorDescriptor.getClassExpression_idhEwIzOd.invoke(SNodeOperations.cast(type, CONCEPTS.Type$bu));
    }
  }
  public static SNode sourceNodeQuery_1_0(final SourceSubstituteMacroNodeContext _context) {
    return SLinkOperations.getTarget(((SNode) _context.getVariable("operation")), LINKS.expression$l7b7);
  }
  public static SNode sourceNodeQuery_1_1(final SourceSubstituteMacroNodeContext _context) {
    return SLinkOperations.getTarget(SNodeOperations.cast(SNodeOperations.getParent(((SNode) _context.getVariable("operation"))), CONCEPTS.DotExpression$yW), LINKS.operand$w6IR);
  }
  public static Object templateArgumentQuery_0_0(final TemplateArgumentContext _context) {
    return SNodeOperations.cast(SLinkOperations.getTarget(SNodeOperations.cast(SLinkOperations.getTarget(_context.getNode(), LINKS.expression$eJ92), CONCEPTS.DotExpression$yW), LINKS.operation$gs9E), CONCEPTS.MatchOperation$9U);
  }
  public static Object templateArgumentQuery_0_1(final TemplateArgumentContext _context) {
    return SNodeOperations.cast(SLinkOperations.getTarget(SNodeOperations.cast(SLinkOperations.getTarget(_context.getNode(), LINKS.expression$5L7M), CONCEPTS.DotExpression$yW), LINKS.operation$gs9E), CONCEPTS.MatchOperation$9U);
  }
  private final Map<String, ReductionRuleCondition> rrcMethods = new HashMap<String, ReductionRuleCondition>();
  {
    int i = 0;
    rrcMethods.put("7644114441670977994", new RRC(i++));
    rrcMethods.put("7644114441671070800", new RRC(i++));
  }
  @Override
  @NotNull
  public ReductionRuleCondition getReductionRuleCondition(@NotNull QueryKey identity) {
    ReductionRuleCondition query = identity.forTemplateNode(rrcMethods);
    return (query != null ? query : super.getReductionRuleCondition(identity));
  }
  private static class RRC implements ReductionRuleCondition {
    private final int methodKey;
    public RRC(int methodKey) {
      this.methodKey = methodKey;
    }
    @Override
    public boolean check(ReductionRuleQueryContext ctx) throws GenerationFailureException {
      switch (methodKey) {
        case 0:
          return QueriesGenerated.rule_Condition_0_0(ctx);
        case 1:
          return QueriesGenerated.rule_Condition_0_1(ctx);
        default:
          throw new GenerationFailureException(String.format("Inconsistent QueriesGenerated: there's no condition method for rule %s (key: #%d)", ctx.getTemplateReference(), methodKey));
      }
    }
  }
  private final Map<String, SourceNodeQuery> snqMethods = new HashMap<String, SourceNodeQuery>();
  {
    int i = 0;
    snqMethods.put("8339258394654995331", new SNQ(i++));
    snqMethods.put("7644114441670988205", new SNQ(i++));
    snqMethods.put("7644114441670988217", new SNQ(i++));
  }
  @NotNull
  @Override
  public SourceNodeQuery getSourceNodeQuery(@NotNull QueryKey identity) {
    SourceNodeQuery query = identity.forFunctionNode(snqMethods);
    return (query != null ? query : super.getSourceNodeQuery(identity));
  }
  private static class SNQ implements SourceNodeQuery {
    private final int methodKey;
    public SNQ(int methodKey) {
      this.methodKey = methodKey;
    }
    @Nullable
    public SNode evaluate(@NotNull SourceSubstituteMacroNodeContext ctx) throws GenerationFailureException {
      switch (methodKey) {
        case 0:
          return QueriesGenerated.sourceNodeQuery_0_0(ctx);
        case 1:
          return QueriesGenerated.sourceNodeQuery_1_0(ctx);
        case 2:
          return QueriesGenerated.sourceNodeQuery_1_1(ctx);
        default:
          throw new GenerationFailureException(String.format("Inconsistent QueriesGenerated: there's no method for query %s (key: #%d)", ctx.getTemplateReference(), methodKey));
      }
    }
  }
  private final Map<String, PropertyValueQuery> pvqMethods = new HashMap<String, PropertyValueQuery>();
  {
    int i = 0;
    pvqMethods.put("2808088319015983081", new PVQ(i++, MetaAdapterFactory.getProperty(0xf3061a5392264cc5L, 0xa443f952ceaf5816L, 0xf93d565d10L, 0xf93d565d11L, "value"), "matchId"));
    pvqMethods.put("8339258394654995317", new PVQ(i++, MetaAdapterFactory.getProperty(0xf3061a5392264cc5L, 0xa443f952ceaf5816L, 0xf93d565d10L, 0xf93d565d11L, "value"), "name"));
    pvqMethods.put("2808088319015967813", new PVQ(i++, MetaAdapterFactory.getProperty(0xf3061a5392264cc5L, 0xa443f952ceaf5816L, 0xf93d565d10L, 0xf93d565d11L, "value"), "matchId"));
  }
  @NotNull
  @Override
  public PropertyValueQuery getPropertyValueQuery(@NotNull QueryKey identity) {
    PropertyValueQuery query = identity.forTemplateNode(pvqMethods);
    return (query != null ? query : super.getPropertyValueQuery(identity));
  }
  private static class PVQ extends PropertyValueQuery.Base {
    private final int methodKey;
    /*package*/ PVQ(int methodKey, SProperty property, String templateValue) {
      super(property, templateValue);
      this.methodKey = methodKey;
    }
    @Nullable
    public Object evaluate(@NotNull PropertyMacroContext ctx) throws GenerationFailureException {
      switch (methodKey) {
        case 0:
          return QueriesGenerated.propertyMacro_GetValue_0_0(ctx);
        case 1:
          return QueriesGenerated.propertyMacro_GetValue_0_1(ctx);
        case 2:
          return QueriesGenerated.propertyMacro_GetValue_1_0(ctx);
        default:
          throw new GenerationFailureException(String.format("Inconsistent QueriesGenerated: there's no method for query %s (key: #%d)", ctx.getTemplateReference(), methodKey));
      }
    }
  }
  private final Map<String, CallArgumentQuery> caqMethods = new HashMap<String, CallArgumentQuery>();
  {
    caqMethods.put("7644114441671070438", new CAQ(0));
    caqMethods.put("7644114441671109299", new CAQ(1));
  }
  @NotNull
  @Override
  public CallArgumentQuery getTemplateCallArgumentQuery(@NotNull QueryKey queryKey) {
    CallArgumentQuery query = queryKey.forTemplateNode(caqMethods);
    return (query != null ? query : super.getTemplateCallArgumentQuery(queryKey));
  }
  private static class CAQ implements CallArgumentQuery {
    private final int methodKey;
    /*package*/ CAQ(int methodKey) {
      this.methodKey = methodKey;
    }
    @Nullable
    public Object evaluate(@NotNull TemplateArgumentContext ctx) throws GenerationFailureException {
      switch (methodKey) {
        case 0:
          return QueriesGenerated.templateArgumentQuery_0_0(ctx);
        case 1:
          return QueriesGenerated.templateArgumentQuery_0_1(ctx);
        default:
          throw new GenerationFailureException(String.format("Inconsistent QueriesGenerated: there's no method for query %s (key: #%d)", ctx.getTemplateReference(), methodKey));
      }
    }
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept StaticMethodDeclaration$FJ = MetaAdapterFactory.getConcept(0xf3061a5392264cc5L, 0xa443f952ceaf5816L, 0xfbbebabf0aL, "jetbrains.mps.baseLanguage.structure.StaticMethodDeclaration");
    /*package*/ static final SConcept DotExpression$yW = MetaAdapterFactory.getConcept(0xf3061a5392264cc5L, 0xa443f952ceaf5816L, 0x116b46a08c4L, "jetbrains.mps.baseLanguage.structure.DotExpression");
    /*package*/ static final SConcept MatchOperation$9U = MetaAdapterFactory.getConcept(0xdc1e48dd946245bdL, 0xb16cfb5ec3fdb3bbL, 0x186d97e0b986cd07L, "de.itemis.mps.compare.pattern.generator.structure.MatchOperation");
    /*package*/ static final SInterfaceConcept IInitPart$_A = MetaAdapterFactory.getInterfaceConcept(0x17566462d8374552L, 0x874c64e45c10778aL, 0x316a248a9a0b0bf4L, "de.itemis.mps.compare.pattern.structure.IInitPart");
    /*package*/ static final SConcept PrimitiveType$sR = MetaAdapterFactory.getConcept(0xf3061a5392264cc5L, 0xa443f952ceaf5816L, 0x10f0ad8bde4L, "jetbrains.mps.baseLanguage.structure.PrimitiveType");
    /*package*/ static final SConcept Type$bu = MetaAdapterFactory.getConcept(0xf3061a5392264cc5L, 0xa443f952ceaf5816L, 0xf8c37f506dL, "jetbrains.mps.baseLanguage.structure.Type");
  }

  private static final class PROPS {
    /*package*/ static final SProperty name$MnvL = MetaAdapterFactory.getProperty(0xceab519525ea4f22L, 0x9b92103b95ca8c0cL, 0x110396eaaa4L, 0x110396ec041L, "name");
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink body$5xQk = MetaAdapterFactory.getContainmentLink(0xf3061a5392264cc5L, 0xa443f952ceaf5816L, 0xf8cc56b1fcL, 0xf8cc56b1ffL, "body");
    /*package*/ static final SContainmentLink statement$53DE = MetaAdapterFactory.getContainmentLink(0xf3061a5392264cc5L, 0xa443f952ceaf5816L, 0xf8cc56b200L, 0xf8cc6bf961L, "statement");
    /*package*/ static final SContainmentLink expression$eJ92 = MetaAdapterFactory.getContainmentLink(0xf3061a5392264cc5L, 0xa443f952ceaf5816L, 0xf8cc67c7feL, 0xf8cc6bf96cL, "expression");
    /*package*/ static final SContainmentLink operation$gs9E = MetaAdapterFactory.getContainmentLink(0xf3061a5392264cc5L, 0xa443f952ceaf5816L, 0x116b46a08c4L, 0x116b46b36c4L, "operation");
    /*package*/ static final SContainmentLink expression$5L7M = MetaAdapterFactory.getContainmentLink(0xf3061a5392264cc5L, 0xa443f952ceaf5816L, 0xf8cc56b213L, 0xf8cc56b214L, "expression");
    /*package*/ static final SReferenceLink member$rCDB = MetaAdapterFactory.getReferenceLink(0xdc1e48dd946245bdL, 0xb16cfb5ec3fdb3bbL, 0x6a1559959e42c459L, 0x6a1559959e42c45aL, "member");
    /*package*/ static final SContainmentLink expression$lu95 = MetaAdapterFactory.getContainmentLink(0x17566462d8374552L, 0x874c64e45c10778aL, 0x316a248a9a0b0bf4L, 0x4bb51009d20b0336L, "expression");
    /*package*/ static final SContainmentLink expression$l7b7 = MetaAdapterFactory.getContainmentLink(0xdc1e48dd946245bdL, 0xb16cfb5ec3fdb3bbL, 0x186d97e0b986cd07L, 0x186d97e0b986cd08L, "expression");
    /*package*/ static final SContainmentLink operand$w6IR = MetaAdapterFactory.getContainmentLink(0xf3061a5392264cc5L, 0xa443f952ceaf5816L, 0x116b46a08c4L, 0x116b46a4416L, "operand");
  }
}

package de.itemis.mps.editor.math.runtime;

/*Generated by MPS */

import jetbrains.mps.openapi.editor.cells.EditorCell;
import jetbrains.mps.editor.runtime.style.StyleAttributes;
import jetbrains.mps.nodeEditor.EditorSettings;
import jetbrains.mps.openapi.editor.style.Style;
import jetbrains.mps.editor.runtime.style.StyleImpl;
import jetbrains.mps.nodeEditor.cells.TextLine;

public class MathUtil {
  public static int getFontSize(EditorCell cell) {
    Integer size = cell.getStyle().get(StyleAttributes.FONT_SIZE);
    if (size == null) {
      size = EditorSettings.getInstance().getFontSize();
    }
    return size;
  }

  public static int getFontHeight(EditorCell cell) {
    getFontSize(cell);

    Style style = new StyleImpl();
    style.set(StyleAttributes.FONT_SIZE, getFontSize(cell));
    TextLine textLine = new TextLine("+", style, false);
    textLine.relayout();

    return textLine.getAscent();
  }

  public static double getLayoutCenterY(EditorCell cell) {
    if (cell instanceof EditorCell_MathBase) {
      return ((EditorCell_MathBase) cell).getLayoutCenterY();
    } else {
      return getAscent(cell) - MathUtil.getFontHeight(cell) / 2 + 1;
    }
  }

  /**
   * 
   * @deprecated call getAscent() directly on the editorCell
   */
  @Deprecated
  public static double getAscent(EditorCell cell) {
    return cell.getAscent();
  }
}

package de.slisson.mps.tables.runtime.substitute;

/*Generated by MPS */

import jetbrains.mps.openapi.editor.cells.SubstituteAction;
import jetbrains.mps.openapi.editor.menus.substitute.SubstituteMenuItem;
import org.jetbrains.mps.openapi.model.SNode;
import org.jetbrains.mps.openapi.module.SRepository;
import org.jetbrains.mps.openapi.language.SAbstractConcept;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.openapi.editor.cells.EditorCell;
import org.jetbrains.annotations.Nullable;
import jetbrains.mps.openapi.editor.EditorContext;
import jetbrains.mps.openapi.editor.menus.EditorMenuTraceInfo;

public class SubstituteMenuItemAsSubstituteAction implements SubstituteAction {

  private SubstituteMenuItem myItem;
  private SNode mySourceNode;
  private SRepository myRepository;

  public SubstituteMenuItemAsSubstituteAction(SubstituteMenuItem item, SNode sourceNode, SRepository repository) {
    myItem = item;
    mySourceNode = sourceNode;
    myRepository = repository;
  }

  @Override
  public SNode getIconNode(String pattern) {
    SAbstractConcept concept = myItem.getOutputConcept();
    return SNodeOperations.asNode(concept);
  }
  @Override
  public boolean isReferentPresentation() {
    return false;
  }
  @Override
  public SNode getSourceNode() {
    return mySourceNode;
  }
  @Deprecated
  @Override
  public Object getParameterObject() {
    return null;
  }
  @Deprecated
  @Override
  public SNode getOutputConcept() {
    SAbstractConcept outputConcept = myItem.getOutputConcept();
    return outputConcept.getSourceNode().resolve(myRepository);
  }
  @Override
  public jetbrains.mps.smodel.SNode getActionType(String pattern) {
    return null;
  }
  @Deprecated
  @Override
  public jetbrains.mps.smodel.SNode getActionType(String pattern, EditorCell cell) {
    return getActionType(pattern);
  }
  @Override
  public String getMatchingText(String pattern) {
    return myItem.getMatchingText(pattern);
  }
  @Override
  public String getVisibleMatchingText(String pattern) {
    return getMatchingText(pattern);
  }
  @Override
  public String getDescriptionText(String pattern) {
    return myItem.getDescriptionText(pattern);
  }
  @Override
  public boolean canSubstituteStrictly(String pattern) {
    return myItem.canExecuteStrictly(pattern);
  }
  @Override
  public boolean canSubstitute(String pattern) {
    return myItem.canExecute(pattern);
  }
  @Override
  public SNode substitute(@Nullable EditorContext context, String pattern) {
    SNode newNode = myItem.createNode(pattern);
    if ((mySourceNode != null) && (newNode != null)) {
      SNodeOperations.replaceWithAnother(mySourceNode, newNode);
    }
    return newNode;
  }
  @Nullable
  @Override
  public EditorMenuTraceInfo getEditorMenuTraceInfo() {
    return myItem.getTraceInfo();
  }
}

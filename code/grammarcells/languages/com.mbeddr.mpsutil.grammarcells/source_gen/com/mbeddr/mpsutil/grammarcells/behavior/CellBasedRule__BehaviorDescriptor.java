package com.mbeddr.mpsutil.grammarcells.behavior;

/*Generated by MPS */

import jetbrains.mps.core.aspects.behaviour.BaseBHDescriptor;
import org.jetbrains.mps.openapi.language.SAbstractConcept;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import jetbrains.mps.core.aspects.behaviour.api.SMethod;
import java.util.List;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.core.aspects.behaviour.SMethodBuilder;
import jetbrains.mps.core.aspects.behaviour.SJavaCompoundTypeImpl;
import jetbrains.mps.core.aspects.behaviour.AccessPrivileges;
import java.util.Arrays;
import org.jetbrains.annotations.NotNull;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SLinkOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import com.mbeddr.mpsutil.grammarcells.generatorutils.CellModelTraversalUtil;
import jetbrains.mps.internal.collections.runtime.ListSequence;
import jetbrains.mps.internal.collections.runtime.IterableUtils;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SConceptOperations;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SPropertyOperations;
import jetbrains.mps.lang.core.behavior.BaseConcept__BehaviorDescriptor;
import java.util.ArrayList;
import jetbrains.mps.core.aspects.behaviour.api.SConstructor;
import org.jetbrains.annotations.Nullable;
import jetbrains.mps.core.aspects.behaviour.api.BHMethodNotFoundException;
import org.jetbrains.mps.openapi.language.SContainmentLink;
import org.jetbrains.mps.openapi.language.SConcept;
import org.jetbrains.mps.openapi.language.SInterfaceConcept;
import org.jetbrains.mps.openapi.language.SProperty;

public final class CellBasedRule__BehaviorDescriptor extends BaseBHDescriptor {
  private static final SAbstractConcept CONCEPT = MetaAdapterFactory.getConcept(0x9d69e71978c84286L, 0x90dbfb19c107d049L, 0x71e60ed8dbb1c7cfL, "com.mbeddr.mpsutil.grammarcells.structure.CellBasedRule");

  public static final SMethod<List<SNode>> getSymbolCells_id5ewxJLJn0WX = new SMethodBuilder<List<SNode>>(new SJavaCompoundTypeImpl((Class<List<SNode>>) ((Class) Object.class))).name("getSymbolCells").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(6025964720179908413L).languageId(0x90dbfb19c107d049L, 0x9d69e71978c84286L).build2();
  public static final SMethod<String> getSymbolsText_id5ewxJLJn4ka = new SMethodBuilder<String>(new SJavaCompoundTypeImpl(String.class)).name("getSymbolsText").modifiers(0, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(6025964720179922186L).languageId(0x90dbfb19c107d049L, 0x9d69e71978c84286L).build2();
  /*package*/ static final SMethod<String> cellToText_id5ewxJLJnVSy = new SMethodBuilder<String>(new SJavaCompoundTypeImpl(String.class)).name("cellToText").modifiers(0, AccessPrivileges.PRIVATE).concept(CONCEPT).baseMethodId(6025964720180149794L).languageId(0x90dbfb19c107d049L, 0x9d69e71978c84286L).build2(SMethodBuilder.createJavaParameter((Class<SNode>) ((Class) Object.class), ""));
  public static final SMethod<Boolean> cellAllowedAsSymbol_id1gQHfgGXkQq = new SMethodBuilder<Boolean>(new SJavaCompoundTypeImpl(Boolean.TYPE)).name("cellAllowedAsSymbol").modifiers(1, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(1456550490320227738L).languageId(0x90dbfb19c107d049L, 0x9d69e71978c84286L).build2(SMethodBuilder.createJavaParameter((Class<SNode>) ((Class) Object.class), ""));
  public static final SMethod<Boolean> cellAllowedAsSymbol_id1gQHfgGXnT9 = new SMethodBuilder<Boolean>(new SJavaCompoundTypeImpl(Boolean.TYPE)).name("cellAllowedAsSymbol").modifiers(1, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(1456550490320240201L).languageId(0x90dbfb19c107d049L, 0x9d69e71978c84286L).build2(SMethodBuilder.createJavaParameter((Class<SAbstractConcept>) ((Class) Object.class), ""));
  public static final SMethod<List<SAbstractConcept>> cellsAllowedAsSymbol_id1gQHfgGXil7 = new SMethodBuilder<List<SAbstractConcept>>(new SJavaCompoundTypeImpl((Class<List<SAbstractConcept>>) ((Class) Object.class))).name("cellsAllowedAsSymbol").modifiers(1, AccessPrivileges.PUBLIC).concept(CONCEPT).baseMethodId(1456550490320217415L).languageId(0x90dbfb19c107d049L, 0x9d69e71978c84286L).build2();

  private static final List<SMethod<?>> BH_METHODS = Arrays.<SMethod<?>>asList(getSymbolCells_id5ewxJLJn0WX, getSymbolsText_id5ewxJLJn4ka, cellToText_id5ewxJLJnVSy, cellAllowedAsSymbol_id1gQHfgGXkQq, cellAllowedAsSymbol_id1gQHfgGXnT9, cellsAllowedAsSymbol_id1gQHfgGXil7);

  private static void ___init___(@NotNull SNode __thisNode__) {
  }

  /*package*/ static List<SNode> getSymbolCells_id5ewxJLJn0WX(@NotNull final SNode __thisNode__) {
    SNode symbolsRoot = ((SLinkOperations.getTarget(__thisNode__, LINKS.symbols$yq$$) != null) ? SLinkOperations.getTarget(__thisNode__, LINKS.symbols$yq$$) : SLinkOperations.getTarget(SNodeOperations.getNodeAncestor(__thisNode__, CONCEPTS.GrammarInfoCell$HL, false, false), LINKS.projection$Ukrr));
    List<SNode> symbols = CellModelTraversalUtil.collectDescendantLeafs(symbolsRoot);
    symbols = CellModelTraversalUtil.inlineComponents(symbols, (SNode componentRoot) -> CellModelTraversalUtil.collectDescendantLeafs(componentRoot));
    return ListSequence.fromList(symbols).where((it) -> ((boolean) CellBasedRule__BehaviorDescriptor.cellAllowedAsSymbol_id1gQHfgGXkQq.invoke(__thisNode__.getConcept(), it))).toList();
  }
  /*package*/ static String getSymbolsText_id5ewxJLJn4ka(@NotNull final SNode __thisNode__) {
    return IterableUtils.join(ListSequence.fromList(CellBasedRule__BehaviorDescriptor.getSymbolCells_id5ewxJLJn0WX.invoke(__thisNode__)).select((it) -> ((String) CellBasedRule__BehaviorDescriptor.cellToText_id5ewxJLJnVSy.invokeSpecial(__thisNode__, it))), "  ");
  }
  /*package*/ static String cellToText_id5ewxJLJnVSy(@NotNull SNode __thisNode__, SNode cell) {
    if (SConceptOperations.isExactly(SNodeOperations.asSConcept(SNodeOperations.getConcept(cell)), CONCEPTS.CellModel_Constant$4e)) {
      return "" + SPropertyOperations.getString(SNodeOperations.cast(cell, CONCEPTS.CellModel_Constant$4e), PROPS.text$PIv7);
    }

    return "" + BaseConcept__BehaviorDescriptor.getPresentation_idhEwIMiw.invoke(cell);
  }
  /*package*/ static boolean cellAllowedAsSymbol_id1gQHfgGXkQq(@NotNull SAbstractConcept __thisConcept__, SNode cell) {
    return ((boolean) CellBasedRule__BehaviorDescriptor.cellAllowedAsSymbol_id1gQHfgGXnT9.invoke(__thisConcept__, SNodeOperations.getConcept(cell)));
  }
  /*package*/ static boolean cellAllowedAsSymbol_id1gQHfgGXnT9(@NotNull SAbstractConcept __thisConcept__, SAbstractConcept cell) {
    for (SAbstractConcept c : ListSequence.fromList(CellBasedRule__BehaviorDescriptor.cellsAllowedAsSymbol_id1gQHfgGXil7.invoke(__thisConcept__))) {
      if (SConceptOperations.isSubConceptOf(SNodeOperations.asSConcept(cell), SNodeOperations.asSConcept(c))) {
        return true;
      }
    }
    return false;
  }
  /*package*/ static List<SAbstractConcept> cellsAllowedAsSymbol_id1gQHfgGXil7(@NotNull SAbstractConcept __thisConcept__) {
    return ListSequence.fromListAndArray(new ArrayList<SAbstractConcept>(), CONCEPTS.CellModel_Constant$4e, CONCEPTS.CellModel_Property$uh, CONCEPTS.CellModel_RefNode$8, CONCEPTS.CellModel_RefCell$7g, CONCEPTS.CellModel_Collection$Og, CONCEPTS.IGrammarCell$v$);
  }

  /*package*/ CellBasedRule__BehaviorDescriptor() {
  }

  @Override
  protected void initNode(@NotNull SNode node, @NotNull SConstructor constructor, @Nullable Object[] parameters) {
    ___init___(node);
  }

  @Override
  protected <T> T invokeSpecial0(@NotNull SNode node, @NotNull SMethod<T> method, @Nullable Object[] parameters) {
    int methodIndex = BH_METHODS.indexOf(method);
    if (methodIndex < 0) {
      throw new BHMethodNotFoundException(this, method);
    }
    switch (methodIndex) {
      case 0:
        return (T) ((List<SNode>) getSymbolCells_id5ewxJLJn0WX(node));
      case 1:
        return (T) ((String) getSymbolsText_id5ewxJLJn4ka(node));
      case 2:
        return (T) ((String) cellToText_id5ewxJLJnVSy(node, (SNode) parameters[0]));
      default:
        throw new BHMethodNotFoundException(this, method);
    }
  }

  @Override
  protected <T> T invokeSpecial0(@NotNull SAbstractConcept concept, @NotNull SMethod<T> method, @Nullable Object[] parameters) {
    int methodIndex = BH_METHODS.indexOf(method);
    if (methodIndex < 0) {
      throw new BHMethodNotFoundException(this, method);
    }
    switch (methodIndex) {
      case 3:
        return (T) ((Boolean) cellAllowedAsSymbol_id1gQHfgGXkQq(concept, (SNode) parameters[0]));
      case 4:
        return (T) ((Boolean) cellAllowedAsSymbol_id1gQHfgGXnT9(concept, (SAbstractConcept) parameters[0]));
      case 5:
        return (T) ((List<SAbstractConcept>) cellsAllowedAsSymbol_id1gQHfgGXil7(concept));
      default:
        throw new BHMethodNotFoundException(this, method);
    }
  }

  @NotNull
  @Override
  public List<SMethod<?>> getDeclaredMethods() {
    return BH_METHODS;
  }

  @NotNull
  @Override
  public SAbstractConcept getConcept() {
    return CONCEPT;
  }

  private static final class LINKS {
    /*package*/ static final SContainmentLink symbols$yq$$ = MetaAdapterFactory.getContainmentLink(0x9d69e71978c84286L, 0x90dbfb19c107d049L, 0x71e60ed8dbb1c7cfL, 0x71e60ed8dbb1c7e7L, "symbols");
    /*package*/ static final SContainmentLink projection$Ukrr = MetaAdapterFactory.getContainmentLink(0x9d69e71978c84286L, 0x90dbfb19c107d049L, 0x29cc3d1b55ff5285L, 0x27b90b5c56f20a84L, "projection");
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept GrammarInfoCell$HL = MetaAdapterFactory.getConcept(0x9d69e71978c84286L, 0x90dbfb19c107d049L, 0x29cc3d1b55ff5285L, "com.mbeddr.mpsutil.grammarcells.structure.GrammarInfoCell");
    /*package*/ static final SConcept CellModel_Constant$4e = MetaAdapterFactory.getConcept(0x18bc659203a64e29L, 0xa83a7ff23bde13baL, 0xf9eb01232eL, "jetbrains.mps.lang.editor.structure.CellModel_Constant");
    /*package*/ static final SConcept CellModel_Property$uh = MetaAdapterFactory.getConcept(0x18bc659203a64e29L, 0xa83a7ff23bde13baL, 0xf9eb02612eL, "jetbrains.mps.lang.editor.structure.CellModel_Property");
    /*package*/ static final SConcept CellModel_RefNode$8 = MetaAdapterFactory.getConcept(0x18bc659203a64e29L, 0xa83a7ff23bde13baL, 0xf9eb05cdc7L, "jetbrains.mps.lang.editor.structure.CellModel_RefNode");
    /*package*/ static final SConcept CellModel_RefCell$7g = MetaAdapterFactory.getConcept(0x18bc659203a64e29L, 0xa83a7ff23bde13baL, 0xfd52a2c922L, "jetbrains.mps.lang.editor.structure.CellModel_RefCell");
    /*package*/ static final SConcept CellModel_Collection$Og = MetaAdapterFactory.getConcept(0x18bc659203a64e29L, 0xa83a7ff23bde13baL, 0xf9eaff2517L, "jetbrains.mps.lang.editor.structure.CellModel_Collection");
    /*package*/ static final SInterfaceConcept IGrammarCell$v$ = MetaAdapterFactory.getInterfaceConcept(0x9d69e71978c84286L, 0x90dbfb19c107d049L, 0x27b90b5c56f5af94L, "com.mbeddr.mpsutil.grammarcells.structure.IGrammarCell");
  }

  private static final class PROPS {
    /*package*/ static final SProperty text$PIv7 = MetaAdapterFactory.getProperty(0x18bc659203a64e29L, 0xa83a7ff23bde13baL, 0xf9eb01232eL, 0xf9eb01232fL, "text");
  }
}

package de.itemis.mps.editor.diagram.runtime.model;

/*Generated by MPS */

import jetbrains.mps.openapi.editor.cells.SubstituteAction;
import javax.swing.Icon;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import jetbrains.mps.ide.icons.GlobalIconManager;
import jetbrains.mps.ide.icons.IdeIcons;
import org.jetbrains.annotations.NotNull;
import org.jetbrains.mps.openapi.language.SAbstractConcept;
import org.jetbrains.annotations.Nullable;
import org.jetbrains.mps.openapi.language.SConcept;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;

public class SubstituteActionPaletteEntry extends AbstractPaletteEntry implements IPaletteEntry {
  private SubstituteAction myAction;


  public SubstituteActionPaletteEntry(SubstituteAction action) {
    myAction = action;
  }

  public SubstituteAction getSubstituteAction() {
    return myAction;
  }

  public Icon getIcon() {
    Icon icon;
    SNode iconNode = myAction.getIconNode("");
    if (iconNode != null) {
      icon = (SNodeOperations.isInstanceOf(iconNode, CONCEPTS.AbstractConceptDeclaration$KA) && !(myAction.isReferentPresentation()) ? GlobalIconManager.getInstance().getIconFor(SNodeOperations.asSConcept(SNodeOperations.cast(iconNode, CONCEPTS.AbstractConceptDeclaration$KA))) : GlobalIconManager.getInstance().getIconFor(iconNode));
    } else {
      icon = IdeIcons.DEFAULT_ICON;
    }
    return icon;
  }

  @NotNull
  public SAbstractConcept getOutputConcept() {
    return SNodeOperations.asSConcept(SNodeOperations.cast(myAction.getOutputConcept(), CONCEPTS.AbstractConceptDeclaration$KA));
  }

  @NotNull
  public String getText() {
    return myAction.getMatchingText("");
  }

  @Nullable
  public SNode execute() {
    return myAction.substitute(null, "");
  }

  @Nullable
  public String getFolderName() {
    return null;
  }

  private static final class CONCEPTS {
    /*package*/ static final SConcept AbstractConceptDeclaration$KA = MetaAdapterFactory.getConcept(0xc72da2b97cce4447L, 0x8389f407dc1158b7L, 0x1103553c5ffL, "jetbrains.mps.lang.structure.structure.AbstractConceptDeclaration");
  }
}

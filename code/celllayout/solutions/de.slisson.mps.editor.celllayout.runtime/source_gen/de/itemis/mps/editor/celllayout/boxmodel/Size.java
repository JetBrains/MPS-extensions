package de.itemis.mps.editor.celllayout.boxmodel;

/*Generated by MPS */

import org.jetbrains.mps.annotations.Immutable;

@Immutable
public class Size implements Comparable {
  /**
   * A very large number that is larger than every practically used size, but reduces the potential for overflow errors
   */
  public static final int UNLIMITED = Integer.MAX_VALUE / 128;
  public static final Size UNLIMITED_SIZE = new Size(UNLIMITED, UNLIMITED);
  public static final Size ZERO = new Size(0, 0);

  public static Size limitedWidth(int width) {
    return new Size(width, UNLIMITED);
  }

  public static Size limitedHeight(int height) {
    return new Size(UNLIMITED, height);
  }

  private int myWidth;
  private int myHeight;

  public Size(int width, int height) {
    myWidth = Math.min(width, UNLIMITED);
    myHeight = Math.min(height, UNLIMITED);
  }

  public int getWidth() {
    return myWidth;
  }

  public int getHeight() {
    return myHeight;
  }

  public Size add(Size other) {
    return add(other.getWidth(), other.getHeight());
  }

  public Size add(int width, int height) {
    return new Size(myWidth + width, myHeight + height);
  }

  public Size subtract(Size other) {
    return subtract(other.getWidth(), other.getHeight());
  }

  public Size subtract(int width, int height) {
    return new Size((isWidthLimited() ? myWidth - width : myWidth), (isHeightLimited() ? myHeight - height : myHeight));
  }

  public Size deriveWidth(int width) {
    return new Size(width, myHeight);
  }

  public Size deriveHeight(int height) {
    return new Size(myWidth, height);
  }

  public Size min(Size other) {
    return new Size(Math.min(myWidth, other.getWidth()), Math.min(myHeight, other.getHeight()));
  }

  public Size max(Size other) {
    return new Size(Math.max(myWidth, other.getWidth()), Math.max(myHeight, other.getHeight()));
  }

  public boolean isHeightLimited() {
    return myHeight < UNLIMITED;
  }

  public boolean isWidthLimited() {
    return myWidth < UNLIMITED;
  }

  @Override
  public boolean equals(Object o) {
    if (this == o) {
      return true;
    }
    if (o == null || this.getClass() != o.getClass()) {
      return false;
    }

    Size that = (Size) o;
    if (myWidth != that.myWidth) {
      return false;
    }
    if (myHeight != that.myHeight) {
      return false;
    }

    return true;
  }

  @Override
  public int hashCode() {
    int result = 0;
    result = 31 * result + myWidth;
    result = 31 * result + myHeight;
    return result;
  }

  @Override
  public String toString() {
    return "[" + ((myWidth == UNLIMITED ? "-" : "" + myWidth)) + ", " + ((myHeight == UNLIMITED ? "-" : "" + myHeight)) + "]";
  }

  @Override
  public int compareTo(Object other) {
    Size p0 = this;
    Size p1 = ((Size) other);

    if (p0.getWidth() == p1.getWidth()) {
      if (p0.getHeight() == p1.getHeight()) {
        return 0;
      } else if (p0.getHeight() > p1.getHeight()) {
        return 1;
      } else {
        return -1;
      }
    } else if (p0.getWidth() > p1.getWidth()) {
      return 1;
    } else {
      return -1;
    }
  }
}

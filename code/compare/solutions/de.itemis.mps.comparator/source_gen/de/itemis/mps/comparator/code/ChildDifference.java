package de.itemis.mps.comparator.code;

/*Generated by MPS */

import org.jetbrains.mps.openapi.model.SNode;
import java.util.List;

public class ChildDifference extends NodeDifference {

  private String link;
  private int index;
  private MPSNodeComparisonResult result;

  protected ChildDifference(SNode expected, SNode actual, String expectedName, String actualName, String link, int index, MPSNodeComparisonResult childDifferences) {
    super(expected, actual, expectedName, actualName);
    this.link = link;
    this.index = index;
    this.result = childDifferences;
  }

  public String getLink() {
    return link;
  }

  public int getIndex() {
    return index;
  }

  public List<NodeDifference> getChildDifferences() {
    return result.getDifferences();
  }

  public List<NodeDifference> getNestedDifferences() {
    return getChildDifferences();
  }

  protected String getDescription(String expectedName, String actualName) {
    StringBuilder builder = new StringBuilder();
    builder.append(link);
    builder.append(" (child of concept ");
    builder.append(getExpectedConcept().getName());
    builder.append(") at index ");
    builder.append(index);
    builder.append(" doesn't match: \n\t");
    builder.append(ComparatorStringUtils.indent(result.getDescription()));
    return builder.toString();
  }

}

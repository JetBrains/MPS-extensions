package de.q60.mps.shadowmodels.runtime.engine;

/*Generated by MPS */

import org.modelix.model.api.INode;
import org.jetbrains.annotations.Nullable;

public abstract class ResultElementOutputNodeReference extends AbstractOutputNodeReference implements IOutputNodeReference {
  protected ContainmentTargetRootNodes<TransformationCall> resultRef;

  protected ResultElementOutputNodeReference() {
    // for deserialization
  }

  public ResultElementOutputNodeReference(ContainmentTargetRootNodes<TransformationCall> resultRef) {
    this.resultRef = resultRef;
  }

  protected ITransformationResult getTransformationResult(ITransformationEngine engine) {
    ISubgraphStage stage = engine.resolveStage(resultRef.getStageRef());
    return stage.getTransformationResult(resultRef.getContainmentTarget());
  }

  @Override
  public Iterable<INode> getInputNodes() {
    return resultRef.getContainmentTarget().getInputNodes();
  }

  public ContainmentTargetRootNodes<TransformationCall> getResultRef() {
    return this.resultRef;
  }

  @Nullable
  @Override
  public IStageReference getStageRef() {
    return resultRef.getStageRef();
  }

  @Override
  public String getTraceInfo() {
    return resultRef.getContainmentTarget().getTarget().getTraceInfo();
  }
}

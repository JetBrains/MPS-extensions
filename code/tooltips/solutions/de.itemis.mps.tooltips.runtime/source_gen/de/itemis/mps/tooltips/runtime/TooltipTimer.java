package de.itemis.mps.tooltips.runtime;

/*Generated by MPS */

import javax.swing.Timer;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;

public abstract class TooltipTimer {
  public abstract void showCurrentTooltip(boolean immediately);

  private Timer delayTimer;
  private Timer showImmediatelyTimer;
  private boolean showImmediately;

  public TooltipTimer() {

    delayTimer = new Timer(750, new ActionListener() {
      public void actionPerformed(ActionEvent p0) {
        showCurrentTooltip(false);
        showImmediately = true;
      }
    });
    delayTimer.setRepeats(false);

    showImmediatelyTimer = new Timer(1000, new ActionListener() {
      public void actionPerformed(ActionEvent p0) {
        showImmediately = false;
      }
    });
    showImmediatelyTimer.setRepeats(false);
  }

  public void mouseMovedIn(boolean ctrlKeyIsDown, boolean hasPlatformTooltip) {
    showImmediatelyTimer.stop();
    if (ctrlKeyIsDown) {
      showImmediately = true;
    }
    if (hasPlatformTooltip) {
      showImmediately = false;
    }
    if (showImmediately) {
      showCurrentTooltip(true);
    } else {
      delayTimer.setInitialDelay((hasPlatformTooltip ? 2500 : 750));
      delayTimer.start();
    }
  }

  public void mouseMovedOut() {
    delayTimer.stop();
    showImmediatelyTimer.start();
  }
}

package com.mbeddr.mpsutil.blutil.migration;

/*Generated by MPS */

import org.jetbrains.mps.openapi.language.SContainmentLink;
import jetbrains.mps.smodel.adapter.structure.MetaAdapterFactory;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.lang.smodel.generator.smodelAdapter.SNodeOperations;
import java.util.Objects;

public class TestCaseDetection {

  /**
   * MigrationTestCase:inputNodes link, here as magic constant in order to avoid dependency on j.m.l.test.
   */
  private static final SContainmentLink LINK_INPUT_NODES = MetaAdapterFactory.getContainmentLink(-8825571760360698496L, -7431307307277756308L, 5476670926298696679L, 5476670926298696680L, "inputNodes");

  /**
   * MigrationTestCase:outputNodes link, here as magic constant in order to avoid dependency on j.m.l.test.
   */
  private static final SContainmentLink LINK_OUTPUT_NODES = MetaAdapterFactory.getContainmentLink(-8825571760360698496L, -7431307307277756308L, 5476670926298696679L, 5476670926298698900L, "outputNodes");

  /**
   * Do not migrate input and output nodes of migration test cases.
   * 
   * @param node a node
   * @return true if the node is an input or output node in a MigrationTestCase
   */
  public static boolean isInMigrationTestCase(SNode node) {
    for (SNode n = node; n != null; n = SNodeOperations.getParent(n)) {
      if (Objects.equals(SNodeOperations.getContainingLink(n), LINK_INPUT_NODES) || Objects.equals(SNodeOperations.getContainingLink(n), LINK_OUTPUT_NODES)) {
        return true;
      }
    }

    return false;
  }
}

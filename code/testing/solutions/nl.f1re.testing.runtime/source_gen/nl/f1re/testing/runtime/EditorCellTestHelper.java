package nl.f1re.testing.runtime;

/*Generated by MPS */

import jetbrains.mps.openapi.editor.cells.EditorCell;
import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.nodeEditor.cells.APICellAdapter;
import jetbrains.mps.ide.ThreadUtils;
import jetbrains.mps.nodeEditor.EditorComponent;
import jetbrains.mps.openapi.editor.cells.EditorCell_Collection;
import jetbrains.mps.lang.editor.tooltips.runtime.TooltipWrapper;
import jetbrains.mps.baseLanguage.closures.runtime.Wrappers;

/**
 * This class can be called from places where there is no write/read access to the model like editor node test cases.
 */
public class EditorCellTestHelper {
  private EditorCell editorCell;

  public EditorCellTestHelper(EditorCell editorCell) {
    this.editorCell = editorCell;
  }

  public SNode getLinkedNode() {
    return APICellAdapter.getSNodeWRTReference(editorCell);
  }

  public void focus() {
    ThreadUtils.runInUIThreadAndWait(() -> as_tgai5j_a0a0a0a0a6(editorCell.getEditorComponent(), EditorComponent.class).changeSelectionWRTFocusPolicy(editorCell));
  }

  public EditorCell_Collection getToolTipCell() {
    final TooltipWrapper tooltip = as_tgai5j_a0a0a8(editorCell.getParent(), TooltipWrapper.class);
    final Wrappers._T<EditorCell> tooltipCell = new Wrappers._T<EditorCell>();
    ThreadUtils.runInUIThreadAndWait(() -> tooltipCell.value = tooltip.getTooltipCell());
    return (EditorCell_Collection) tooltipCell.value;
  }
  private static <T> T as_tgai5j_a0a0a0a0a6(Object o, Class<T> type) {
    return (type.isInstance(o) ? (T) o : null);
  }
  private static <T> T as_tgai5j_a0a0a8(Object o, Class<T> type) {
    return (type.isInstance(o) ? (T) o : null);
  }
}

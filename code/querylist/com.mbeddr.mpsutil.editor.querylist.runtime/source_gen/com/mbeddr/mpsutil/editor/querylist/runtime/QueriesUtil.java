package com.mbeddr.mpsutil.editor.querylist.runtime;

/*Generated by MPS */

import org.jetbrains.mps.openapi.model.SNode;
import jetbrains.mps.generator.template.TemplateQueryContext;
import java.util.Set;
import jetbrains.mps.internal.collections.runtime.SetSequence;
import java.util.HashSet;

public class QueriesUtil {
  public static String getUnicName(String name, SNode root, TemplateQueryContext context) {
    SNode bigCell = root;
    Set<String> namesSet = ((Set<String>) context.getStepObject(bigCell));
    if (namesSet == null) {
      namesSet = SetSequence.fromSet(new HashSet<String>());
      context.putStepObject(bigCell, namesSet);
    }
    String result = name;
    int index = 1;
    while (SetSequence.fromSet(namesSet).contains(result)) {
      result = name + "_" + index;
      index++;
    }
    SetSequence.fromSet(namesSet).addElement(result);
    return result;
  }
}

package de.slisson.mps.hacks.editor;

/*Generated by MPS */

import jetbrains.mps.openapi.editor.cells.EditorCell;
import org.jetbrains.mps.openapi.module.SRepository;
import org.jetbrains.mps.openapi.model.SNode;
import org.jetbrains.annotations.Nullable;
import jetbrains.mps.openapi.editor.EditorComponent;
import jetbrains.mps.editor.runtime.HeadlessEditorComponent;

public class EditorCellCreator {

  public static EditorCell createEditorCell(SRepository repository, final SNode node, @Nullable final String[] hints) {
    EditorCellCreator creator = new EditorCellCreator(repository);
    EditorCell result = creator.createEditorCell(node, hints);
    creator.dispose();
    return result;
  }

  private EditorComponent myEditorComponent;

  public EditorCellCreator(SRepository repository) {
    myEditorComponent = new HeadlessEditorComponent(null, repository);
  }

  public EditorCell createEditorCell(final SNode node, @Nullable final String[] hints) {
    myEditorComponent.getUpdater().setInitialEditorHints(hints);
    ((jetbrains.mps.nodeEditor.EditorComponent) myEditorComponent).editNode(node);
    return myEditorComponent.getRootCell();
  }

  public void dispose() {
    myEditorComponent.dispose();
  }
}
